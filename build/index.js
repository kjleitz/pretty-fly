!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),o=()=>{s.width=window.innerWidth,s.height=window.innerHeight};o(),window.addEventListener("resize",o),document.body.appendChild(s);const n=s.getContext("2d");n||console.error("Canvas '2d' context is not supported.");let r=0;const h=(t,e)=>{requestAnimationFrame(()=>h(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e(r),r+=1};var l=h;const a=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],o=s-i;return i+Math.random()*o};function c(t,...e){const i="number"==typeof e[0]?e[0]:0,s="function"==typeof e[0]?e[0]:e[1],[o,n]=t<i?[t,i]:[i,t];return[...Array(n-o).keys()].map(t=>s?s(t+o):t+o)}c(10),c(0,10),c(0,t=>t.toString()),c(0,10,t=>t.toString());window.range=c;const u=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},d=(t,e,i)=>{const[s,o]=e<i?[e,i]:[i,e];return t<s?s:t>o?o:t},g=(t,e,i,s=!0)=>{const[o,n]=e<i?[e,i]:[i,e];return s?t>=o&&t<=n:t>o&&t<n},f=(t,e)=>Math.abs(t-e),p=0,y=1,m=.25,w=100;var b=new class{constructor(){this.masses=[]}collisionsForMove(t,e){const i=new v(Object.assign(Object.assign(Object.assign({},t),e),{darkMatter:!0})),s=i.x-t.x,o=i.y-t.y,n=o<0,r=o>0,h=s<0,l=s>0;return this.masses.reduce((e,s)=>{if(s===t)return e;if(!i.isHitting(s))return e;const o=s.solid?e.solid:e.ephemeral;if(n&&g(s.bottom,t.top,i.top)){const t=f(s.bottom,i.top);o.top<t&&(o.top=t)}if(r&&g(s.top,t.bottom,i.bottom)){const t=f(s.top,i.bottom);o.bottom<t&&(o.bottom=t)}if(h&&g(s.right,t.left,i.left)){const t=f(s.right,i.left);o.left<t&&(o.left=t)}if(l&&g(s.left,t.right,i.right)){const t=f(s.left,i.right);o.right<t&&(o.right=t)}return e},{solid:{top:0,bottom:0,left:0,right:0},ephemeral:{top:0,bottom:0,left:0,right:0}})}overlappingMasses(t,{ignore:e=[]}={}){return this.masses.filter(i=>t!==i&&!e.includes(i)&&t.isHitting(i))}overlap(t,{ignore:e=[]}={}){return this.overlappingMasses(t,{ignore:e}).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const x=(t,e,i,s,o)=>{let n=t+e,r=e+i;return n>o?(n=o,r=0):n<s&&(n=s,r=0),{position:n,velocity:r}};class v{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,this.solid=!0,this.collectOnTouch=!1,this.touchedAt=null,Object.assign(this,t),this.darkMatter||b.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/w}get ax(){return this.stationary?0:p}get ay(){return this.stationary?0:y}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=x(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=x(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height);let i=t.position,s=e.position,o=t.velocity,n=e.velocity;const r=b.collisionsForMove(this,{x:i,y:s}).solid;r.right>0?(i-=r.right,o=0):r.left>0&&(i+=r.left,o=0),r.bottom>0?(s-=r.bottom,n=0):r.top>0&&(s+=r.top,n=0),this.x=i,this.y=s,(this.isAgainstTopWall||this.isAgainstBottomWall||r.top||r.bottom)&&(o=u(o,m)),(this.isAgainstLeftWall||this.isAgainstRightWall||r.left||r.right)&&(n=u(n,m)),this.dx=d(o,-1*this.terminalVelocity,this.terminalVelocity),this.dy=d(n,-1*this.terminalVelocity,this.terminalVelocity)}isHitting(t){return this.right>=t.left&&this.left<=t.right&&this.bottom>=t.top&&this.top<=t.bottom}}var M=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};class S{constructor(t,e,{size:i,brightness:s,vector:o}={}){this.x=t,this.y=e,this.size=i||a(1,5);const n=void 0===s?Math.random():s;this.brightness=d(n,0,1),this.vector=o||[-1,1]}}const k=window.innerWidth,E=window.innerHeight,F=new class extends v{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3}get burning(){return M.pressed}get axJetpack(){if(!this.burning)return 0;const t=M.x-this.x,e=-1*this.width,i=2*this.width;if(g(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=M.y-this.y,e=this.height;return t>=0||g(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}},j=c(10).map(()=>new v({x:a(0,k),y:a(0,E),width:a(50,150),height:a(50,150),stationary:!0})),A=c(10).map(()=>new v({mass:a(.5,5),x:a(0,k),y:a(0,E),width:25,height:25,solid:!1,stationary:Math.random()>.5,collectOnTouch:!0})),O=[...j,...A],R=[F,...O.filter(t=>!t.stationary)];let T=0;const W=A.length,H=c(100,()=>new S(a(0,k),a(0,E))),L=[];setInterval(()=>{const[t,e]=Math.random()>.5?[a(250,k),0]:[k,a(0,E-250)];L.push(new S(t,e,{size:5,brightness:1,vector:[-10,10]}))},2e3),l(n,t=>{H.forEach((e,i)=>{const{x:s,y:o,size:r,brightness:h,vector:l}=e,c=h-Math.random();if(n.fillStyle=`rgba(255, 255, 255, ${(t+i)%20==0?c:h})`,n.fillRect(s,o,r,r),e.x+=l[0],e.y+=l[1],e.x<0||e.x>k||e.y<0||e.y>E){const[t,i]=Math.random()>.5?[a(0,k),0]:[k,a(0,E)];e.x=t,e.y=i}}),L.forEach((t,e)=>{const{x:i,y:s,size:o,brightness:r,vector:h}=t;n.fillStyle=`rgba(255, 255, 255, ${r})`,n.fillRect(i,s,o,o),t.x+=h[0],t.y+=h[1],(t.x<0||t.x>k||t.y<0||t.y>E)&&L.splice(e,1)}),O.forEach((t,e)=>{const i=F.isHitting(t);let s=!0;if(t.solid)n.fillStyle="rgba(255, 0, 0, 0.7)";else if(i&&!t.touchedAt)n.fillStyle="rgba(0, 0, 255, 0.8)",t.touchedAt=(new Date).getTime();else if(t.collectOnTouch&&t.touchedAt){const i=(new Date).getTime()-t.touchedAt;if(i>200)O.splice(e,1),s=!1,T+=1;else{const t=Math.ceil(i/200*255);n.fillStyle=`rgba(${t}, ${t}, 255, 0.8)`}}else n.fillStyle="rgba(0, 100, 255, 0.8)";s&&n.fillRect(t.x,t.y,t.width,t.height)}),n.fillStyle="rgba(0, 150, 0, 1)",n.fillRect(F.x,F.y,F.width,F.height);const e=F.width/2,i=F.height/5;switch(n.fillStyle="rgba(220, 220, 255, 1)",F.burnerXSide){case"left":n.fillRect(F.x+(F.width-e),F.y+3,e,i);break;case"right":n.fillRect(F.x,F.y+3,e,i);break;default:n.fillRect(F.x+(F.width-e)/2,F.y+3,e,i)}const s=`rgba(255, 100, 0, ${a(.5,.75)})`,o=a(.25,.4)*F.width,r=a(.4,.6)*F.height,h=t=>.6*t,l=t=>(t-h(t))/2;switch(n.fillStyle=s,F.burnerXSide){case"left":n.fillRect(F.x-o,F.y+l(F.height),o,h(F.height));break;case"right":n.fillRect(F.x+F.width,F.y+l(F.height),o,h(F.height))}switch(F.burnerYSide){case"bottom":n.fillRect(F.x+l(F.width),F.y+F.height,h(F.width),r);break;case"top":n.fillRect(F.x+l(F.width),F.y-r,h(F.width),r)}n.font="30px Courier",n.fillStyle="#FFF";const c=`${T}/${W}${T===W?" aww yee":""}`;n.fillText(c,50,50),R.forEach(t=>t.update())})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdGllcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdW5pdmVyc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9TdGFyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJyYW5kIiwibWluIiwibWF4IiwicmVhbE1pbiIsInJlYWxNYXgiLCJkaWZmIiwiTWF0aCIsInJhbmRvbSIsInJhbmdlIiwibWF4QW5kT3JNYXBwZXIiLCJtYXBwZXIiLCJBcnJheSIsImtleXMiLCJtYXAiLCJ0b1N0cmluZyIsImRhbXBlbiIsIm51bSIsImJ5IiwiY2VudGVyIiwibmV3TnVtIiwiYm91bmQiLCJiZXR3ZWVuIiwiaW5jbHVzaXZlIiwiZGlmZmVyZW5jZSIsImFicyIsIkdSQVZJVFlfWCIsIkdSQVZJVFlfWSIsIkZSSUNUSU9OIiwiTk9STUFMX0RSQUciLCJtYXNzZXMiLCJzdWJqZWN0IiwidG9Qb3NpdGlvbiIsIm1vdmVkU3ViamVjdCIsImRhcmtNYXR0ZXIiLCJkeCIsIngiLCJkeSIsInkiLCJtb3ZpbmciLCJ0aGlzIiwicmVkdWNlIiwib3ZlcmxhcHMiLCJvYnN0YWNsZSIsImlzSGl0dGluZyIsIm92ZXJsYXAiLCJzb2xpZCIsImVwaGVtZXJhbCIsImJvdHRvbSIsInRvcCIsImRpc3RhbmNlIiwicmlnaHQiLCJsZWZ0IiwiaWdub3JlIiwiZmlsdGVyIiwibWFzcyIsImluY2x1ZGVzIiwib3ZlcmxhcHBpbmdNYXNzZXMiLCJtZW1vIiwidXBkYXRlRGltZW5zaW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsIm5ld1Bvc2l0aW9uIiwibmV3VmVsb2NpdHkiLCJvcHRpb25zIiwic3RhdGlvbmFyeSIsImNvbGxlY3RPblRvdWNoIiwidG91Y2hlZEF0IiwiYXNzaWduIiwicHVzaCIsIm5ld1hEYXRhIiwiYXgiLCJuZXdZRGF0YSIsImF5IiwibmV3WCIsIm5ld1kiLCJuZXdEeCIsIm5ld0R5Iiwic29saWRPdmVybGFwIiwiY29sbGlzaW9uc0Zvck1vdmUiLCJpc0FnYWluc3RUb3BXYWxsIiwiaXNBZ2FpbnN0Qm90dG9tV2FsbCIsImlzQWdhaW5zdExlZnRXYWxsIiwiaXNBZ2FpbnN0UmlnaHRXYWxsIiwidGVybWluYWxWZWxvY2l0eSIsInByZXNzZWQiLCJldmVudCIsInBvcHVsYXRlRnJvbU1vdXNlRXZlbnQiLCJwb3B1bGF0ZUZyb21Ub3VjaEV2ZW50IiwiYnV0dG9ucyIsInRvdWNoZXMiLCJsZW5ndGgiLCJ0b3VjaCIsImNsaWVudFgiLCJjbGllbnRZIiwic2l6ZSIsImJyaWdodG5lc3MiLCJ2ZWN0b3IiLCJiYXNlQnJpZ2h0bmVzcyIsIk1BWF9YIiwiTUFYX1kiLCJwbGF5ZXIiLCJqZXRwYWNrRm9yY2VYIiwiamV0cGFja0ZvcmNlWSIsImJ1cm5pbmciLCJtb3VzZURpc3RhbmNlIiwibGVmdE1hcmdpbiIsInJpZ2h0TWFyZ2luIiwiamV0cGFja0FjY2VsZXJhdGlvbiIsImJvdHRvbU1hcmdpbiIsInN1cGVyIiwiYXhKZXRwYWNrIiwiYXlKZXRwYWNrIiwic29saWRNYXNzZXMiLCJjb2xsZWN0aWJsZXMiLCJmcmVlTWFzc2VzIiwicG9pbnRzIiwibWF4UG9pbnRzIiwic3RhcnMiLCJzaG9vdGluZ1N0YXJzIiwic2V0SW50ZXJ2YWwiLCJsb29wQ291bnQiLCJmb3JFYWNoIiwic3RhciIsImluZGV4IiwidHdpbmtsZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3BsaWNlIiwiaGl0dGluZ01hc3MiLCJzdGlsbFByZXNlbnQiLCJEYXRlIiwiZ2V0VGltZSIsIm1zU2luY2VUb3VjaCIsInJnVmFsdWUiLCJjZWlsIiwiZmFjZW1hc2tXaWR0aCIsImZhY2VtYXNrSGVpZ2h0IiwiYnVybmVyWFNpZGUiLCJidXJuZXJDb2xvciIsImJ1cm5lckxlbmd0aFgiLCJidXJuZXJMZW5ndGhZIiwiYnVybmVyQWNyb3NzIiwiYnVybmVyQWNyb3NzT2Zmc2V0IiwiYnVybmVyWVNpZGUiLCJmb250Iiwic2NvcmVUZXh0IiwiZmlsbFRleHQiLCJ1cGRhdGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxF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LFNBQVNELEVBQVcsR0FBSSxJQUU1Qi9CLEVBQVdPLFFBQVFwRSxHQUFRQSxFQUFLOEYiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuY29uc3Qgc3RyZXRjaENhbnZhcyA9ICgpOiB2b2lkID0+IHtcbiAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG59O1xuXG5zdHJldGNoQ2FudmFzKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc3RyZXRjaENhbnZhcyk7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcbmlmICghY3R4KSBjb25zb2xlLmVycm9yKFwiQ2FudmFzICcyZCcgY29udGV4dCBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcblxuZXhwb3J0IHsgY3R4IH07XG5leHBvcnQgZGVmYXVsdCBjYW52YXM7XG4iLCJsZXQgbG9vcENvdW50ID0gMDtcblxuY29uc3QgZ2FtZUxvb3AgPSAoYzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkcmF3OiAobG9vcENvdW50OiBudW1iZXIpID0+IHZvaWQpOiB2b2lkID0+IHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGdhbWVMb29wKGMsIGRyYXcpKTtcbiAgYy5jbGVhclJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIGRyYXcobG9vcENvdW50KTtcbiAgbG9vcENvdW50ICs9IDE7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lTG9vcDtcbiIsImV4cG9ydCBjb25zdCByYW5kID0gKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBjb25zdCBkaWZmID0gcmVhbE1heCAtIHJlYWxNaW47XG4gIHJldHVybiByZWFsTWluICsgKE1hdGgucmFuZG9tKCkgKiBkaWZmKTtcbn07XG5cbi8vIGV4cG9ydCBjb25zdCByYW5nZSA9IChtaW46IG51bWJlciwgbWF4PzogbnVtYmVyKTogbnVtYmVyW10gPT4ge1xuLy8gICBpZiAoIW1heCkge1xuLy8gICAgIG1heCA9IG1pbjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuLy8gICAgIG1pbiA9IDA7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbi8vICAgfVxuLy8gICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbi8vICAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuLy8gICBjb25zdCBiYXNlQXJyYXkgPSBbLi4uQXJyYXkoZGlmZikua2V5cygpXS5tYXAobiA9PiBuICsgcmVhbE1pbik7XG4vLyAgIHJldHVybiBtYXggPj0gbWluID8gYmFzZUFycmF5IDogW3JlYWxNYXgsIC4uLmJhc2VBcnJheS5zbGljZSgxKS5yZXZlcnNlKCldO1xuLy8gfTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW10pOiBudW1iZXJbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtudW1iZXJdKTogbnVtYmVyW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbKG46IG51bWJlcikgPT4gVF0pOiBUW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbbnVtYmVyLCAobjogbnVtYmVyKSA9PiBUXSk6IFRbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtdfFtudW1iZXJ8KChuOiBudW1iZXIpID0+IFQpXXxbbnVtYmVyLCAobjogbnVtYmVyKSA9PiBUXSk6IChudW1iZXJ8VClbXSB7XG4gIGNvbnN0IG1heCA9IHR5cGVvZiBtYXhBbmRPck1hcHBlclswXSA9PT0gJ251bWJlcicgPyBtYXhBbmRPck1hcHBlclswXSA6IDA7XG4gIGNvbnN0IG1hcHBlciA9IHR5cGVvZiBtYXhBbmRPck1hcHBlclswXSA9PT0gJ2Z1bmN0aW9uJyA/IG1heEFuZE9yTWFwcGVyWzBdIDogbWF4QW5kT3JNYXBwZXJbMV07XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBjb25zdCBkaWZmID0gcmVhbE1heCAtIHJlYWxNaW47XG4gIHJldHVybiBbLi4uQXJyYXkoZGlmZikua2V5cygpXS5tYXAobiA9PiAobWFwcGVyID8gbWFwcGVyKG4gKyByZWFsTWluKSA6IG4gKyByZWFsTWluKSk7XG59XG5cbmNvbnN0IGEgPSByYW5nZSgxMCk7XG5jb25zdCBiID0gcmFuZ2UoMCwgMTApO1xuY29uc3QgYyA9IHJhbmdlKDAsIG4gPT4gbi50b1N0cmluZygpKTtcbmNvbnN0IGQgPSByYW5nZSgwLCAxMCwgbiA9PiBuLnRvU3RyaW5nKCkpO1xuXG4od2luZG93IGFzIGFueSkucmFuZ2UgPSByYW5nZTtcblxuZXhwb3J0IGNvbnN0IGRhbXBlbiA9IChudW06IG51bWJlciwgYnk6IG51bWJlciwgY2VudGVyID0gMCk6IG51bWJlciA9PiB7XG4gIC8vIG51bWJlciBpcyBhbHJlYWR5IGF0IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA9PT0gY2VudGVyKSByZXR1cm4gY2VudGVyO1xuXG4gIC8vIG51bWJlciBpcyBoaWdoZXIgdGhhbiB0aGUgY2VudGVyOyBzdWJ0cmFjdCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA+IGNlbnRlcikge1xuICAgIGNvbnN0IG5ld051bSA9IG51bSAtIGJ5O1xuICAgIHJldHVybiBuZXdOdW0gPCBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG4gIH1cblxuICAvLyBudW1iZXIgaXMgbG93ZXIgdGhhbiB0aGUgY2VudGVyOyBhZGQgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGNvbnN0IG5ld051bSA9IG51bSArIGJ5O1xuICByZXR1cm4gbmV3TnVtID4gY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJvdW5kID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgaWYgKG51bSA8IHJlYWxNaW4pIHJldHVybiByZWFsTWluO1xuICBpZiAobnVtID4gcmVhbE1heCkgcmV0dXJuIHJlYWxNYXg7XG4gIHJldHVybiBudW07XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBpbmNsdXNpdmUgPSB0cnVlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICByZXR1cm4gaW5jbHVzaXZlID8gKG51bSA+PSByZWFsTWluICYmIG51bSA8PSByZWFsTWF4KSA6IChudW0gPiByZWFsTWluICYmIG51bSA8IHJlYWxNYXgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpZmZlcmVuY2UgPSAobjogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5hYnMobiAtIG0pO1xuIiwiaW1wb3J0IE1hc3MgZnJvbSBcIi4vTWFzc1wiO1xuaW1wb3J0IHsgYmV0d2VlbiwgZGlmZmVyZW5jZSB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xuXG5leHBvcnQgY29uc3QgR1JBVklUWV9YID0gMDsgLy8gcHgvZnJeMlxuZXhwb3J0IGNvbnN0IEdSQVZJVFlfWSA9IDE7IC8vIHB4L2ZyXjJcbmV4cG9ydCBjb25zdCBBSVJfUkVTSVNUQU5DRSA9IDAuMjU7IC8vIFRPRE9cbmV4cG9ydCBjb25zdCBGUklDVElPTiA9IDAuMjU7IC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIGRlcGVuZGVudCBvbiBtYXNzXG5leHBvcnQgY29uc3QgTk9STUFMX0RSQUcgPSAxMDA7IC8vIHN1cmZhY2UgYXJlYSBpbiBwaXhlbHMsIHBlciBraWxvZ3JhbVxuXG5pbnRlcmZhY2UgUG9pbnQge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE92ZXJsYXAge1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIGxlZnQ6IG51bWJlcjtcbiAgcmlnaHQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE92ZXJsYXBzIHtcbiAgc29saWQ6IE92ZXJsYXA7XG4gIGVwaGVtZXJhbDogT3ZlcmxhcDtcbn1cblxuY2xhc3MgVW5pdmVyc2Uge1xuICBwdWJsaWMgbWFzc2VzID0gW10gYXMgTWFzc1tdO1xuXG4gIGNvbGxpc2lvbnNGb3JNb3ZlKHN1YmplY3Q6IE1hc3MsIHRvUG9zaXRpb246IFBvaW50KTogT3ZlcmxhcHMge1xuICAgIGNvbnN0IG1vdmVkU3ViamVjdCA9IG5ldyBNYXNzKHtcbiAgICAgIC4uLnN1YmplY3QsXG4gICAgICAuLi50b1Bvc2l0aW9uLFxuICAgICAgZGFya01hdHRlcjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGR4ID0gbW92ZWRTdWJqZWN0LnggLSBzdWJqZWN0Lng7XG4gICAgY29uc3QgZHkgPSBtb3ZlZFN1YmplY3QueSAtIHN1YmplY3QueTtcbiAgICBjb25zdCBtb3ZpbmcgPSB7XG4gICAgICB1cDogZHkgPCAwLFxuICAgICAgZG93bjogZHkgPiAwLFxuICAgICAgbGVmdDogZHggPCAwLFxuICAgICAgcmlnaHQ6IGR4ID4gMCxcbiAgICB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICByZXR1cm4gdGhpcy5tYXNzZXMucmVkdWNlKChvdmVybGFwcywgb2JzdGFjbGUpID0+IHtcbiAgICAgIGlmIChvYnN0YWNsZSA9PT0gc3ViamVjdCkgcmV0dXJuIG92ZXJsYXBzO1xuXG4gICAgICBjb25zdCBoaXR0aW5nT2JzdGFjbGUgPSBtb3ZlZFN1YmplY3QuaXNIaXR0aW5nKG9ic3RhY2xlKTtcbiAgICAgIGlmICghaGl0dGluZ09ic3RhY2xlKSByZXR1cm4gb3ZlcmxhcHM7XG5cbiAgICAgIGNvbnN0IG92ZXJsYXAgPSBvYnN0YWNsZS5zb2xpZCA/IG92ZXJsYXBzLnNvbGlkIDogb3ZlcmxhcHMuZXBoZW1lcmFsO1xuICAgICAgaWYgKG1vdmluZy51cCAmJiBiZXR3ZWVuKG9ic3RhY2xlLmJvdHRvbSwgc3ViamVjdC50b3AsIG1vdmVkU3ViamVjdC50b3ApKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS5ib3R0b20sIG1vdmVkU3ViamVjdC50b3ApO1xuICAgICAgICBpZiAob3ZlcmxhcC50b3AgPCBkaXN0YW5jZSkgb3ZlcmxhcC50b3AgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdmluZy5kb3duICYmIGJldHdlZW4ob2JzdGFjbGUudG9wLCBzdWJqZWN0LmJvdHRvbSwgbW92ZWRTdWJqZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaWZmZXJlbmNlKG9ic3RhY2xlLnRvcCwgbW92ZWRTdWJqZWN0LmJvdHRvbSk7XG4gICAgICAgIGlmIChvdmVybGFwLmJvdHRvbSA8IGRpc3RhbmNlKSBvdmVybGFwLmJvdHRvbSA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICBpZiAobW92aW5nLmxlZnQgJiYgYmV0d2VlbihvYnN0YWNsZS5yaWdodCwgc3ViamVjdC5sZWZ0LCBtb3ZlZFN1YmplY3QubGVmdCkpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaWZmZXJlbmNlKG9ic3RhY2xlLnJpZ2h0LCBtb3ZlZFN1YmplY3QubGVmdCk7XG4gICAgICAgIGlmIChvdmVybGFwLmxlZnQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5sZWZ0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb3ZpbmcucmlnaHQgJiYgYmV0d2VlbihvYnN0YWNsZS5sZWZ0LCBzdWJqZWN0LnJpZ2h0LCBtb3ZlZFN1YmplY3QucmlnaHQpKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS5sZWZ0LCBtb3ZlZFN1YmplY3QucmlnaHQpO1xuICAgICAgICBpZiAob3ZlcmxhcC5yaWdodCA8IGRpc3RhbmNlKSBvdmVybGFwLnJpZ2h0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdmVybGFwcztcbiAgICB9LCB7XG4gICAgICBzb2xpZDoge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICB9LFxuICAgICAgZXBoZW1lcmFsOiB7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICB9XG5cbiAgb3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdDogTWFzcywgeyBpZ25vcmUgPSBbXSB9OiB7IGlnbm9yZT86IE1hc3NbXSB9ID0ge30pOiBNYXNzW10ge1xuICAgIHJldHVybiB0aGlzLm1hc3Nlcy5maWx0ZXIoKG1hc3MpID0+IHtcbiAgICAgIGlmIChzdWJqZWN0ID09PSBtYXNzIHx8IGlnbm9yZS5pbmNsdWRlcyhtYXNzKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHN1YmplY3QuaXNIaXR0aW5nKG1hc3MpO1xuICAgIH0pO1xuICB9XG5cbiAgb3ZlcmxhcChzdWJqZWN0OiBNYXNzLCB7IGlnbm9yZSA9IFtdIH06IHsgaWdub3JlPzogTWFzc1tdIH0gPSB7fSk6IE92ZXJsYXAge1xuICAgIGNvbnN0IG1hc3NlcyA9IHRoaXMub3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdCwgeyBpZ25vcmUgfSk7XG4gICAgLyoqXG4gICAgICogLC0tLS0sXG4gICAgICogfCAgICB8IDw9IHN1YmplY3RcbiAgICAgKiAnLS0tLSdcbiAgICAgKiAuLi4uLi5cbiAgICAgKiA6ICAgIDogPD0gbWFzc1xuICAgICAqIGBgYGBgYFxuICAgICAqL1xuICAgIHJldHVybiBtYXNzZXMucmVkdWNlKChtZW1vOiBPdmVybGFwLCBtYXNzKSA9PiB7XG4gICAgICBjb25zdCBvdmVybGFwID0gbWVtbztcblxuICAgICAgLyoqXG4gICAgICAgKiAsLS0tLSwgICAgLC0tLS0sICAgICwtLi0tLC4uICAgICwtLS0tLCAgICAsLS0tLSwgIC4uLC0tLi0sICAgICwtLS0tLCAgICAgICwtLS0tLCAgICAuLiwtLS0tLC4uXG4gICAgICAgKiB8ICAgIHwgICAgfCAuLi58Li4gIHwgOiAgfCA6ICAgIHwgICAgfCAgLi58Li4uIHwgIDogfCAgOiB8ICAgIHwgICAgfCAgICAuLnwuLi4ufC4uICA6IHwgICAgfCA6XG4gICAgICAgKiAnLS4tLScuLiAgJy06LS0nIDogICctLS0tJ2BgICAuLictLS4tJyAgOiAnLS06LScgIGBgJy0tLS0nICAuLictLS0tJy4uICA6ICctLS0tJyA6ICBgYCctLS0tJ2BgXG4gICAgICAgKiAgIDogICAgOiAgICBgYGBgYGAgICAgICAgICAgICA6ICAgIDogICAgYGBgYGBgICAgICAgICAgICAgICA6ICAgICAgICA6ICBgYGBgYGBgYGBgXG4gICAgICAgKiAgIGBgYGBgYCAgICAgICAgICAgICAgICAgICAgICBgYGBgYGAgICAgICAgICAgICAgICAgICAgICAgICBgYGBgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NUb3BPdmVybGFwID0gbWFzcy50b3AgPj0gc3ViamVjdC50b3AgJiYgbWFzcy50b3AgPD0gc3ViamVjdC5ib3R0b207XG4gICAgICBpZiAobWFzc1RvcE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBzdWJqZWN0LmJvdHRvbSAtIG1hc3MudG9wO1xuICAgICAgICBpZiAob3ZlcmxhcC5ib3R0b20gPCBkaXN0YW5jZSkgb3ZlcmxhcC5ib3R0b20gPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAuLi4uLi4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLi4uLiAgICAgICAgICAgICAgICAgICAgIC4uLi4uLi4uLi5cbiAgICAgICAqIDogICAgOiAgICAuLi4uLi4gICAgICAgICAgICAgICAgOiAgICA6ICAgLi4uLi4uICAgICAgICAgICAgOiAgICAgICAgOiAgLi4uLi4uLi4uLlxuICAgICAgICogYGAsLS0tLSwgIDogLC0tOi0sICAuLiwtLS0tLCAgLC1gLS0sYGAgLC06LS0sIDogICwtLS0tLC4uICBgYCwtLS0tLGBgICA6ICwtLS0tLCA6ICAuLiwtLS0tLC4uXG4gICAgICAgKiAgIHwgICAgfCAgYGB8YGBgIHwgIDogfCAgOiB8ICB8ICAgIHwgICB8IGBgYHxgYCAgfCA6ICB8IDogICAgfCAgICB8ICAgIGBgfGBgYGB8YGAgIDogfCAgICB8IDpcbiAgICAgICAqICAgJy0tLS0nICAgICctLS0tJyAgYGAnLS1gLScgICctLS0tJyAgICctLS0tJyAgICAnLWAtLSdgYCAgICAnLS0tLScgICAgICAnLS0tLScgICAgYGAnLS0tLSdgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzQm90dG9tT3ZlcmxhcCA9IG1hc3MuYm90dG9tIDw9IHN1YmplY3QuYm90dG9tICYmIG1hc3MuYm90dG9tID49IHN1YmplY3QudG9wO1xuICAgICAgaWYgKG1hc3NCb3R0b21PdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbWFzcy5ib3R0b20gLSBzdWJqZWN0LnRvcDtcbiAgICAgICAgaWYgKG92ZXJsYXAudG9wIDwgZGlzdGFuY2UpIG92ZXJsYXAudG9wID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHxgYGBgYFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLi06LS0uIDpcbiAgICAgICAqIHwgYGBgfGBgXG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8YGBgYHxcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8ICAgIHwuLi4uLlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwgLi4ufC4uXG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfC4uLi58XG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHwgICAgOlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLC06LS0sIDpcbiAgICAgICAqIHwgOiAgfCA6XG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8ICAgIHxcbiAgICAgICAqIDotLS0tOlxuICAgICAgICogYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NMZWZ0T3ZlcmxhcCA9IG1hc3MubGVmdCA+PSBzdWJqZWN0LmxlZnQgJiYgbWFzcy5sZWZ0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc0xlZnRPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ViamVjdC5yaWdodCAtIG1hc3MubGVmdDtcbiAgICAgICAgaWYgKG92ZXJsYXAucmlnaHQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5yaWdodCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOiAgICA6LS0tLSxcbiAgICAgICAqIGBgYGBgfCAgICB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgLi4uLi4uXG4gICAgICAgKiAgICA6ICwtLTotLFxuICAgICAgICogICAgYGB8YGBgIHxcbiAgICAgICAqICAgICAgJy0tLS0nXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgfGBgYGB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqIC4uLi4ufCAgICB8XG4gICAgICAgKiA6ICAgIDotLS0tJ1xuICAgICAgICogYGBgYGBgXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogICAgLi58Li4uIHxcbiAgICAgICAqICAgIDogJy0tOi0nXG4gICAgICAgKiAgICBgYGBgYGBcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAgICAgIHwuLi4ufFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgLi4uLi4uXG4gICAgICAgKiAgOiAgICAsLS0tLSxcbiAgICAgICAqICA6ICAgIHwgICAgfFxuICAgICAgICogIDogICAgJy0tLS0nXG4gICAgICAgKiAgYGBgYGBgXG4gICAgICAgKiAgICAuLi4uLi5cbiAgICAgICAqICAgIDogLC0tOi0sXG4gICAgICAgKiAgICA6IHwgIDogfFxuICAgICAgICogICAgOiAnLS06LSdcbiAgICAgICAqICAgIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIHwgICAgfFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NSaWdodE92ZXJsYXAgPSBtYXNzLnJpZ2h0ID49IHN1YmplY3QubGVmdCAmJiBtYXNzLnJpZ2h0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc1JpZ2h0T3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG1hc3MucmlnaHQgLSBzdWJqZWN0LmxlZnQ7XG4gICAgICAgIGlmIChvdmVybGFwLmxlZnQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5sZWZ0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEknbSBtaXNzaW5nIHRvdGFsIG92ZXJsYXBzIGFuZCB0b3RhbCBlY2xpcHNlcyBidXQgSSBkb24ndCBnaXZlIGEgc2hpdFxuICAgICAgcmV0dXJuIG92ZXJsYXA7XG4gICAgfSwge1xuICAgICAgdG9wOiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICBib3R0b206IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHVuaXZlcnNlID0gbmV3IFVuaXZlcnNlKCk7XG5leHBvcnQgZGVmYXVsdCB1bml2ZXJzZTtcbiIsImltcG9ydCB1bml2ZXJzZSwgeyBHUkFWSVRZX1gsIEdSQVZJVFlfWSwgRlJJQ1RJT04sIE5PUk1BTF9EUkFHIH0gZnJvbSBcIi4vdW5pdmVyc2VcIjtcbmltcG9ydCB7IGRhbXBlbiwgYm91bmQgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuY29uc3QgdXBkYXRlRGltZW5zaW9uID0gKFxuICBwb3NpdGlvbjogbnVtYmVyLFxuICB2ZWxvY2l0eTogbnVtYmVyLFxuICBhY2NlbGVyYXRpb246IG51bWJlcixcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyLFxuKTogeyBwb3NpdGlvbjogbnVtYmVyOyB2ZWxvY2l0eTogbnVtYmVyIH0gPT4ge1xuICBsZXQgbmV3UG9zaXRpb24gPSBwb3NpdGlvbiArIHZlbG9jaXR5O1xuICBsZXQgbmV3VmVsb2NpdHkgPSB2ZWxvY2l0eSArIGFjY2VsZXJhdGlvbjtcbiAgaWYgKG5ld1Bvc2l0aW9uID4gbWF4KSB7XG4gICAgbmV3UG9zaXRpb24gPSBtYXg7XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9IGVsc2UgaWYgKG5ld1Bvc2l0aW9uIDwgbWluKSB7XG4gICAgbmV3UG9zaXRpb24gPSBtaW47XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogbmV3UG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IG5ld1ZlbG9jaXR5LFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFzcyB7XG4gIHB1YmxpYyBtYXNzID0gMTsgLy8ga2dcbiAgcHVibGljIHggPSAwOyAvLyBweFxuICBwdWJsaWMgeSA9IDA7IC8vIHB4XG4gIHB1YmxpYyBkeCA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyBkeSA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyB3aWR0aCA9IDI1OyAvLyBweFxuICBwdWJsaWMgaGVpZ2h0ID0gMjU7IC8vIHB4XG4gIHB1YmxpYyBzdGF0aW9uYXJ5ID0gZmFsc2U7IC8vIGRvZXNuJ3QgbW92ZVxuICBwdWJsaWMgZGFya01hdHRlciA9IGZhbHNlOyAvLyBkb2Vzbid0IGludGVyYWN0XG4gIHB1YmxpYyBzb2xpZCA9IHRydWU7IC8vIGNhbid0IHBhc3MgdGhyb3VnaCBpdFxuICBwdWJsaWMgY29sbGVjdE9uVG91Y2ggPSBmYWxzZTtcbiAgcHVibGljIHRvdWNoZWRBdCA9IG51bGwgYXMgbnVsbHxudW1iZXI7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IFBhcnRpYWw8TWFzcz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghdGhpcy5kYXJrTWF0dGVyKSB1bml2ZXJzZS5tYXNzZXMucHVzaCh0aGlzKTtcbiAgfVxuXG4gIGdldCBkcmFnQ29lZmZpY2llbnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzdXJmYWNlQXJlYSA9ICgyICogdGhpcy53aWR0aCkgKyAoMiAqIHRoaXMuaGVpZ2h0KTtcbiAgICByZXR1cm4gKHN1cmZhY2VBcmVhIC8gdGhpcy5tYXNzKSAvIE5PUk1BTF9EUkFHO1xuICB9XG5cbiAgZ2V0IGF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnN0YXRpb25hcnkgPyAwIDogR1JBVklUWV9YOyB9XG4gIGdldCBheSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zdGF0aW9uYXJ5ID8gMCA6IEdSQVZJVFlfWTsgfVxuXG4gIGdldCBpc0FnYWluc3RUb3BXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSAwOyB9XG4gIGdldCBpc0FnYWluc3RCb3R0b21XYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmhlaWdodDsgfVxuICBnZXQgaXNBZ2FpbnN0TGVmdFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnggPT09IDA7IH1cbiAgZ2V0IGlzQWdhaW5zdFJpZ2h0V2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueCA9PT0gd2luZG93LmlubmVyV2lkdGggLSB0aGlzLndpZHRoOyB9XG5cbiAgZ2V0IHRlcm1pbmFsVmVsb2NpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMjA7IC8vIFRPRE86IHNob3VsZCBiZSBiYXNlZCBvbiBkcmFnXG4gIH1cblxuICBnZXQgdG9wKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnk7IH1cbiAgZ2V0IHJpZ2h0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnggKyB0aGlzLndpZHRoOyB9XG4gIGdldCBib3R0b20oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0OyB9XG4gIGdldCBsZWZ0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLng7IH1cblxuICB1cGRhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgbmV3WERhdGEgPSB1cGRhdGVEaW1lbnNpb24odGhpcy54LCB0aGlzLmR4LCB0aGlzLmF4LCB0aGlzLndpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMud2lkdGgpO1xuICAgIGNvbnN0IG5ld1lEYXRhID0gdXBkYXRlRGltZW5zaW9uKHRoaXMueSwgdGhpcy5keSwgdGhpcy5heSwgdGhpcy5oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuaGVpZ2h0KTtcblxuICAgIGxldCBuZXdYID0gbmV3WERhdGEucG9zaXRpb247XG4gICAgbGV0IG5ld1kgPSBuZXdZRGF0YS5wb3NpdGlvbjtcbiAgICBsZXQgbmV3RHggPSBuZXdYRGF0YS52ZWxvY2l0eTtcbiAgICBsZXQgbmV3RHkgPSBuZXdZRGF0YS52ZWxvY2l0eTtcblxuICAgIGNvbnN0IG92ZXJsYXBzID0gdW5pdmVyc2UuY29sbGlzaW9uc0Zvck1vdmUodGhpcywgeyB4OiBuZXdYLCB5OiBuZXdZIH0pO1xuICAgIGNvbnN0IHNvbGlkT3ZlcmxhcCA9IG92ZXJsYXBzLnNvbGlkO1xuXG4gICAgaWYgKHNvbGlkT3ZlcmxhcC5yaWdodCA+IDApIHtcbiAgICAgIG5ld1ggLT0gc29saWRPdmVybGFwLnJpZ2h0O1xuICAgICAgbmV3RHggPSAwO1xuICAgIH0gZWxzZSBpZiAoc29saWRPdmVybGFwLmxlZnQgPiAwKSB7XG4gICAgICBuZXdYICs9IHNvbGlkT3ZlcmxhcC5sZWZ0O1xuICAgICAgbmV3RHggPSAwO1xuICAgIH1cblxuICAgIGlmIChzb2xpZE92ZXJsYXAuYm90dG9tID4gMCkge1xuICAgICAgbmV3WSAtPSBzb2xpZE92ZXJsYXAuYm90dG9tO1xuICAgICAgbmV3RHkgPSAwO1xuICAgIH0gZWxzZSBpZiAoc29saWRPdmVybGFwLnRvcCA+IDApIHtcbiAgICAgIG5ld1kgKz0gc29saWRPdmVybGFwLnRvcDtcbiAgICAgIG5ld0R5ID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnggPSBuZXdYO1xuICAgIHRoaXMueSA9IG5ld1k7XG5cbiAgICBpZiAodGhpcy5pc0FnYWluc3RUb3BXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0Qm90dG9tV2FsbCB8fCBzb2xpZE92ZXJsYXAudG9wIHx8IHNvbGlkT3ZlcmxhcC5ib3R0b20pIHtcbiAgICAgIG5ld0R4ID0gZGFtcGVuKG5ld0R4LCBGUklDVElPTik7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzQWdhaW5zdExlZnRXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0UmlnaHRXYWxsIHx8IHNvbGlkT3ZlcmxhcC5sZWZ0IHx8IHNvbGlkT3ZlcmxhcC5yaWdodCkge1xuICAgICAgbmV3RHkgPSBkYW1wZW4obmV3RHksIEZSSUNUSU9OKTtcbiAgICB9XG5cbiAgICB0aGlzLmR4ID0gYm91bmQobmV3RHgsIC0xICogdGhpcy50ZXJtaW5hbFZlbG9jaXR5LCB0aGlzLnRlcm1pbmFsVmVsb2NpdHkpO1xuICAgIHRoaXMuZHkgPSBib3VuZChuZXdEeSwgLTEgKiB0aGlzLnRlcm1pbmFsVmVsb2NpdHksIHRoaXMudGVybWluYWxWZWxvY2l0eSk7XG4gIH1cblxuICBpc0hpdHRpbmcobWFzczogTWFzcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnJpZ2h0ID49IG1hc3MubGVmdFxuICAgICAgJiYgdGhpcy5sZWZ0IDw9IG1hc3MucmlnaHRcbiAgICAgICYmIHRoaXMuYm90dG9tID49IG1hc3MudG9wXG4gICAgICAmJiB0aGlzLnRvcCA8PSBtYXNzLmJvdHRvbVxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHB1YmxpYyB4ID0gMDtcbiAgcHVibGljIHkgPSAwO1xuICBwdWJsaWMgcHJlc3NlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMueCA9IGV2ZW50Lng7XG4gICAgdGhpcy55ID0gZXZlbnQueTtcbiAgICB0aGlzLnByZXNzZWQgPSBldmVudC5idXR0b25zID09PSAxO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdG91Y2hlcyB9ID0gZXZlbnQ7XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaGVzWzBdO1xuICAgICAgdGhpcy54ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHRoaXMueSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBtb3VzZSA9IG5ldyBNb3VzZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3VzZTtcbiIsImltcG9ydCB7IHJhbmQsIGJvdW5kIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXIge1xuICBwdWJsaWMgeDogbnVtYmVyO1xuICBwdWJsaWMgeTogbnVtYmVyO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyO1xuICBwdWJsaWMgYnJpZ2h0bmVzczogbnVtYmVyO1xuICBwdWJsaWMgdmVjdG9yOiByZWFkb25seSBbbnVtYmVyLCBudW1iZXJdO1xuXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB7IHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9OiBQYXJ0aWFsPFN0YXI+ID0ge30pIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5zaXplID0gc2l6ZSB8fCByYW5kKDEsIDUpO1xuICAgIGNvbnN0IGJhc2VCcmlnaHRuZXNzID0gKHR5cGVvZiBicmlnaHRuZXNzID09PSAndW5kZWZpbmVkJyA/IE1hdGgucmFuZG9tKCkgOiBicmlnaHRuZXNzKTtcbiAgICB0aGlzLmJyaWdodG5lc3MgPSBib3VuZChiYXNlQnJpZ2h0bmVzcywgMCwgMSk7XG4gICAgdGhpcy52ZWN0b3IgPSB2ZWN0b3IgfHwgWy0xLCAxXTtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cblxuaW1wb3J0IHsgY3R4IH0gZnJvbSAnLi9jYW52YXMnO1xuaW1wb3J0IGdhbWVMb29wIGZyb20gJy4vZ2FtZUxvb3AnO1xuaW1wb3J0IE1hc3MgZnJvbSAnLi9NYXNzJztcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9QbGF5ZXInO1xuaW1wb3J0IHsgcmFuZ2UsIHJhbmQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5pbXBvcnQgU3RhciBmcm9tICcuL1N0YXInO1xuXG5jb25zdCBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FID0gMjAwO1xuY29uc3QgTUFYX1ggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbmNvbnN0IE1BWF9ZID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG5cbmNvbnN0IHNvbGlkTWFzc2VzID0gcmFuZ2UoMTApLm1hcCgoKSA9PiB7XG4gIHJldHVybiBuZXcgTWFzcyh7XG4gICAgeDogcmFuZCgwLCBNQVhfWCksXG4gICAgeTogcmFuZCgwLCBNQVhfWSksXG4gICAgd2lkdGg6IHJhbmQoNTAsIDE1MCksXG4gICAgaGVpZ2h0OiByYW5kKDUwLCAxNTApLFxuICAgIHN0YXRpb25hcnk6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IGNvbGxlY3RpYmxlcyA9IHJhbmdlKDEwKS5tYXAoKCkgPT4ge1xuICByZXR1cm4gbmV3IE1hc3Moe1xuICAgIG1hc3M6IHJhbmQoMC41LCA1KSxcbiAgICB4OiByYW5kKDAsIE1BWF9YKSxcbiAgICB5OiByYW5kKDAsIE1BWF9ZKSxcbiAgICB3aWR0aDogMjUsXG4gICAgaGVpZ2h0OiAyNSxcbiAgICBzb2xpZDogZmFsc2UsXG4gICAgc3RhdGlvbmFyeTogTWF0aC5yYW5kb20oKSA+IDAuNSxcbiAgICBjb2xsZWN0T25Ub3VjaDogdHJ1ZSxcbiAgfSk7XG59KTtcblxuY29uc3QgbWFzc2VzID0gWy4uLnNvbGlkTWFzc2VzLCAuLi5jb2xsZWN0aWJsZXNdO1xuY29uc3QgZnJlZU1hc3NlcyA9IFtwbGF5ZXIsIC4uLm1hc3Nlcy5maWx0ZXIobWFzcyA9PiAhbWFzcy5zdGF0aW9uYXJ5KV07XG5sZXQgcG9pbnRzID0gMDtcbmNvbnN0IG1heFBvaW50cyA9IGNvbGxlY3RpYmxlcy5sZW5ndGg7XG5cbmNvbnN0IHN0YXJzID0gcmFuZ2UoMTAwLCAoKSA9PiBuZXcgU3RhcihyYW5kKDAsIE1BWF9YKSwgcmFuZCgwLCBNQVhfWSkpKTtcblxuY29uc3Qgc2hvb3RpbmdTdGFycyA9IFtdIGFzIFN0YXJbXTtcbnNldEludGVydmFsKCgpID0+IHtcbiAgY29uc3QgW3gsIHldID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IFtyYW5kKDI1MCwgTUFYX1gpLCAwXSA6IFtNQVhfWCwgcmFuZCgwLCBNQVhfWSAtIDI1MCldO1xuICBjb25zdCB2ZWN0b3IgPSBbLTEwLCAxMF0gYXMgY29uc3Q7XG4gIHNob290aW5nU3RhcnMucHVzaChuZXcgU3Rhcih4LCB5LCB7IHNpemU6IDUsIGJyaWdodG5lc3M6IDEsIHZlY3RvciB9KSk7XG59LCAyMDAwKTtcblxuZ2FtZUxvb3AoY3R4LCAobG9vcENvdW50KSA9PiB7XG4gIC8vIHN0YXJzLmZvckVhY2goKHsgeCwgeSwgc2l6ZSwgYnJpZ2h0bmVzcyB9LCBpbmRleCkgPT4ge1xuICAvLyAgIGNvbnN0IHR3aW5rbGUgPSBicmlnaHRuZXNzIC0gTWF0aC5yYW5kb20oKTtcbiAgLy8gICBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDI1NSwgJHsobG9vcENvdW50ICsgaW5kZXgpICUgMjAgPT09IDAgPyB0d2lua2xlIDogYnJpZ2h0bmVzc30pYDtcbiAgLy8gICBjdHguZmlsbFJlY3QoeCwgeSwgc2l6ZSwgc2l6ZSk7XG4gIC8vIH0pO1xuICBzdGFycy5mb3JFYWNoKChzdGFyLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHsgeCwgeSwgc2l6ZSwgYnJpZ2h0bmVzcywgdmVjdG9yIH0gPSBzdGFyO1xuICAgIGNvbnN0IHR3aW5rbGUgPSBicmlnaHRuZXNzIC0gTWF0aC5yYW5kb20oKTtcbiAgICBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDI1NSwgJHsobG9vcENvdW50ICsgaW5kZXgpICUgMjAgPT09IDAgPyB0d2lua2xlIDogYnJpZ2h0bmVzc30pYDtcbiAgICBjdHguZmlsbFJlY3QoeCwgeSwgc2l6ZSwgc2l6ZSk7XG4gICAgLy8gaWYgKGxvb3BDb3VudCAlIDEwID09PSAwKSB7XG4gICAgc3Rhci54ICs9IHZlY3RvclswXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHN0YXIueSArPSB2ZWN0b3JbMV07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAvLyB9XG4gICAgaWYgKHN0YXIueCA8IDAgfHwgc3Rhci54ID4gTUFYX1ggfHwgc3Rhci55IDwgMCB8fCBzdGFyLnkgPiBNQVhfWSkge1xuICAgICAgY29uc3QgW25ld1gsIG5ld1ldID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IFtyYW5kKDAsIE1BWF9YKSwgMF0gOiBbTUFYX1gsIHJhbmQoMCwgTUFYX1kpXTtcbiAgICAgIHN0YXIueCA9IG5ld1g7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIHN0YXIueSA9IG5ld1k7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB9XG4gIH0pO1xuXG4gIHNob290aW5nU3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IHgsIHksIHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9ID0gc3RhcjtcbiAgICBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDI1NSwgJHticmlnaHRuZXNzfSlgO1xuICAgIGN0eC5maWxsUmVjdCh4LCB5LCBzaXplLCBzaXplKTtcbiAgICBzdGFyLnggKz0gdmVjdG9yWzBdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgc3Rhci55ICs9IHZlY3RvclsxXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGlmIChzdGFyLnggPCAwIHx8IHN0YXIueCA+IE1BWF9YIHx8IHN0YXIueSA8IDAgfHwgc3Rhci55ID4gTUFYX1kpIHtcbiAgICAgIHNob290aW5nU3RhcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1hc3Nlcy5mb3JFYWNoKChtYXNzLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGhpdHRpbmdNYXNzID0gcGxheWVyLmlzSGl0dGluZyhtYXNzKTtcbiAgICBsZXQgc3RpbGxQcmVzZW50ID0gdHJ1ZTtcblxuICAgIGlmIChtYXNzLnNvbGlkKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjcpJztcbiAgICB9IGVsc2UgaWYgKGhpdHRpbmdNYXNzICYmICFtYXNzLnRvdWNoZWRBdCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDI1NSwgMC44KSc7XG4gICAgICBtYXNzLnRvdWNoZWRBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgfSBlbHNlIGlmIChtYXNzLmNvbGxlY3RPblRvdWNoICYmIG1hc3MudG91Y2hlZEF0KSB7XG4gICAgICBjb25zdCBtc1NpbmNlVG91Y2ggPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIG1hc3MudG91Y2hlZEF0O1xuICAgICAgaWYgKG1zU2luY2VUb3VjaCA+IEVQSEVNRVJBTF9ESVNBUFBFQVJBTkNFX1RJTUUpIHtcbiAgICAgICAgbWFzc2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHN0aWxsUHJlc2VudCA9IGZhbHNlO1xuICAgICAgICBwb2ludHMgKz0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJnVmFsdWUgPSBNYXRoLmNlaWwoKG1zU2luY2VUb3VjaCAvIEVQSEVNRVJBTF9ESVNBUFBFQVJBTkNFX1RJTUUpICogMjU1KTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKCR7cmdWYWx1ZX0sICR7cmdWYWx1ZX0sIDI1NSwgMC44KWA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAxMDAsIDI1NSwgMC44KSc7XG4gICAgfVxuXG4gICAgaWYgKHN0aWxsUHJlc2VudCkgY3R4LmZpbGxSZWN0KG1hc3MueCwgbWFzcy55LCBtYXNzLndpZHRoLCBtYXNzLmhlaWdodCk7XG4gIH0pO1xuXG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAxNTAsIDAsIDEpJztcbiAgY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLndpZHRoLCBwbGF5ZXIuaGVpZ2h0KTtcblxuICBjb25zdCBmYWNlbWFza0NvbG9yID0gJ3JnYmEoMjIwLCAyMjAsIDI1NSwgMSknO1xuICBjb25zdCBmYWNlbWFza1dpZHRoID0gcGxheWVyLndpZHRoIC8gMjtcbiAgY29uc3QgZmFjZW1hc2tIZWlnaHQgPSBwbGF5ZXIuaGVpZ2h0IC8gNTtcbiAgY29uc3QgZmFjZW1hc2tPZmZzZXRZID0gMztcbiAgY3R4LmZpbGxTdHlsZSA9IGZhY2VtYXNrQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArIChwbGF5ZXIud2lkdGggLSBmYWNlbWFza1dpZHRoKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gICAgY2FzZSAncmlnaHQnOiBjdHguZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArICgocGxheWVyLndpZHRoIC0gZmFjZW1hc2tXaWR0aCkgLyAyKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gIH1cblxuICBjb25zdCBidXJuZXJDb2xvciA9IGByZ2JhKDI1NSwgMTAwLCAwLCAke3JhbmQoMC41LCAwLjc1KX0pYDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWCA9IHJhbmQoMC4yNSwgMC40KSAqIHBsYXllci53aWR0aDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWSA9IHJhbmQoMC40LCAwLjYpICogcGxheWVyLmhlaWdodDtcbiAgY29uc3QgYnVybmVyQWNyb3NzID0gKHdpZHRoOiBudW1iZXIpOiBudW1iZXIgPT4gMC42ICogd2lkdGg7XG4gIGNvbnN0IGJ1cm5lckFjcm9zc09mZnNldCA9ICh3aWR0aDogbnVtYmVyKTogbnVtYmVyID0+ICh3aWR0aCAtIGJ1cm5lckFjcm9zcyh3aWR0aCkpIC8gMjtcblxuICBjdHguZmlsbFN0eWxlID0gYnVybmVyQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54IC0gYnVybmVyTGVuZ3RoWCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBjYXNlICdyaWdodCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgcGxheWVyLndpZHRoLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuICBzd2l0Y2ggKHBsYXllci5idXJuZXJZU2lkZSkge1xuICAgIGNhc2UgJ2JvdHRvbSc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci53aWR0aCksIC8vIGNlbnRlcmVkIG9uIHRoZSBYIGF4aXNcbiAgICAgIHBsYXllci55ICsgcGxheWVyLmhlaWdodCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgYm90dG9tIG9mIHRoZSBwbGF5ZXJcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIud2lkdGgpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFksIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgY2FzZSAndG9wJzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLndpZHRoKSwgLy8gY2VudGVyZWQgb24gdGhlIFggYXhpc1xuICAgICAgcGxheWVyLnkgLSBidXJuZXJMZW5ndGhZLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSB0b3Agb2YgdGhlIHBsYXllclxuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci53aWR0aCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWSwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuXG4gIGN0eC5mb250ID0gXCIzMHB4IENvdXJpZXJcIjtcbiAgY3R4LmZpbGxTdHlsZSA9ICcjRkZGJztcbiAgY29uc3Qgc2NvcmVUZXh0ID0gYCR7cG9pbnRzfS8ke21heFBvaW50c30ke3BvaW50cyA9PT0gbWF4UG9pbnRzID8gJyBhd3cgeWVlJyA6ICcnfWA7XG4gIGN0eC5maWxsVGV4dChzY29yZVRleHQsIDUwLCA1MCk7XG5cbiAgZnJlZU1hc3Nlcy5mb3JFYWNoKG1hc3MgPT4gbWFzcy51cGRhdGUoKSk7XG59KTtcbiIsImltcG9ydCBNYXNzIGZyb20gXCIuL01hc3NcIjtcbmltcG9ydCBtb3VzZSBmcm9tIFwiLi9tb3VzZVwiO1xuaW1wb3J0IHsgYmV0d2VlbiB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIgZXh0ZW5kcyBNYXNzIHtcbiAgcHVibGljIHdpZHRoID0gMTU7XG4gIHB1YmxpYyBoZWlnaHQgPSAyMDtcbiAgcHVibGljIGpldHBhY2tGb3JjZVggPSAwLjQ7IC8vIChrZyAqIHB4KSAvIGZyXjJcbiAgcHVibGljIGpldHBhY2tGb3JjZVkgPSAxLjM7IC8vIChrZyAqIHB4KSAvIGZyXjJcblxuICBnZXQgYnVybmluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gbW91c2UucHJlc3NlZDtcbiAgfVxuXG4gIGdldCBheEpldHBhY2soKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuYnVybmluZykgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBtb3VzZURpc3RhbmNlID0gbW91c2UueCAtIHRoaXMueDtcbiAgICBjb25zdCBsZWZ0TWFyZ2luID0gLTEgKiB0aGlzLndpZHRoO1xuICAgIGNvbnN0IHJpZ2h0TWFyZ2luID0gMiAqIHRoaXMud2lkdGg7XG4gICAgaWYgKGJldHdlZW4obW91c2VEaXN0YW5jZSwgbGVmdE1hcmdpbiwgcmlnaHRNYXJnaW4pKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGpldHBhY2tBY2NlbGVyYXRpb24gPSB0aGlzLmpldHBhY2tGb3JjZVggLyB0aGlzLm1hc3M7XG4gICAgcmV0dXJuIG1vdXNlRGlzdGFuY2UgPiAwID8gamV0cGFja0FjY2VsZXJhdGlvbiA6IC0xICogamV0cGFja0FjY2VsZXJhdGlvbjtcbiAgfVxuXG4gIGdldCBheUpldHBhY2soKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuYnVybmluZykgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBtb3VzZURpc3RhbmNlID0gbW91c2UueSAtIHRoaXMueTtcbiAgICBjb25zdCB0b3BNYXJnaW4gPSAwO1xuICAgIGNvbnN0IGJvdHRvbU1hcmdpbiA9IHRoaXMuaGVpZ2h0O1xuICAgIGlmIChtb3VzZURpc3RhbmNlID49IDAgfHwgYmV0d2Vlbihtb3VzZURpc3RhbmNlLCB0b3BNYXJnaW4sIGJvdHRvbU1hcmdpbikpIHJldHVybiAwO1xuXG4gICAgY29uc3QgamV0cGFja0FjY2VsZXJhdGlvbiA9IHRoaXMuamV0cGFja0ZvcmNlWSAvIHRoaXMubWFzcztcbiAgICByZXR1cm4gLTEgKiBqZXRwYWNrQWNjZWxlcmF0aW9uO1xuICB9XG5cbiAgZ2V0IGF4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHN1cGVyLmF4ICsgdGhpcy5heEpldHBhY2s7XG4gIH1cblxuICBnZXQgYXkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gc3VwZXIuYXkgKyB0aGlzLmF5SmV0cGFjaztcbiAgfVxuXG4gIGdldCBidXJuZXJYU2lkZSgpOiAnbGVmdCd8J25vbmUnfCdyaWdodCcge1xuICAgIGlmICh0aGlzLmF4SmV0cGFjayA9PT0gMCkgcmV0dXJuICdub25lJztcbiAgICByZXR1cm4gdGhpcy5heEpldHBhY2sgPiAwID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgfVxuXG4gIGdldCBidXJuZXJZU2lkZSgpOiAnYm90dG9tJ3wnbm9uZSd8J3RvcCcge1xuICAgIGlmICh0aGlzLmF5SmV0cGFjayA9PT0gMCkgcmV0dXJuICdub25lJztcbiAgICByZXR1cm4gdGhpcy5heUpldHBhY2sgPiAwID8gJ3RvcCcgOiAnYm90dG9tJztcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==