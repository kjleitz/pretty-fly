!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),n=()=>{s.width=window.innerWidth,s.height=window.innerHeight};n(),window.addEventListener("resize",n),document.body.appendChild(s);const r=s.getContext("2d");r||console.error("Canvas '2d' context is not supported.");const h=(t,e)=>{requestAnimationFrame(()=>h(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e()};var o=h;const a=0,l=1,c=.25,d=100;var u=new class{constructor(){this.masses=[]}overlappingMasses(t){return this.masses.filter(e=>t!==e&&t.isHitting(e))}overlap(t){return this.overlappingMasses(t).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const g=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],n=s-i;return i+Math.random()*n},p=(t,e)=>{e||(e=t,t=0);const[i,s]=t<e?[t,e]:[e,t],n=[...Array(s-i).keys()].map(t=>t+i);return e>=t?n:[s,...n.slice(1).reverse()]},y=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},f=(t,e,i)=>{const[s,n]=e<i?[e,i]:[i,e];return t<s?s:t>n?n:t},w=(t,e,i,s=!0)=>{const[n,r]=e<i?[e,i]:[i,e];return s?t>=n&&t<=r:t>n&&t<r},m=(t,e,i,s,n)=>{let r=t+e,h=e+i;return r>n?(r=n,h=0):r<s&&(r=s,h=0),{position:r,velocity:h}};class x{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,Object.assign(this,t),this.darkMatter||u.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/d}get ax(){return this.stationary?0:a}get ay(){return this.stationary?0:l}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=m(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=this.isAgainstTopWall||this.isAgainstBottomWall?c:0,i=y(t.velocity,e),s=m(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height),n=this.isAgainstLeftWall||this.isAgainstRightWall?c:0,r=y(s.velocity,n);this.x=t.position,this.dx=f(i,-1*this.terminalVelocity,this.terminalVelocity),this.y=s.position,this.dy=f(r,-1*this.terminalVelocity,this.terminalVelocity);const h=u.overlap(this);this.dy>0&&h.bottom>0?(this.y-=h.bottom,this.dy=0):this.dy<0&&h.top>0?(this.y+=h.top,this.dy=0):this.dx>0&&h.right>0?(this.x-=h.right,this.dx=0):this.dx<0&&h.left>0&&(this.x+=h.left,this.dx=0)}isHitting(t){const e=t.x,i=t.x+t.width,s=t.y,n=t.y+t.height,r=this.x,h=this.x+this.width,o=this.y,a=this.y+this.height;return h>=e&&r<=i&&a>=s&&o<=n}}var b=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};const v=new class extends x{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3}get burning(){return b.pressed}get axJetpack(){if(!this.burning)return 0;const t=b.x-this.x,e=-1*this.width,i=2*this.width;if(w(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=b.y-this.y,e=this.height;return t>=0||w(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}},k=p(10).map(()=>new x({mass:g(.5,5),x:g(0,window.innerWidth),y:g(0,window.innerHeight),width:g(50,150),height:g(50,150),stationary:!0})),E=p(100).map(()=>{const t=g(1,5);return[g(0,window.innerWidth),g(0,window.innerHeight),t,t]});o(r,()=>{E.forEach((t,e)=>{const i=(e%10+1)/10;r.fillStyle=`rgba(255, 255, 255, ${i})`,r.fillRect(...t)}),k.forEach(t=>{v.isHitting(t)?r.fillStyle="rgba(255, 0, 0, 0.2)":r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(t.x,t.y,t.width,t.height)}),r.fillStyle="rgba(0, 150, 0, 1)",r.fillRect(v.x,v.y,v.width,v.height);const t=v.width/2,e=v.height/5;switch(r.fillStyle="rgba(220, 220, 255, 1)",v.burnerXSide){case"left":r.fillRect(v.x+(v.width-t),v.y+3,t,e);break;case"right":r.fillRect(v.x,v.y+3,t,e);break;default:r.fillRect(v.x+(v.width-t)/2,v.y+3,t,e)}const i=`rgba(255, 100, 0, ${g(.5,.75)})`,s=g(.25,.4)*v.width,n=g(.4,.6)*v.height,h=t=>.6*t,o=t=>(t-h(t))/2;switch(r.fillStyle=i,v.burnerXSide){case"left":r.fillRect(v.x-s,v.y+o(v.height),s,h(v.height));break;case"right":r.fillRect(v.x+v.width,v.y+o(v.height),s,h(v.height))}switch(v.burnerYSide){case"bottom":r.fillRect(v.x+o(v.width),v.y+v.height,h(v.width),n);break;case"top":r.fillRect(v.x+o(v.width),v.y-n,h(v.width),n)}v.update()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaXZlcnNlLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsaXRpZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJHUkFWSVRZX1giLCJHUkFWSVRZX1kiLCJGUklDVElPTiIsIk5PUk1BTF9EUkFHIiwibWFzc2VzIiwic3ViamVjdCIsInRoaXMiLCJmaWx0ZXIiLCJtYXNzIiwiaXNIaXR0aW5nIiwib3ZlcmxhcHBpbmdNYXNzZXMiLCJyZWR1Y2UiLCJtZW1vIiwib3ZlcmxhcCIsInRvcCIsImJvdHRvbSIsImRpc3RhbmNlIiwibGVmdCIsInJpZ2h0IiwicmFuZCIsIm1pbiIsIm1heCIsInJlYWxNaW4iLCJyZWFsTWF4IiwiZGlmZiIsIk1hdGgiLCJyYW5kb20iLCJyYW5nZSIsImJhc2VBcnJheSIsIkFycmF5Iiwia2V5cyIsIm1hcCIsInNsaWNlIiwicmV2ZXJzZSIsImRhbXBlbiIsIm51bSIsImJ5IiwiY2VudGVyIiwibmV3TnVtIiwiYm91bmQiLCJiZXR3ZWVuIiwiaW5jbHVzaXZlIiwidXBkYXRlRGltZW5zaW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsIm5ld1Bvc2l0aW9uIiwibmV3VmVsb2NpdHkiLCJvcHRpb25zIiwieCIsInkiLCJkeCIsImR5Iiwic3RhdGlvbmFyeSIsImRhcmtNYXR0ZXIiLCJhc3NpZ24iLCJwdXNoIiwibmV3WERpbWVuc2lvbiIsImF4IiwieEZyaWN0aW9uIiwiaXNBZ2FpbnN0VG9wV2FsbCIsImlzQWdhaW5zdEJvdHRvbVdhbGwiLCJkeFdpdGhGcmljdGlvbiIsIm5ld1lEaW1lbnNpb24iLCJheSIsInlGcmljdGlvbiIsImlzQWdhaW5zdExlZnRXYWxsIiwiaXNBZ2FpbnN0UmlnaHRXYWxsIiwiZHlXaXRoRnJpY3Rpb24iLCJ0ZXJtaW5hbFZlbG9jaXR5IiwibWFzc0xlZnQiLCJtYXNzUmlnaHQiLCJtYXNzVG9wIiwibWFzc0JvdHRvbSIsInRoaXNMZWZ0IiwidGhpc1JpZ2h0IiwidGhpc1RvcCIsInRoaXNCb3R0b20iLCJwcmVzc2VkIiwiZXZlbnQiLCJwb3B1bGF0ZUZyb21Nb3VzZUV2ZW50IiwicG9wdWxhdGVGcm9tVG91Y2hFdmVudCIsImJ1dHRvbnMiLCJ0b3VjaGVzIiwibGVuZ3RoIiwidG91Y2giLCJjbGllbnRYIiwiY2xpZW50WSIsInBsYXllciIsImpldHBhY2tGb3JjZVgiLCJqZXRwYWNrRm9yY2VZIiwiYnVybmluZyIsIm1vdXNlRGlzdGFuY2UiLCJsZWZ0TWFyZ2luIiwicmlnaHRNYXJnaW4iLCJqZXRwYWNrQWNjZWxlcmF0aW9uIiwiYm90dG9tTWFyZ2luIiwic3VwZXIiLCJheEpldHBhY2siLCJheUpldHBhY2siLCJzdGFycyIsInNpemUiLCJmb3JFYWNoIiwicmVjdE9wdGlvbnMiLCJpbmRleCIsIm9wYWNpdHkiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZhY2VtYXNrV2lkdGgiLCJmYWNlbWFza0hlaWdodCIsImJ1cm5lclhTaWRlIiwiYnVybmVyQ29sb3IiLCJidXJuZXJMZW5ndGhYIiwiYnVybmVyTGVuZ3RoWSIsImJ1cm5lckFjcm9zcyIsImJ1cm5lckFjcm9zc09mZnNldCIsImJ1cm5lcllTaWRlIiwidXBkYXRlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxD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QUkrRCxFQUNYQyxFQUFhMUIsRUFBT3hHLE9BQ3BCaUksR0FLSnpCLEVBQU82QiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG5jb25zdCBzdHJldGNoQ2FudmFzID0gKCk6IHZvaWQgPT4ge1xuICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbn07XG5cbnN0cmV0Y2hDYW52YXMoKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzdHJldGNoQ2FudmFzKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuaWYgKCFjdHgpIGNvbnNvbGUuZXJyb3IoXCJDYW52YXMgJzJkJyBjb250ZXh0IGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuXG5leHBvcnQgeyBjdHggfTtcbmV4cG9ydCBkZWZhdWx0IGNhbnZhcztcbiIsImNvbnN0IGdhbWVMb29wID0gKGM6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZHJhdzogKCkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZ2FtZUxvb3AoYywgZHJhdykpO1xuICBjLmNsZWFyUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZHJhdygpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUxvb3A7XG4iLCJpbXBvcnQgTWFzcyBmcm9tIFwiLi9NYXNzXCI7XG5cbmV4cG9ydCBjb25zdCBHUkFWSVRZX1ggPSAwOyAvLyBweC9mcl4yXG5leHBvcnQgY29uc3QgR1JBVklUWV9ZID0gMTsgLy8gcHgvZnJeMlxuZXhwb3J0IGNvbnN0IEFJUl9SRVNJU1RBTkNFID0gMC4yNTsgLy8gVE9ET1xuZXhwb3J0IGNvbnN0IEZSSUNUSU9OID0gMC4yNTsgLy8gVE9ETzogdGhpcyBzaG91bGQgYmUgZGVwZW5kZW50IG9uIG1hc3NcbmV4cG9ydCBjb25zdCBOT1JNQUxfRFJBRyA9IDEwMDsgLy8gc3VyZmFjZSBhcmVhIGluIHBpeGVscywgcGVyIGtpbG9ncmFtXG5cbmNsYXNzIFVuaXZlcnNlIHtcbiAgcHVibGljIG1hc3NlcyA9IFtdIGFzIE1hc3NbXTtcblxuICBvdmVybGFwcGluZ01hc3NlcyhzdWJqZWN0OiBNYXNzKTogTWFzc1tdIHtcbiAgICByZXR1cm4gdGhpcy5tYXNzZXMuZmlsdGVyKChtYXNzKSA9PiB7XG4gICAgICBpZiAoc3ViamVjdCA9PT0gbWFzcykgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHN1YmplY3QuaXNIaXR0aW5nKG1hc3MpO1xuICAgIH0pO1xuICB9XG5cbiAgb3ZlcmxhcChzdWJqZWN0OiBNYXNzKTogUmVjb3JkPCd0b3AnfCdyaWdodCd8J2JvdHRvbSd8J2xlZnQnLCBudW1iZXI+IHtcbiAgICBjb25zdCBtYXNzZXMgPSB0aGlzLm92ZXJsYXBwaW5nTWFzc2VzKHN1YmplY3QpO1xuICAgIC8qKlxuICAgICAqICwtLS0tLFxuICAgICAqIHwgICAgfCA8PSBzdWJqZWN0XG4gICAgICogJy0tLS0nXG4gICAgICogLi4uLi4uXG4gICAgICogOiAgICA6IDw9IG1hc3NcbiAgICAgKiBgYGBgYGBcbiAgICAgKi9cbiAgICByZXR1cm4gbWFzc2VzLnJlZHVjZSgobWVtbywgbWFzcykgPT4ge1xuICAgICAgY29uc3Qgb3ZlcmxhcCA9IG1lbW87XG5cbiAgICAgIC8qKlxuICAgICAgICogLC0tLS0sICAgICwtLS0tLCAgICAsLS4tLSwuLiAgICAsLS0tLSwgICAgLC0tLS0sICAuLiwtLS4tLCAgICAsLS0tLSwgICAgICAsLS0tLSwgICAgLi4sLS0tLSwuLlxuICAgICAgICogfCAgICB8ICAgIHwgLi4ufC4uICB8IDogIHwgOiAgICB8ICAgIHwgIC4ufC4uLiB8ICA6IHwgIDogfCAgICB8ICAgIHwgICAgLi58Li4uLnwuLiAgOiB8ICAgIHwgOlxuICAgICAgICogJy0uLS0nLi4gICctOi0tJyA6ICAnLS0tLSdgYCAgLi4nLS0uLScgIDogJy0tOi0nICBgYCctLS0tJyAgLi4nLS0tLScuLiAgOiAnLS0tLScgOiAgYGAnLS0tLSdgYFxuICAgICAgICogICA6ICAgIDogICAgYGBgYGBgICAgICAgICAgICAgOiAgICA6ICAgIGBgYGBgYCAgICAgICAgICAgICAgOiAgICAgICAgOiAgYGBgYGBgYGBgYFxuICAgICAgICogICBgYGBgYGAgICAgICAgICAgICAgICAgICAgICAgYGBgYGBgICAgICAgICAgICAgICAgICAgICAgICAgYGBgYGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzVG9wT3ZlcmxhcCA9IG1hc3MudG9wID49IHN1YmplY3QudG9wICYmIG1hc3MudG9wIDw9IHN1YmplY3QuYm90dG9tO1xuICAgICAgaWYgKG1hc3NUb3BPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ViamVjdC5ib3R0b20gLSBtYXNzLnRvcDtcbiAgICAgICAgaWYgKG92ZXJsYXAuYm90dG9tIDwgZGlzdGFuY2UpIG92ZXJsYXAuYm90dG9tID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogLi4uLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4uLi4gICAgICAgICAgICAgICAgICAgICAuLi4uLi4uLi4uXG4gICAgICAgKiA6ICAgIDogICAgLi4uLi4uICAgICAgICAgICAgICAgIDogICAgOiAgIC4uLi4uLiAgICAgICAgICAgIDogICAgICAgIDogIC4uLi4uLi4uLi5cbiAgICAgICAqIGBgLC0tLS0sICA6ICwtLTotLCAgLi4sLS0tLSwgICwtYC0tLGBgICwtOi0tLCA6ICAsLS0tLSwuLiAgYGAsLS0tLSxgYCAgOiAsLS0tLSwgOiAgLi4sLS0tLSwuLlxuICAgICAgICogICB8ICAgIHwgIGBgfGBgYCB8ICA6IHwgIDogfCAgfCAgICB8ICAgfCBgYGB8YGAgIHwgOiAgfCA6ICAgIHwgICAgfCAgICBgYHxgYGBgfGBgICA6IHwgICAgfCA6XG4gICAgICAgKiAgICctLS0tJyAgICAnLS0tLScgIGBgJy0tYC0nICAnLS0tLScgICAnLS0tLScgICAgJy1gLS0nYGAgICAgJy0tLS0nICAgICAgJy0tLS0nICAgIGBgJy0tLS0nYGBcbiAgICAgICAqL1xuICAgICAgY29uc3QgbWFzc0JvdHRvbU92ZXJsYXAgPSBtYXNzLmJvdHRvbSA8PSBzdWJqZWN0LmJvdHRvbSAmJiBtYXNzLmJvdHRvbSA+PSBzdWJqZWN0LnRvcDtcbiAgICAgIGlmIChtYXNzQm90dG9tT3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG1hc3MuYm90dG9tIC0gc3ViamVjdC50b3A7XG4gICAgICAgIGlmIChvdmVybGFwLnRvcCA8IGRpc3RhbmNlKSBvdmVybGFwLnRvcCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAsLS0tLTogICAgOlxuICAgICAgICogfCAgICB8YGBgYGBcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogICAuLi4uLi5cbiAgICAgICAqIC4tOi0tLiA6XG4gICAgICAgKiB8IGBgYHxgYFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDotLS0tOlxuICAgICAgICogfGBgYGB8XG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfCAgICB8Li4uLi5cbiAgICAgICAqICctLS0tOiAgICA6XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8IC4uLnwuLlxuICAgICAgICogJy06LS0nIDpcbiAgICAgICAqICAgYGBgYGBgXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwuLi4ufFxuICAgICAgICogOi0tLS06XG4gICAgICAgKiBgYGBgYGBcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAsLS0tLTogICAgOlxuICAgICAgICogfCAgICB8ICAgIDpcbiAgICAgICAqICctLS0tOiAgICA6XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogICAuLi4uLi5cbiAgICAgICAqICwtOi0tLCA6XG4gICAgICAgKiB8IDogIHwgOlxuICAgICAgICogJy06LS0nIDpcbiAgICAgICAqICAgYGBgYGBgXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDotLS0tOlxuICAgICAgICogfCAgICB8XG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzTGVmdE92ZXJsYXAgPSBtYXNzLmxlZnQgPj0gc3ViamVjdC5sZWZ0ICYmIG1hc3MubGVmdCA8PSBzdWJqZWN0LnJpZ2h0O1xuICAgICAgaWYgKG1hc3NMZWZ0T3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHN1YmplY3QucmlnaHQgLSBtYXNzLmxlZnQ7XG4gICAgICAgIGlmIChvdmVybGFwLnJpZ2h0IDwgZGlzdGFuY2UpIG92ZXJsYXAucmlnaHQgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDogICAgOi0tLS0sXG4gICAgICAgKiBgYGBgYHwgICAgfFxuICAgICAgICogICAgICAnLS0tLSdcbiAgICAgICAqICAgIC4uLi4uLlxuICAgICAgICogICAgOiAsLS06LSxcbiAgICAgICAqICAgIGBgfGBgYCB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIHxgYGBgfFxuICAgICAgICogICAgICAnLS0tLSdcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAuLi4uLnwgICAgfFxuICAgICAgICogOiAgICA6LS0tLSdcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqICAgIC4ufC4uLiB8XG4gICAgICAgKiAgICA6ICctLTotJ1xuICAgICAgICogICAgYGBgYGBgXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogICAgICB8Li4uLnxcbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogIC4uLi4uLlxuICAgICAgICogIDogICAgLC0tLS0sXG4gICAgICAgKiAgOiAgICB8ICAgIHxcbiAgICAgICAqICA6ICAgICctLS0tJ1xuICAgICAgICogIGBgYGBgYFxuICAgICAgICogICAgLi4uLi4uXG4gICAgICAgKiAgICA6ICwtLTotLFxuICAgICAgICogICAgOiB8ICA6IHxcbiAgICAgICAqICAgIDogJy0tOi0nXG4gICAgICAgKiAgICBgYGBgYGBcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAgICAgIDotLS0tOlxuICAgICAgICogICAgICB8ICAgIHxcbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzUmlnaHRPdmVybGFwID0gbWFzcy5yaWdodCA+PSBzdWJqZWN0LmxlZnQgJiYgbWFzcy5yaWdodCA8PSBzdWJqZWN0LnJpZ2h0O1xuICAgICAgaWYgKG1hc3NSaWdodE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBtYXNzLnJpZ2h0IC0gc3ViamVjdC5sZWZ0O1xuICAgICAgICBpZiAob3ZlcmxhcC5sZWZ0IDwgZGlzdGFuY2UpIG92ZXJsYXAubGVmdCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJJ20gbWlzc2luZyB0b3RhbCBvdmVybGFwcyBhbmQgdG90YWwgZWNsaXBzZXMgYnV0IEkgZG9uJ3QgZ2l2ZSBhIHNoaXRcbiAgICAgIHJldHVybiBvdmVybGFwO1xuICAgIH0sIHsgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwLCBsZWZ0OiAwIH0pO1xuICB9XG59XG5cbmNvbnN0IHVuaXZlcnNlID0gbmV3IFVuaXZlcnNlKCk7XG5leHBvcnQgZGVmYXVsdCB1bml2ZXJzZTtcbiIsImV4cG9ydCBjb25zdCByYW5kID0gKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBjb25zdCBkaWZmID0gcmVhbE1heCAtIHJlYWxNaW47XG4gIHJldHVybiByZWFsTWluICsgKE1hdGgucmFuZG9tKCkgKiBkaWZmKTtcbn07XG5cbmV4cG9ydCBjb25zdCByYW5nZSA9IChtaW46IG51bWJlciwgbWF4PzogbnVtYmVyKTogbnVtYmVyW10gPT4ge1xuICBpZiAoIW1heCkge1xuICAgIG1heCA9IG1pbjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIG1pbiA9IDA7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgfVxuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuICBjb25zdCBiYXNlQXJyYXkgPSBbLi4uQXJyYXkoZGlmZikua2V5cygpXS5tYXAobiA9PiBuICsgcmVhbE1pbik7XG4gIHJldHVybiBtYXggPj0gbWluID8gYmFzZUFycmF5IDogW3JlYWxNYXgsIC4uLmJhc2VBcnJheS5zbGljZSgxKS5yZXZlcnNlKCldO1xufTtcblxuZXhwb3J0IGNvbnN0IGRhbXBlbiA9IChudW06IG51bWJlciwgYnk6IG51bWJlciwgY2VudGVyID0gMCk6IG51bWJlciA9PiB7XG4gIC8vIG51bWJlciBpcyBhbHJlYWR5IGF0IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA9PT0gY2VudGVyKSByZXR1cm4gY2VudGVyO1xuXG4gIC8vIG51bWJlciBpcyBoaWdoZXIgdGhhbiB0aGUgY2VudGVyOyBzdWJ0cmFjdCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA+IGNlbnRlcikge1xuICAgIGNvbnN0IG5ld051bSA9IG51bSAtIGJ5O1xuICAgIHJldHVybiBuZXdOdW0gPCBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG4gIH1cblxuICAvLyBudW1iZXIgaXMgbG93ZXIgdGhhbiB0aGUgY2VudGVyOyBhZGQgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGNvbnN0IG5ld051bSA9IG51bSArIGJ5O1xuICByZXR1cm4gbmV3TnVtID4gY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJvdW5kID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgaWYgKG51bSA8IHJlYWxNaW4pIHJldHVybiByZWFsTWluO1xuICBpZiAobnVtID4gcmVhbE1heCkgcmV0dXJuIHJlYWxNYXg7XG4gIHJldHVybiBudW07XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBpbmNsdXNpdmUgPSB0cnVlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICByZXR1cm4gaW5jbHVzaXZlID8gKG51bSA+PSByZWFsTWluICYmIG51bSA8PSByZWFsTWF4KSA6IChudW0gPiByZWFsTWluICYmIG51bSA8IHJlYWxNYXgpO1xufTtcbiIsImltcG9ydCB1bml2ZXJzZSwgeyBHUkFWSVRZX1gsIEdSQVZJVFlfWSwgRlJJQ1RJT04sIE5PUk1BTF9EUkFHIH0gZnJvbSBcIi4vdW5pdmVyc2VcIjtcbmltcG9ydCB7IGRhbXBlbiwgYm91bmQgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuY29uc3QgdXBkYXRlRGltZW5zaW9uID0gKFxuICBwb3NpdGlvbjogbnVtYmVyLFxuICB2ZWxvY2l0eTogbnVtYmVyLFxuICBhY2NlbGVyYXRpb246IG51bWJlcixcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyLFxuKTogeyBwb3NpdGlvbjogbnVtYmVyOyB2ZWxvY2l0eTogbnVtYmVyIH0gPT4ge1xuICBsZXQgbmV3UG9zaXRpb24gPSBwb3NpdGlvbiArIHZlbG9jaXR5O1xuICBsZXQgbmV3VmVsb2NpdHkgPSB2ZWxvY2l0eSArIGFjY2VsZXJhdGlvbjtcbiAgaWYgKG5ld1Bvc2l0aW9uID4gbWF4KSB7XG4gICAgbmV3UG9zaXRpb24gPSBtYXg7XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9IGVsc2UgaWYgKG5ld1Bvc2l0aW9uIDwgbWluKSB7XG4gICAgbmV3UG9zaXRpb24gPSBtaW47XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogbmV3UG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IG5ld1ZlbG9jaXR5LFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFzcyB7XG4gIHB1YmxpYyBtYXNzID0gMTsgLy8ga2dcbiAgcHVibGljIHggPSAwOyAvLyBweFxuICBwdWJsaWMgeSA9IDA7IC8vIHB4XG4gIHB1YmxpYyBkeCA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyBkeSA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyB3aWR0aCA9IDI1OyAvLyBweFxuICBwdWJsaWMgaGVpZ2h0ID0gMjU7IC8vIHB4XG4gIHB1YmxpYyBzdGF0aW9uYXJ5ID0gZmFsc2U7XG4gIHByaXZhdGUgZGFya01hdHRlciA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBQYXJ0aWFsPE1hc3M+KSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKTtcbiAgICBpZiAoIXRoaXMuZGFya01hdHRlcikgdW5pdmVyc2UubWFzc2VzLnB1c2godGhpcyk7XG4gIH1cblxuICBnZXQgZHJhZ0NvZWZmaWNpZW50KCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3VyZmFjZUFyZWEgPSAoMiAqIHRoaXMud2lkdGgpICsgKDIgKiB0aGlzLmhlaWdodCk7XG4gICAgcmV0dXJuIChzdXJmYWNlQXJlYSAvIHRoaXMubWFzcykgLyBOT1JNQUxfRFJBRztcbiAgfVxuXG4gIGdldCBheCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zdGF0aW9uYXJ5ID8gMCA6IEdSQVZJVFlfWDsgfVxuICBnZXQgYXkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuc3RhdGlvbmFyeSA/IDAgOiBHUkFWSVRZX1k7IH1cblxuICBnZXQgaXNBZ2FpbnN0VG9wV2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueSA9PT0gMDsgfVxuICBnZXQgaXNBZ2FpbnN0Qm90dG9tV2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueSA9PT0gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5oZWlnaHQ7IH1cbiAgZ2V0IGlzQWdhaW5zdExlZnRXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy54ID09PSAwOyB9XG4gIGdldCBpc0FnYWluc3RSaWdodFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnggPT09IHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy53aWR0aDsgfVxuXG4gIGdldCB0ZXJtaW5hbFZlbG9jaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDIwOyAvLyBUT0RPOiBzaG91bGQgYmUgYmFzZWQgb24gZHJhZ1xuICB9XG5cbiAgZ2V0IHRvcCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy55OyB9XG4gIGdldCByaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy54ICsgdGhpcy53aWR0aDsgfVxuICBnZXQgYm90dG9tKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodDsgfVxuICBnZXQgbGVmdCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy54OyB9XG5cbiAgdXBkYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IG5ld1hEaW1lbnNpb24gPSB1cGRhdGVEaW1lbnNpb24odGhpcy54LCB0aGlzLmR4LCB0aGlzLmF4LCB0aGlzLndpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMud2lkdGgpO1xuICAgIGNvbnN0IHhGcmljdGlvbiA9IHRoaXMuaXNBZ2FpbnN0VG9wV2FsbCB8fCB0aGlzLmlzQWdhaW5zdEJvdHRvbVdhbGwgPyBGUklDVElPTiA6IDA7XG4gICAgY29uc3QgZHhXaXRoRnJpY3Rpb24gPSBkYW1wZW4obmV3WERpbWVuc2lvbi52ZWxvY2l0eSwgeEZyaWN0aW9uKTtcblxuICAgIGNvbnN0IG5ld1lEaW1lbnNpb24gPSB1cGRhdGVEaW1lbnNpb24odGhpcy55LCB0aGlzLmR5LCB0aGlzLmF5LCB0aGlzLmhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5oZWlnaHQpO1xuICAgIGNvbnN0IHlGcmljdGlvbiA9IHRoaXMuaXNBZ2FpbnN0TGVmdFdhbGwgfHwgdGhpcy5pc0FnYWluc3RSaWdodFdhbGwgPyBGUklDVElPTiA6IDA7XG4gICAgY29uc3QgZHlXaXRoRnJpY3Rpb24gPSBkYW1wZW4obmV3WURpbWVuc2lvbi52ZWxvY2l0eSwgeUZyaWN0aW9uKTtcblxuICAgIHRoaXMueCA9IG5ld1hEaW1lbnNpb24ucG9zaXRpb247XG4gICAgdGhpcy5keCA9IGJvdW5kKGR4V2l0aEZyaWN0aW9uLCAtMSAqIHRoaXMudGVybWluYWxWZWxvY2l0eSwgdGhpcy50ZXJtaW5hbFZlbG9jaXR5KTtcbiAgICB0aGlzLnkgPSBuZXdZRGltZW5zaW9uLnBvc2l0aW9uO1xuICAgIHRoaXMuZHkgPSBib3VuZChkeVdpdGhGcmljdGlvbiwgLTEgKiB0aGlzLnRlcm1pbmFsVmVsb2NpdHksIHRoaXMudGVybWluYWxWZWxvY2l0eSk7XG5cbiAgICBjb25zdCBvdmVybGFwID0gdW5pdmVyc2Uub3ZlcmxhcCh0aGlzKTtcbiAgICBpZiAodGhpcy5keSA+IDAgJiYgb3ZlcmxhcC5ib3R0b20gPiAwKSB7XG4gICAgICB0aGlzLnkgLT0gb3ZlcmxhcC5ib3R0b207XG4gICAgICB0aGlzLmR5ID0gMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZHkgPCAwICYmIG92ZXJsYXAudG9wID4gMCkge1xuICAgICAgdGhpcy55ICs9IG92ZXJsYXAudG9wO1xuICAgICAgdGhpcy5keSA9IDA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmR4ID4gMCAmJiBvdmVybGFwLnJpZ2h0ID4gMCkge1xuICAgICAgdGhpcy54IC09IG92ZXJsYXAucmlnaHQ7XG4gICAgICB0aGlzLmR4ID0gMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZHggPCAwICYmIG92ZXJsYXAubGVmdCA+IDApIHtcbiAgICAgIHRoaXMueCArPSBvdmVybGFwLmxlZnQ7XG4gICAgICB0aGlzLmR4ID0gMDtcbiAgICB9XG4gIH1cblxuICBpc0hpdHRpbmcobWFzczogTWFzcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG1hc3NMZWZ0ID0gbWFzcy54O1xuICAgIGNvbnN0IG1hc3NSaWdodCA9IG1hc3MueCArIG1hc3Mud2lkdGg7XG4gICAgY29uc3QgbWFzc1RvcCA9IG1hc3MueTtcbiAgICBjb25zdCBtYXNzQm90dG9tID0gbWFzcy55ICsgbWFzcy5oZWlnaHQ7XG5cbiAgICBjb25zdCB0aGlzTGVmdCA9IHRoaXMueDtcbiAgICBjb25zdCB0aGlzUmlnaHQgPSB0aGlzLnggKyB0aGlzLndpZHRoO1xuICAgIGNvbnN0IHRoaXNUb3AgPSB0aGlzLnk7XG4gICAgY29uc3QgdGhpc0JvdHRvbSA9IHRoaXMueSArIHRoaXMuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXNSaWdodCA+PSBtYXNzTGVmdFxuICAgICAgJiYgdGhpc0xlZnQgPD0gbWFzc1JpZ2h0XG4gICAgICAmJiB0aGlzQm90dG9tID49IG1hc3NUb3BcbiAgICAgICYmIHRoaXNUb3AgPD0gbWFzc0JvdHRvbVxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHB1YmxpYyB4ID0gMDtcbiAgcHVibGljIHkgPSAwO1xuICBwdWJsaWMgcHJlc3NlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMueCA9IGV2ZW50Lng7XG4gICAgdGhpcy55ID0gZXZlbnQueTtcbiAgICB0aGlzLnByZXNzZWQgPSBldmVudC5idXR0b25zID09PSAxO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdG91Y2hlcyB9ID0gZXZlbnQ7XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaGVzWzBdO1xuICAgICAgdGhpcy54ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHRoaXMueSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBtb3VzZSA9IG5ldyBNb3VzZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3VzZTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5cbmltcG9ydCB7IGN0eCB9IGZyb20gJy4vY2FudmFzJztcbmltcG9ydCBnYW1lTG9vcCBmcm9tICcuL2dhbWVMb29wJztcbmltcG9ydCBNYXNzIGZyb20gJy4vTWFzcyc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyJztcbmltcG9ydCB7IHJhbmdlLCByYW5kIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuaW1wb3J0IHVuaXZlcnNlIGZyb20gJy4vdW5pdmVyc2UnO1xuXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG5cbmNvbnN0IG1hc3NlcyA9IHJhbmdlKDEwKS5tYXAoKCkgPT4ge1xuICByZXR1cm4gbmV3IE1hc3Moe1xuICAgIG1hc3M6IHJhbmQoMC41LCA1KSxcbiAgICB4OiByYW5kKDAsIHdpbmRvdy5pbm5lcldpZHRoKSxcbiAgICB5OiByYW5kKDAsIHdpbmRvdy5pbm5lckhlaWdodCksXG4gICAgd2lkdGg6IHJhbmQoNTAsIDE1MCksXG4gICAgaGVpZ2h0OiByYW5kKDUwLCAxNTApLFxuICAgIHN0YXRpb25hcnk6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IHN0YXJzID0gcmFuZ2UoMTAwKS5tYXAoKCkgPT4ge1xuICBjb25zdCBzaXplID0gcmFuZCgxLCA1KTtcbiAgcmV0dXJuIFtcbiAgICByYW5kKDAsIHdpbmRvdy5pbm5lcldpZHRoKSxcbiAgICByYW5kKDAsIHdpbmRvdy5pbm5lckhlaWdodCksXG4gICAgc2l6ZSxcbiAgICBzaXplLFxuICBdIGFzIGNvbnN0O1xufSk7XG5cbmdhbWVMb29wKGN0eCwgKCkgPT4ge1xuICBzdGFycy5mb3JFYWNoKChyZWN0T3B0aW9ucywgaW5kZXgpID0+IHtcbiAgICBjb25zdCBvcGFjaXR5ID0gKChpbmRleCAlIDEwKSArIDEpIC8gMTA7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7b3BhY2l0eX0pYDtcbiAgICBjdHguZmlsbFJlY3QoLi4ucmVjdE9wdGlvbnMpO1xuICB9KTtcblxuICBtYXNzZXMuZm9yRWFjaCgobWFzcykgPT4ge1xuICAgIGlmIChwbGF5ZXIuaXNIaXR0aW5nKG1hc3MpKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjIpJztcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMCwgMCwgMC41KSc7XG4gICAgfVxuXG4gICAgY3R4LmZpbGxSZWN0KG1hc3MueCwgbWFzcy55LCBtYXNzLndpZHRoLCBtYXNzLmhlaWdodCk7XG4gIH0pO1xuXG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAxNTAsIDAsIDEpJztcbiAgY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLndpZHRoLCBwbGF5ZXIuaGVpZ2h0KTtcblxuICBjb25zdCBmYWNlbWFza0NvbG9yID0gJ3JnYmEoMjIwLCAyMjAsIDI1NSwgMSknO1xuICBjb25zdCBmYWNlbWFza1dpZHRoID0gcGxheWVyLndpZHRoIC8gMjtcbiAgY29uc3QgZmFjZW1hc2tIZWlnaHQgPSBwbGF5ZXIuaGVpZ2h0IC8gNTtcbiAgY29uc3QgZmFjZW1hc2tPZmZzZXRZID0gMztcbiAgY3R4LmZpbGxTdHlsZSA9IGZhY2VtYXNrQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArIChwbGF5ZXIud2lkdGggLSBmYWNlbWFza1dpZHRoKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gICAgY2FzZSAncmlnaHQnOiBjdHguZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArICgocGxheWVyLndpZHRoIC0gZmFjZW1hc2tXaWR0aCkgLyAyKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gIH1cblxuICBjb25zdCBidXJuZXJDb2xvciA9IGByZ2JhKDI1NSwgMTAwLCAwLCAke3JhbmQoMC41LCAwLjc1KX0pYDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWCA9IHJhbmQoMC4yNSwgMC40KSAqIHBsYXllci53aWR0aDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWSA9IHJhbmQoMC40LCAwLjYpICogcGxheWVyLmhlaWdodDtcbiAgY29uc3QgYnVybmVyQWNyb3NzID0gKHdpZHRoOiBudW1iZXIpOiBudW1iZXIgPT4gMC42ICogd2lkdGg7XG4gIGNvbnN0IGJ1cm5lckFjcm9zc09mZnNldCA9ICh3aWR0aDogbnVtYmVyKTogbnVtYmVyID0+ICh3aWR0aCAtIGJ1cm5lckFjcm9zcyh3aWR0aCkpIC8gMjtcblxuICBjdHguZmlsbFN0eWxlID0gYnVybmVyQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54IC0gYnVybmVyTGVuZ3RoWCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBjYXNlICdyaWdodCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgcGxheWVyLndpZHRoLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuICBzd2l0Y2ggKHBsYXllci5idXJuZXJZU2lkZSkge1xuICAgIGNhc2UgJ2JvdHRvbSc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci53aWR0aCksIC8vIGNlbnRlcmVkIG9uIHRoZSBYIGF4aXNcbiAgICAgIHBsYXllci55ICsgcGxheWVyLmhlaWdodCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgYm90dG9tIG9mIHRoZSBwbGF5ZXJcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIud2lkdGgpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFksIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgY2FzZSAndG9wJzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLndpZHRoKSwgLy8gY2VudGVyZWQgb24gdGhlIFggYXhpc1xuICAgICAgcGxheWVyLnkgLSBidXJuZXJMZW5ndGhZLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSB0b3Agb2YgdGhlIHBsYXllclxuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci53aWR0aCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWSwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuXG4gIHBsYXllci51cGRhdGUoKTtcbn0pO1xuIiwiaW1wb3J0IE1hc3MgZnJvbSBcIi4vTWFzc1wiO1xuaW1wb3J0IG1vdXNlIGZyb20gXCIuL21vdXNlXCI7XG5pbXBvcnQgeyBiZXR3ZWVuIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIE1hc3Mge1xuICBwdWJsaWMgd2lkdGggPSAxNTtcbiAgcHVibGljIGhlaWdodCA9IDIwO1xuICBwdWJsaWMgamV0cGFja0ZvcmNlWCA9IDAuNDsgLy8gKGtnICogcHgpIC8gZnJeMlxuICBwdWJsaWMgamV0cGFja0ZvcmNlWSA9IDEuMzsgLy8gKGtnICogcHgpIC8gZnJeMlxuXG4gIGdldCBidXJuaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBtb3VzZS5wcmVzc2VkO1xuICB9XG5cbiAgZ2V0IGF4SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS54IC0gdGhpcy54O1xuICAgIGNvbnN0IGxlZnRNYXJnaW4gPSAtMSAqIHRoaXMud2lkdGg7XG4gICAgY29uc3QgcmlnaHRNYXJnaW4gPSAyICogdGhpcy53aWR0aDtcbiAgICBpZiAoYmV0d2Vlbihtb3VzZURpc3RhbmNlLCBsZWZ0TWFyZ2luLCByaWdodE1hcmdpbikpIHJldHVybiAwO1xuXG4gICAgY29uc3QgamV0cGFja0FjY2VsZXJhdGlvbiA9IHRoaXMuamV0cGFja0ZvcmNlWCAvIHRoaXMubWFzcztcbiAgICByZXR1cm4gbW91c2VEaXN0YW5jZSA+IDAgPyBqZXRwYWNrQWNjZWxlcmF0aW9uIDogLTEgKiBqZXRwYWNrQWNjZWxlcmF0aW9uO1xuICB9XG5cbiAgZ2V0IGF5SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS55IC0gdGhpcy55O1xuICAgIGNvbnN0IHRvcE1hcmdpbiA9IDA7XG4gICAgY29uc3QgYm90dG9tTWFyZ2luID0gdGhpcy5oZWlnaHQ7XG4gICAgaWYgKG1vdXNlRGlzdGFuY2UgPj0gMCB8fCBiZXR3ZWVuKG1vdXNlRGlzdGFuY2UsIHRvcE1hcmdpbiwgYm90dG9tTWFyZ2luKSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBqZXRwYWNrQWNjZWxlcmF0aW9uID0gdGhpcy5qZXRwYWNrRm9yY2VZIC8gdGhpcy5tYXNzO1xuICAgIHJldHVybiAtMSAqIGpldHBhY2tBY2NlbGVyYXRpb247XG4gIH1cblxuICBnZXQgYXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gc3VwZXIuYXggKyB0aGlzLmF4SmV0cGFjaztcbiAgfVxuXG4gIGdldCBheSgpOiBudW1iZXIge1xuICAgIHJldHVybiBzdXBlci5heSArIHRoaXMuYXlKZXRwYWNrO1xuICB9XG5cbiAgZ2V0IGJ1cm5lclhTaWRlKCk6ICdsZWZ0J3wnbm9uZSd8J3JpZ2h0JyB7XG4gICAgaWYgKHRoaXMuYXhKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF4SmV0cGFjayA+IDAgPyAnbGVmdCcgOiAncmlnaHQnO1xuICB9XG5cbiAgZ2V0IGJ1cm5lcllTaWRlKCk6ICdib3R0b20nfCdub25lJ3wndG9wJyB7XG4gICAgaWYgKHRoaXMuYXlKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF5SmV0cGFjayA+IDAgPyAndG9wJyA6ICdib3R0b20nO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9