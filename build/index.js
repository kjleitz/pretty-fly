!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),o=()=>{s.width=window.innerWidth,s.height=window.innerHeight};o(),window.addEventListener("resize",o),document.body.appendChild(s);const r=s.getContext("2d");r||console.error("Canvas '2d' context is not supported.");let n=0;const h=(t,e)=>{requestAnimationFrame(()=>h(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e(n),n+=1};var l=h;const a=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],o=s-i;return i+Math.random()*o};function c(t,...e){const i="number"==typeof e[0]?e[0]:0,s="function"==typeof e[0]?e[0]:e[1],[o,r]=t<i?[t,i]:[i,t];return[...Array(r-o).keys()].map(t=>s?s(t+o):t+o)}const u=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},g=(t,e,i)=>{const[s,o]=e<i?[e,i]:[i,e];return t<s?s:t>o?o:t},d=(t,e,i,s=!0)=>{const[o,r]=e<i?[e,i]:[i,e];return s?t>=o&&t<=r:t>o&&t<r},f=(t,e)=>Math.abs(t-e),p=0,y=1,m=.25,b=100;var w=new class{constructor(){this.masses=[]}collisionsForMove(t,e){const i=new v(Object.assign(Object.assign(Object.assign({},t),e),{darkMatter:!0})),s=i.x-t.x,o=i.y-t.y,r=o<0,n=o>0,h=s<0,l=s>0;return this.masses.reduce((e,s)=>{if(s===t)return e;if(!i.isHitting(s))return e;const o=s.solid?e.solid:e.ephemeral;if(r&&d(s.bottom,t.top,i.top)){const t=f(s.bottom,i.top);o.top<t&&(o.top=t)}if(n&&d(s.top,t.bottom,i.bottom)){const t=f(s.top,i.bottom);o.bottom<t&&(o.bottom=t)}if(h&&d(s.right,t.left,i.left)){const t=f(s.right,i.left);o.left<t&&(o.left=t)}if(l&&d(s.left,t.right,i.right)){const t=f(s.left,i.right);o.right<t&&(o.right=t)}return e},{solid:{top:0,bottom:0,left:0,right:0},ephemeral:{top:0,bottom:0,left:0,right:0}})}overlappingMasses(t,{ignore:e=[]}={}){return this.masses.filter(i=>t!==i&&!e.includes(i)&&t.isHitting(i))}overlap(t,{ignore:e=[]}={}){return this.overlappingMasses(t,{ignore:e}).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const x=(t,e,i,s,o)=>{let r=t+e,n=e+i;return r>o?(r=o,n=0):r<s&&(r=s,n=0),{position:r,velocity:n}};class v{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,this.solid=!0,this.collectOnTouch=!1,this.touchedAt=null,Object.assign(this,t),this.darkMatter||w.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/b}get ax(){return this.stationary?0:p}get ay(){return this.stationary?0:y}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=x(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=x(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height);let i=t.position,s=e.position,o=t.velocity,r=e.velocity;const n=w.collisionsForMove(this,{x:i,y:s}).solid;n.right>0?(i-=n.right,o=0):n.left>0&&(i+=n.left,o=0),n.bottom>0?(s-=n.bottom,r=0):n.top>0&&(s+=n.top,r=0),this.x=i,this.y=s,(this.isAgainstTopWall||this.isAgainstBottomWall||n.top||n.bottom)&&(o=u(o,m)),(this.isAgainstLeftWall||this.isAgainstRightWall||n.left||n.right)&&(r=u(r,m)),this.dx=g(o,-1*this.terminalVelocity,this.terminalVelocity),this.dy=g(r,-1*this.terminalVelocity,this.terminalVelocity)}isHitting(t){return this.right>=t.left&&this.left<=t.right&&this.bottom>=t.top&&this.top<=t.bottom}}var E=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};class M{constructor(t,e,{size:i,brightness:s,vector:o}={}){this.x=t,this.y=e,this.size=i||a(1,5);const r=void 0===s?Math.random():s;this.brightness=g(r,0,1),this.vector=o||[-1,1]}}const F=window.innerWidth,R=window.innerHeight,A=new class extends v{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3,this.MAX_FUEL=100,this.MIN_FUEL=0,this.MAX_FUEL_RECHARGE=25,this.fuelRechargeRate=.1,this.fuelRechargeDelay=200,this.lastBurn=null,this._fuel=100}get burning(){return this.fuel>0&&E.pressed}get axJetpack(){if(!this.burning)return 0;const t=E.x-this.x,e=-1*this.width,i=2*this.width;if(d(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=E.y-this.y,e=this.height;return t>=0||d(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}set fuel(t){this._fuel=g(t,this.MIN_FUEL,this.MAX_FUEL)}get fuel(){return this._fuel}update(){super.update(),this.burning?(this.fuel-=.5,this.lastBurn=new Date):this.fuel<this.MAX_FUEL_RECHARGE&&this.lastBurn&&(new Date).getTime()-this.lastBurn.getTime()>this.fuelRechargeDelay&&(this.fuel=g(this.fuel+this.fuelRechargeRate,this.MIN_FUEL,this.MAX_FUEL))}},S=c(10).map(()=>new v({x:a(0,F),y:a(0,R),width:a(50,150),height:a(50,150),stationary:!0})),_=c(10).map(()=>new v({mass:a(.5,5),x:a(0,F),y:a(0,R),width:25,height:25,solid:!1,stationary:!1,collectOnTouch:!0})),k=[...S,..._],L=[A,...k.filter(t=>!t.stationary)];let T=0;const j=_.length,O=c(100,()=>new M(a(0,F),a(0,R))),W=[];setInterval(()=>{const[t,e]=Math.random()>.5?[a(250,F),0]:[F,a(0,R-250)];W.push(new M(t,e,{brightness:1,vector:[-10,10]}))},2e3),l(r,t=>{O.forEach((e,i)=>{const{x:s,y:o,size:n,brightness:h,vector:l}=e,c=h-Math.random();if(r.fillStyle=`rgba(255, 255, 255, ${(t+i)%20==0?c:h})`,r.fillRect(s,o,n,n),e.x+=l[0],e.y+=l[1],e.x<0||e.x>F||e.y<0||e.y>R){const[t,i]=Math.random()>.5?[a(0,F),0]:[F,a(0,R)];e.x=t,e.y=i}}),W.forEach((t,e)=>{const{x:i,y:s,size:o,brightness:n,vector:h}=t;r.fillStyle=`rgba(255, 255, 255, ${n})`,r.fillRect(i,s,o,o),t.x+=h[0],t.y+=h[1],(t.x<0||t.x>F||t.y<0||t.y>R)&&W.splice(e,1)}),k.forEach((t,e)=>{const i=A.isHitting(t);let s=!0;if(t.solid)r.fillStyle="rgba(255, 0, 0, 0.7)";else if(i&&!t.touchedAt)r.fillStyle="rgba(0, 0, 255, 0.8)",t.touchedAt=(new Date).getTime(),A.fuel+=.25*A.MAX_FUEL;else if(t.collectOnTouch&&t.touchedAt){const i=(new Date).getTime()-t.touchedAt;if(i>200)k.splice(e,1),s=!1,T+=1;else{const t=Math.ceil(i/200*255);r.fillStyle=`rgba(${t}, ${t}, 255, 0.8)`}}else r.fillStyle="rgba(0, 100, 255, 0.8)";s&&r.fillRect(t.x,t.y,t.width,t.height)}),r.fillStyle="rgba(0, 150, 0, 1)",r.fillRect(A.x,A.y,A.width,A.height);const e=A.width/2,i=A.height/5;switch(r.fillStyle="rgba(220, 220, 255, 1)",A.burnerXSide){case"left":r.fillRect(A.x+(A.width-e),A.y+3,e,i);break;case"right":r.fillRect(A.x,A.y+3,e,i);break;default:r.fillRect(A.x+(A.width-e)/2,A.y+3,e,i)}const s=`rgba(255, 100, 0, ${a(.5,.75)})`,o=a(.25,.4)*A.width,n=a(.4,.6)*A.height,h=t=>.6*t,l=t=>(t-h(t))/2;switch(r.fillStyle=s,A.burnerXSide){case"left":r.fillRect(A.x-o,A.y+l(A.height),o,h(A.height));break;case"right":r.fillRect(A.x+A.width,A.y+l(A.height),o,h(A.height))}switch(A.burnerYSide){case"bottom":r.fillRect(A.x+l(A.width),A.y+A.height,h(A.width),n);break;case"top":r.fillRect(A.x+l(A.width),A.y-n,h(A.width),n)}r.font="30px Courier",r.fillStyle="#FFF";const c=`${T}/${j}${T===j?" aww yee":""}`;r.fillText(c,50,50);const u=A.fuel/A.MAX_FUEL,g=300*u,d=u<.25&&t%20>10;r.fillStyle=d?"rgba(255, 0, 0, 0.6)":"rgba(255, 0, 0, 0.3)",r.fillRect(50+g,60,300-g,30),r.fillStyle="rgba(0, 255, 0, 0.5)",r.fillRect(50,60,g,30),L.forEach(t=>t.update())})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdGllcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdW5pdmVyc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9TdGFyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJyYW5kIiwibWluIiwibWF4IiwicmVhbE1pbiIsInJlYWxNYXgiLCJkaWZmIiwiTWF0aCIsInJhbmRvbSIsInJhbmdlIiwibWF4QW5kT3JNYXBwZXIiLCJtYXBwZXIiLCJBcnJheSIsImtleXMiLCJtYXAiLCJkYW1wZW4iLCJudW0iLCJieSIsImNlbnRlciIsIm5ld051bSIsImJvdW5kIiwiYmV0d2VlbiIsImluY2x1c2l2ZSIsImRpZmZlcmVuY2UiLCJhYnMiLCJHUkFWSVRZX1giLCJHUkFWSVRZX1kiLCJGUklDVElPTiIsIk5PUk1BTF9EUkFHIiwibWFzc2VzIiwic3ViamVjdCIsInRvUG9zaXRpb24iLCJtb3ZlZFN1YmplY3QiLCJkYXJrTWF0dGVyIiwiZHgiLCJ4IiwiZHkiLCJ5IiwibW92aW5nIiwidGhpcyIsInJlZHVjZSIsIm92ZXJsYXBzIiwib2JzdGFjbGUiLCJpc0hpdHRpbmciLCJvdmVybGFwIiwic29saWQiLCJlcGhlbWVyYWwiLCJib3R0b20iLCJ0b3AiLCJkaXN0YW5jZSIsInJpZ2h0IiwibGVmdCIsImlnbm9yZSIsImZpbHRlciIsIm1hc3MiLCJpbmNsdWRlcyIsIm92ZXJsYXBwaW5nTWFzc2VzIiwibWVtbyIsInVwZGF0ZURpbWVuc2lvbiIsInBvc2l0aW9uIiwidmVsb2NpdHkiLCJhY2NlbGVyYXRpb24iLCJuZXdQb3NpdGlvbiIsIm5ld1ZlbG9jaXR5Iiwib3B0aW9ucyIsInN0YXRpb25hcnkiLCJjb2xsZWN0T25Ub3VjaCIsInRvdWNoZWRBdCIsImFzc2lnbiIsInB1c2giLCJuZXdYRGF0YSIsImF4IiwibmV3WURhdGEiLCJheSIsIm5ld1giLCJuZXdZIiwibmV3RHgiLCJuZXdEeSIsInNvbGlkT3ZlcmxhcCIsImNvbGxpc2lvbnNGb3JNb3ZlIiwiaXNBZ2FpbnN0VG9wV2FsbCIsImlzQWdhaW5zdEJvdHRvbVdhbGwiLCJpc0FnYWluc3RMZWZ0V2FsbCIsImlzQWdhaW5zdFJpZ2h0V2FsbCIsInRlcm1pbmFsVmVsb2NpdHkiLCJwcmVzc2VkIiwiZXZlbnQiLCJwb3B1bGF0ZUZyb21Nb3VzZUV2ZW50IiwicG9wdWxhdGVGcm9tVG91Y2hFdmVudCIsImJ1dHRvbnMiLCJ0b3VjaGVzIiwibGVuZ3RoIiwidG91Y2giLCJjbGllbnRYIiwiY2xpZW50WSIsInNpemUiLCJicmlnaHRuZXNzIiwidmVjdG9yIiwiYmFzZUJyaWdodG5lc3MiLCJNQVhfWCIsIk1BWF9ZIiwicGxheWVyIiwiamV0cGFja0ZvcmNlWCIsImpldHBhY2tGb3JjZVkiLCJNQVhfRlVFTCIsIk1JTl9GVUVMIiwiTUFYX0ZVRUxfUkVDSEFSR0UiLCJmdWVsUmVjaGFyZ2VSYXRlIiwiZnVlbFJlY2hhcmdlRGVsYXkiLCJsYXN0QnVybiIsIl9mdWVsIiwiZnVlbCIsImJ1cm5pbmciLCJtb3VzZURpc3RhbmNlIiwibGVmdE1hcmdpbiIsInJpZ2h0TWFyZ2luIiwiamV0cGFja0FjY2VsZXJhdGlvbiIsImJvdHRvbU1hcmdpbiIsInN1cGVyIiwiYXhKZXRwYWNrIiwiYXlKZXRwYWNrIiwidXBkYXRlIiwiRGF0ZSIsImdldFRpbWUiLCJzb2xpZE1hc3NlcyIsImNvbGxlY3RpYmxlcyIsImZyZWVNYXNzZXMiLCJwb2ludHMiLCJtYXhQb2ludHMiLCJzdGFycyIsInNob290aW5nU3RhcnMiLCJzZXRJbnRlcnZhbCIsImxvb3BDb3VudCIsImZvckVhY2giLCJzdGFyIiwiaW5kZXgiLCJ0d2lua2xlIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJzcGxpY2UiLCJoaXR0aW5nTWFzcyIsInN0aWxsUHJlc2VudCIsIm1zU2luY2VUb3VjaCIsInJnVmFsdWUiLCJjZWlsIiwiZmFjZW1hc2tXaWR0aCIsImZhY2VtYXNrSGVpZ2h0IiwiYnVybmVyWFNpZGUiLCJidXJuZXJDb2xvciIsImJ1cm5lckxlbmd0aFgiLCJidXJuZXJMZW5ndGhZIiwiYnVybmVyQWNyb3NzIiwiYnVybmVyQWNyb3NzT2Zmc2V0IiwiYnVybmVyWVNpZGUiLCJmb250Iiwic2NvcmVUZXh0IiwiZmlsbFRleHQiLCJmdWVsUmVtYWluaW5nIiwiZnVlbFJlbWFpbmluZ1BvaW50IiwiZmxh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bkQsRUFBT2pILFFBQ3JDaUssRUFDQUUsRUFBYWxELEVBQU9qSCxTQUNuQixNQUNILElBQUssUUFBU0ssRUFBSWlKLFNBQ2hCckMsRUFBT2xFLEVBQUlrRSxFQUFPcEgsTUFDbEJvSCxFQUFPaEUsRUFBSW1ILEVBQW1CbkQsRUFBT2pILFFBQ3JDaUssRUFDQUUsRUFBYWxELEVBQU9qSCxTQUl4QixPQUFRaUgsRUFBT29ELGFBQ2IsSUFBSyxTQUFVaEssRUFBSWlKLFNBQ2pCckMsRUFBT2xFLEVBQUlxSCxFQUFtQm5ELEVBQU9wSCxPQUNyQ29ILEVBQU9oRSxFQUFJZ0UsRUFBT2pILE9BQ2xCbUssRUFBYWxELEVBQU9wSCxPQUNwQnFLLEdBQ0MsTUFDSCxJQUFLLE1BQU83SixFQUFJaUosU0FDZHJDLEVBQU9sRSxFQUFJcUgsRUFBbUJuRCxFQUFPcEgsT0FDckNvSCxFQUFPaEUsRUFBSWlILEVBQ1hDLEVBQWFsRCxFQUFPcEgsT0FDcEJxSyxHQUtKN0osRUFBSWlLLEtBQU8sZUFDWGpLLEVBQUlnSixVQUFZLE9BQ2hCLE1BQU1rQixFQUFZLEdBQUc1QixLQUFVQyxJQUFZRCxJQUFXQyxFQUFZLFdBQWEsS0FDL0V2SSxFQUFJbUssU0FBU0QsRUFBVyxHQUFJLElBRTVCLE1BQ01FLEVBQWdCeEQsRUFBT1UsS0FBT1YsRUFBT0csU0FDckNzRCxFQUZlLElBRXFCRCxFQUNwQ0UsRUFBV0YsRUFBZ0IsS0FBUXpCLEVBQVksR0FBSyxHQUMxRDNJLEVBQUlnSixVQUFZc0IsRUFBVyx1QkFBeUIsdUJBQ3BEdEssRUFBSWlKLFNBQVMsR0FBS29CLEVBQW9CLEdBTGpCLElBS29DQSxFQUFvQixJQUM3RXJLLEVBQUlnSixVQUFZLHVCQUNoQmhKLEVBQUlpSixTQUFTLEdBQUksR0FBSW9CLEVBQW9CLElBRXpDaEMsRUFBV08sUUFBUS9FLEdBQVFBLEVBQUttRSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG5jb25zdCBzdHJldGNoQ2FudmFzID0gKCk6IHZvaWQgPT4ge1xuICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbn07XG5cbnN0cmV0Y2hDYW52YXMoKTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBzdHJldGNoQ2FudmFzKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xuaWYgKCFjdHgpIGNvbnNvbGUuZXJyb3IoXCJDYW52YXMgJzJkJyBjb250ZXh0IGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuXG5leHBvcnQgeyBjdHggfTtcbmV4cG9ydCBkZWZhdWx0IGNhbnZhcztcbiIsImxldCBsb29wQ291bnQgPSAwO1xuXG5jb25zdCBnYW1lTG9vcCA9IChjOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRyYXc6IChsb29wQ291bnQ6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZ2FtZUxvb3AoYywgZHJhdykpO1xuICBjLmNsZWFyUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgZHJhdyhsb29wQ291bnQpO1xuICBsb29wQ291bnQgKz0gMTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVMb29wO1xuIiwiZXhwb3J0IGNvbnN0IHJhbmQgPSAobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbiAgcmV0dXJuIHJlYWxNaW4gKyAoTWF0aC5yYW5kb20oKSAqIGRpZmYpO1xufTtcblxuLy8gZXhwb3J0IGNvbnN0IHJhbmdlID0gKG1pbjogbnVtYmVyLCBtYXg/OiBudW1iZXIpOiBudW1iZXJbXSA9PiB7XG4vLyAgIGlmICghbWF4KSB7XG4vLyAgICAgbWF4ID0gbWluOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4vLyAgICAgbWluID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuLy8gICB9XG4vLyAgIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuLy8gICBjb25zdCBkaWZmID0gcmVhbE1heCAtIHJlYWxNaW47XG4vLyAgIGNvbnN0IGJhc2VBcnJheSA9IFsuLi5BcnJheShkaWZmKS5rZXlzKCldLm1hcChuID0+IG4gKyByZWFsTWluKTtcbi8vICAgcmV0dXJuIG1heCA+PSBtaW4gPyBiYXNlQXJyYXkgOiBbcmVhbE1heCwgLi4uYmFzZUFycmF5LnNsaWNlKDEpLnJldmVyc2UoKV07XG4vLyB9O1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbXSk6IG51bWJlcltdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW251bWJlcl0pOiBudW1iZXJbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFsobjogbnVtYmVyKSA9PiBUXSk6IFRbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtudW1iZXIsIChuOiBudW1iZXIpID0+IFRdKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW118W251bWJlcnwoKG46IG51bWJlcikgPT4gVCldfFtudW1iZXIsIChuOiBudW1iZXIpID0+IFRdKTogKG51bWJlcnxUKVtdIHtcbiAgY29uc3QgbWF4ID0gdHlwZW9mIG1heEFuZE9yTWFwcGVyWzBdID09PSAnbnVtYmVyJyA/IG1heEFuZE9yTWFwcGVyWzBdIDogMDtcbiAgY29uc3QgbWFwcGVyID0gdHlwZW9mIG1heEFuZE9yTWFwcGVyWzBdID09PSAnZnVuY3Rpb24nID8gbWF4QW5kT3JNYXBwZXJbMF0gOiBtYXhBbmRPck1hcHBlclsxXTtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbiAgcmV0dXJuIFsuLi5BcnJheShkaWZmKS5rZXlzKCldLm1hcChuID0+IChtYXBwZXIgPyBtYXBwZXIobiArIHJlYWxNaW4pIDogbiArIHJlYWxNaW4pKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRhbXBlbiA9IChudW06IG51bWJlciwgYnk6IG51bWJlciwgY2VudGVyID0gMCk6IG51bWJlciA9PiB7XG4gIC8vIG51bWJlciBpcyBhbHJlYWR5IGF0IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA9PT0gY2VudGVyKSByZXR1cm4gY2VudGVyO1xuXG4gIC8vIG51bWJlciBpcyBoaWdoZXIgdGhhbiB0aGUgY2VudGVyOyBzdWJ0cmFjdCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgaWYgKG51bSA+IGNlbnRlcikge1xuICAgIGNvbnN0IG5ld051bSA9IG51bSAtIGJ5O1xuICAgIHJldHVybiBuZXdOdW0gPCBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG4gIH1cblxuICAvLyBudW1iZXIgaXMgbG93ZXIgdGhhbiB0aGUgY2VudGVyOyBhZGQgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGNvbnN0IG5ld051bSA9IG51bSArIGJ5O1xuICByZXR1cm4gbmV3TnVtID4gY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJvdW5kID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgaWYgKG51bSA8IHJlYWxNaW4pIHJldHVybiByZWFsTWluO1xuICBpZiAobnVtID4gcmVhbE1heCkgcmV0dXJuIHJlYWxNYXg7XG4gIHJldHVybiBudW07XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBpbmNsdXNpdmUgPSB0cnVlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICByZXR1cm4gaW5jbHVzaXZlID8gKG51bSA+PSByZWFsTWluICYmIG51bSA8PSByZWFsTWF4KSA6IChudW0gPiByZWFsTWluICYmIG51bSA8IHJlYWxNYXgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpZmZlcmVuY2UgPSAobjogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5hYnMobiAtIG0pO1xuIiwiaW1wb3J0IE1hc3MgZnJvbSBcIi4vTWFzc1wiO1xuaW1wb3J0IHsgYmV0d2VlbiwgZGlmZmVyZW5jZSB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xuXG5leHBvcnQgY29uc3QgR1JBVklUWV9YID0gMDsgLy8gcHgvZnJeMlxuZXhwb3J0IGNvbnN0IEdSQVZJVFlfWSA9IDE7IC8vIHB4L2ZyXjJcbmV4cG9ydCBjb25zdCBBSVJfUkVTSVNUQU5DRSA9IDAuMjU7IC8vIFRPRE9cbmV4cG9ydCBjb25zdCBGUklDVElPTiA9IDAuMjU7IC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIGRlcGVuZGVudCBvbiBtYXNzXG5leHBvcnQgY29uc3QgTk9STUFMX0RSQUcgPSAxMDA7IC8vIHN1cmZhY2UgYXJlYSBpbiBwaXhlbHMsIHBlciBraWxvZ3JhbVxuXG5pbnRlcmZhY2UgUG9pbnQge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE92ZXJsYXAge1xuICB0b3A6IG51bWJlcjtcbiAgYm90dG9tOiBudW1iZXI7XG4gIGxlZnQ6IG51bWJlcjtcbiAgcmlnaHQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE92ZXJsYXBzIHtcbiAgc29saWQ6IE92ZXJsYXA7XG4gIGVwaGVtZXJhbDogT3ZlcmxhcDtcbn1cblxuY2xhc3MgVW5pdmVyc2Uge1xuICBwdWJsaWMgbWFzc2VzID0gW10gYXMgTWFzc1tdO1xuXG4gIGNvbGxpc2lvbnNGb3JNb3ZlKHN1YmplY3Q6IE1hc3MsIHRvUG9zaXRpb246IFBvaW50KTogT3ZlcmxhcHMge1xuICAgIGNvbnN0IG1vdmVkU3ViamVjdCA9IG5ldyBNYXNzKHtcbiAgICAgIC4uLnN1YmplY3QsXG4gICAgICAuLi50b1Bvc2l0aW9uLFxuICAgICAgZGFya01hdHRlcjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGR4ID0gbW92ZWRTdWJqZWN0LnggLSBzdWJqZWN0Lng7XG4gICAgY29uc3QgZHkgPSBtb3ZlZFN1YmplY3QueSAtIHN1YmplY3QueTtcbiAgICBjb25zdCBtb3ZpbmcgPSB7XG4gICAgICB1cDogZHkgPCAwLFxuICAgICAgZG93bjogZHkgPiAwLFxuICAgICAgbGVmdDogZHggPCAwLFxuICAgICAgcmlnaHQ6IGR4ID4gMCxcbiAgICB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICByZXR1cm4gdGhpcy5tYXNzZXMucmVkdWNlKChvdmVybGFwcywgb2JzdGFjbGUpID0+IHtcbiAgICAgIGlmIChvYnN0YWNsZSA9PT0gc3ViamVjdCkgcmV0dXJuIG92ZXJsYXBzO1xuXG4gICAgICBjb25zdCBoaXR0aW5nT2JzdGFjbGUgPSBtb3ZlZFN1YmplY3QuaXNIaXR0aW5nKG9ic3RhY2xlKTtcbiAgICAgIGlmICghaGl0dGluZ09ic3RhY2xlKSByZXR1cm4gb3ZlcmxhcHM7XG5cbiAgICAgIGNvbnN0IG92ZXJsYXAgPSBvYnN0YWNsZS5zb2xpZCA/IG92ZXJsYXBzLnNvbGlkIDogb3ZlcmxhcHMuZXBoZW1lcmFsO1xuICAgICAgaWYgKG1vdmluZy51cCAmJiBiZXR3ZWVuKG9ic3RhY2xlLmJvdHRvbSwgc3ViamVjdC50b3AsIG1vdmVkU3ViamVjdC50b3ApKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS5ib3R0b20sIG1vdmVkU3ViamVjdC50b3ApO1xuICAgICAgICBpZiAob3ZlcmxhcC50b3AgPCBkaXN0YW5jZSkgb3ZlcmxhcC50b3AgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdmluZy5kb3duICYmIGJldHdlZW4ob2JzdGFjbGUudG9wLCBzdWJqZWN0LmJvdHRvbSwgbW92ZWRTdWJqZWN0LmJvdHRvbSkpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaWZmZXJlbmNlKG9ic3RhY2xlLnRvcCwgbW92ZWRTdWJqZWN0LmJvdHRvbSk7XG4gICAgICAgIGlmIChvdmVybGFwLmJvdHRvbSA8IGRpc3RhbmNlKSBvdmVybGFwLmJvdHRvbSA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICBpZiAobW92aW5nLmxlZnQgJiYgYmV0d2VlbihvYnN0YWNsZS5yaWdodCwgc3ViamVjdC5sZWZ0LCBtb3ZlZFN1YmplY3QubGVmdCkpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaWZmZXJlbmNlKG9ic3RhY2xlLnJpZ2h0LCBtb3ZlZFN1YmplY3QubGVmdCk7XG4gICAgICAgIGlmIChvdmVybGFwLmxlZnQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5sZWZ0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb3ZpbmcucmlnaHQgJiYgYmV0d2VlbihvYnN0YWNsZS5sZWZ0LCBzdWJqZWN0LnJpZ2h0LCBtb3ZlZFN1YmplY3QucmlnaHQpKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS5sZWZ0LCBtb3ZlZFN1YmplY3QucmlnaHQpO1xuICAgICAgICBpZiAob3ZlcmxhcC5yaWdodCA8IGRpc3RhbmNlKSBvdmVybGFwLnJpZ2h0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdmVybGFwcztcbiAgICB9LCB7XG4gICAgICBzb2xpZDoge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICB9LFxuICAgICAgZXBoZW1lcmFsOiB7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuICB9XG5cbiAgb3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdDogTWFzcywgeyBpZ25vcmUgPSBbXSB9OiB7IGlnbm9yZT86IE1hc3NbXSB9ID0ge30pOiBNYXNzW10ge1xuICAgIHJldHVybiB0aGlzLm1hc3Nlcy5maWx0ZXIoKG1hc3MpID0+IHtcbiAgICAgIGlmIChzdWJqZWN0ID09PSBtYXNzIHx8IGlnbm9yZS5pbmNsdWRlcyhtYXNzKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHN1YmplY3QuaXNIaXR0aW5nKG1hc3MpO1xuICAgIH0pO1xuICB9XG5cbiAgb3ZlcmxhcChzdWJqZWN0OiBNYXNzLCB7IGlnbm9yZSA9IFtdIH06IHsgaWdub3JlPzogTWFzc1tdIH0gPSB7fSk6IE92ZXJsYXAge1xuICAgIGNvbnN0IG1hc3NlcyA9IHRoaXMub3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdCwgeyBpZ25vcmUgfSk7XG4gICAgLyoqXG4gICAgICogLC0tLS0sXG4gICAgICogfCAgICB8IDw9IHN1YmplY3RcbiAgICAgKiAnLS0tLSdcbiAgICAgKiAuLi4uLi5cbiAgICAgKiA6ICAgIDogPD0gbWFzc1xuICAgICAqIGBgYGBgYFxuICAgICAqL1xuICAgIHJldHVybiBtYXNzZXMucmVkdWNlKChtZW1vOiBPdmVybGFwLCBtYXNzKSA9PiB7XG4gICAgICBjb25zdCBvdmVybGFwID0gbWVtbztcblxuICAgICAgLyoqXG4gICAgICAgKiAsLS0tLSwgICAgLC0tLS0sICAgICwtLi0tLC4uICAgICwtLS0tLCAgICAsLS0tLSwgIC4uLC0tLi0sICAgICwtLS0tLCAgICAgICwtLS0tLCAgICAuLiwtLS0tLC4uXG4gICAgICAgKiB8ICAgIHwgICAgfCAuLi58Li4gIHwgOiAgfCA6ICAgIHwgICAgfCAgLi58Li4uIHwgIDogfCAgOiB8ICAgIHwgICAgfCAgICAuLnwuLi4ufC4uICA6IHwgICAgfCA6XG4gICAgICAgKiAnLS4tLScuLiAgJy06LS0nIDogICctLS0tJ2BgICAuLictLS4tJyAgOiAnLS06LScgIGBgJy0tLS0nICAuLictLS0tJy4uICA6ICctLS0tJyA6ICBgYCctLS0tJ2BgXG4gICAgICAgKiAgIDogICAgOiAgICBgYGBgYGAgICAgICAgICAgICA6ICAgIDogICAgYGBgYGBgICAgICAgICAgICAgICA6ICAgICAgICA6ICBgYGBgYGBgYGBgXG4gICAgICAgKiAgIGBgYGBgYCAgICAgICAgICAgICAgICAgICAgICBgYGBgYGAgICAgICAgICAgICAgICAgICAgICAgICBgYGBgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NUb3BPdmVybGFwID0gbWFzcy50b3AgPj0gc3ViamVjdC50b3AgJiYgbWFzcy50b3AgPD0gc3ViamVjdC5ib3R0b207XG4gICAgICBpZiAobWFzc1RvcE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBzdWJqZWN0LmJvdHRvbSAtIG1hc3MudG9wO1xuICAgICAgICBpZiAob3ZlcmxhcC5ib3R0b20gPCBkaXN0YW5jZSkgb3ZlcmxhcC5ib3R0b20gPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAuLi4uLi4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLi4uLiAgICAgICAgICAgICAgICAgICAgIC4uLi4uLi4uLi5cbiAgICAgICAqIDogICAgOiAgICAuLi4uLi4gICAgICAgICAgICAgICAgOiAgICA6ICAgLi4uLi4uICAgICAgICAgICAgOiAgICAgICAgOiAgLi4uLi4uLi4uLlxuICAgICAgICogYGAsLS0tLSwgIDogLC0tOi0sICAuLiwtLS0tLCAgLC1gLS0sYGAgLC06LS0sIDogICwtLS0tLC4uICBgYCwtLS0tLGBgICA6ICwtLS0tLCA6ICAuLiwtLS0tLC4uXG4gICAgICAgKiAgIHwgICAgfCAgYGB8YGBgIHwgIDogfCAgOiB8ICB8ICAgIHwgICB8IGBgYHxgYCAgfCA6ICB8IDogICAgfCAgICB8ICAgIGBgfGBgYGB8YGAgIDogfCAgICB8IDpcbiAgICAgICAqICAgJy0tLS0nICAgICctLS0tJyAgYGAnLS1gLScgICctLS0tJyAgICctLS0tJyAgICAnLWAtLSdgYCAgICAnLS0tLScgICAgICAnLS0tLScgICAgYGAnLS0tLSdgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzQm90dG9tT3ZlcmxhcCA9IG1hc3MuYm90dG9tIDw9IHN1YmplY3QuYm90dG9tICYmIG1hc3MuYm90dG9tID49IHN1YmplY3QudG9wO1xuICAgICAgaWYgKG1hc3NCb3R0b21PdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbWFzcy5ib3R0b20gLSBzdWJqZWN0LnRvcDtcbiAgICAgICAgaWYgKG92ZXJsYXAudG9wIDwgZGlzdGFuY2UpIG92ZXJsYXAudG9wID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHxgYGBgYFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLi06LS0uIDpcbiAgICAgICAqIHwgYGBgfGBgXG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8YGBgYHxcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8ICAgIHwuLi4uLlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwgLi4ufC4uXG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfC4uLi58XG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHwgICAgOlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLC06LS0sIDpcbiAgICAgICAqIHwgOiAgfCA6XG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8ICAgIHxcbiAgICAgICAqIDotLS0tOlxuICAgICAgICogYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NMZWZ0T3ZlcmxhcCA9IG1hc3MubGVmdCA+PSBzdWJqZWN0LmxlZnQgJiYgbWFzcy5sZWZ0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc0xlZnRPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ViamVjdC5yaWdodCAtIG1hc3MubGVmdDtcbiAgICAgICAgaWYgKG92ZXJsYXAucmlnaHQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5yaWdodCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOiAgICA6LS0tLSxcbiAgICAgICAqIGBgYGBgfCAgICB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgLi4uLi4uXG4gICAgICAgKiAgICA6ICwtLTotLFxuICAgICAgICogICAgYGB8YGBgIHxcbiAgICAgICAqICAgICAgJy0tLS0nXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgfGBgYGB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqIC4uLi4ufCAgICB8XG4gICAgICAgKiA6ICAgIDotLS0tJ1xuICAgICAgICogYGBgYGBgXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogICAgLi58Li4uIHxcbiAgICAgICAqICAgIDogJy0tOi0nXG4gICAgICAgKiAgICBgYGBgYGBcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAgICAgIHwuLi4ufFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgLi4uLi4uXG4gICAgICAgKiAgOiAgICAsLS0tLSxcbiAgICAgICAqICA6ICAgIHwgICAgfFxuICAgICAgICogIDogICAgJy0tLS0nXG4gICAgICAgKiAgYGBgYGBgXG4gICAgICAgKiAgICAuLi4uLi5cbiAgICAgICAqICAgIDogLC0tOi0sXG4gICAgICAgKiAgICA6IHwgIDogfFxuICAgICAgICogICAgOiAnLS06LSdcbiAgICAgICAqICAgIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIHwgICAgfFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NSaWdodE92ZXJsYXAgPSBtYXNzLnJpZ2h0ID49IHN1YmplY3QubGVmdCAmJiBtYXNzLnJpZ2h0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc1JpZ2h0T3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG1hc3MucmlnaHQgLSBzdWJqZWN0LmxlZnQ7XG4gICAgICAgIGlmIChvdmVybGFwLmxlZnQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5sZWZ0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEknbSBtaXNzaW5nIHRvdGFsIG92ZXJsYXBzIGFuZCB0b3RhbCBlY2xpcHNlcyBidXQgSSBkb24ndCBnaXZlIGEgc2hpdFxuICAgICAgcmV0dXJuIG92ZXJsYXA7XG4gICAgfSwge1xuICAgICAgdG9wOiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICBib3R0b206IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHVuaXZlcnNlID0gbmV3IFVuaXZlcnNlKCk7XG5leHBvcnQgZGVmYXVsdCB1bml2ZXJzZTtcbiIsImltcG9ydCB1bml2ZXJzZSwgeyBHUkFWSVRZX1gsIEdSQVZJVFlfWSwgRlJJQ1RJT04sIE5PUk1BTF9EUkFHIH0gZnJvbSBcIi4vdW5pdmVyc2VcIjtcbmltcG9ydCB7IGRhbXBlbiwgYm91bmQgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuY29uc3QgdXBkYXRlRGltZW5zaW9uID0gKFxuICBwb3NpdGlvbjogbnVtYmVyLFxuICB2ZWxvY2l0eTogbnVtYmVyLFxuICBhY2NlbGVyYXRpb246IG51bWJlcixcbiAgbWluOiBudW1iZXIsXG4gIG1heDogbnVtYmVyLFxuKTogeyBwb3NpdGlvbjogbnVtYmVyOyB2ZWxvY2l0eTogbnVtYmVyIH0gPT4ge1xuICBsZXQgbmV3UG9zaXRpb24gPSBwb3NpdGlvbiArIHZlbG9jaXR5O1xuICBsZXQgbmV3VmVsb2NpdHkgPSB2ZWxvY2l0eSArIGFjY2VsZXJhdGlvbjtcbiAgaWYgKG5ld1Bvc2l0aW9uID4gbWF4KSB7XG4gICAgbmV3UG9zaXRpb24gPSBtYXg7XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9IGVsc2UgaWYgKG5ld1Bvc2l0aW9uIDwgbWluKSB7XG4gICAgbmV3UG9zaXRpb24gPSBtaW47XG4gICAgbmV3VmVsb2NpdHkgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogbmV3UG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IG5ld1ZlbG9jaXR5LFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFzcyB7XG4gIHB1YmxpYyBtYXNzID0gMTsgLy8ga2dcbiAgcHVibGljIHggPSAwOyAvLyBweFxuICBwdWJsaWMgeSA9IDA7IC8vIHB4XG4gIHB1YmxpYyBkeCA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyBkeSA9IDA7IC8vIHB4L2ZyXG4gIHB1YmxpYyB3aWR0aCA9IDI1OyAvLyBweFxuICBwdWJsaWMgaGVpZ2h0ID0gMjU7IC8vIHB4XG4gIHB1YmxpYyBzdGF0aW9uYXJ5ID0gZmFsc2U7IC8vIGRvZXNuJ3QgbW92ZVxuICBwdWJsaWMgZGFya01hdHRlciA9IGZhbHNlOyAvLyBkb2Vzbid0IGludGVyYWN0XG4gIHB1YmxpYyBzb2xpZCA9IHRydWU7IC8vIGNhbid0IHBhc3MgdGhyb3VnaCBpdFxuICBwdWJsaWMgY29sbGVjdE9uVG91Y2ggPSBmYWxzZTtcbiAgcHVibGljIHRvdWNoZWRBdCA9IG51bGwgYXMgbnVsbHxudW1iZXI7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IFBhcnRpYWw8TWFzcz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghdGhpcy5kYXJrTWF0dGVyKSB1bml2ZXJzZS5tYXNzZXMucHVzaCh0aGlzKTtcbiAgfVxuXG4gIGdldCBkcmFnQ29lZmZpY2llbnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzdXJmYWNlQXJlYSA9ICgyICogdGhpcy53aWR0aCkgKyAoMiAqIHRoaXMuaGVpZ2h0KTtcbiAgICByZXR1cm4gKHN1cmZhY2VBcmVhIC8gdGhpcy5tYXNzKSAvIE5PUk1BTF9EUkFHO1xuICB9XG5cbiAgZ2V0IGF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnN0YXRpb25hcnkgPyAwIDogR1JBVklUWV9YOyB9XG4gIGdldCBheSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zdGF0aW9uYXJ5ID8gMCA6IEdSQVZJVFlfWTsgfVxuXG4gIGdldCBpc0FnYWluc3RUb3BXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSAwOyB9XG4gIGdldCBpc0FnYWluc3RCb3R0b21XYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmhlaWdodDsgfVxuICBnZXQgaXNBZ2FpbnN0TGVmdFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnggPT09IDA7IH1cbiAgZ2V0IGlzQWdhaW5zdFJpZ2h0V2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueCA9PT0gd2luZG93LmlubmVyV2lkdGggLSB0aGlzLndpZHRoOyB9XG5cbiAgZ2V0IHRlcm1pbmFsVmVsb2NpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMjA7IC8vIFRPRE86IHNob3VsZCBiZSBiYXNlZCBvbiBkcmFnXG4gIH1cblxuICBnZXQgdG9wKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnk7IH1cbiAgZ2V0IHJpZ2h0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnggKyB0aGlzLndpZHRoOyB9XG4gIGdldCBib3R0b20oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0OyB9XG4gIGdldCBsZWZ0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLng7IH1cblxuICB1cGRhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgbmV3WERhdGEgPSB1cGRhdGVEaW1lbnNpb24odGhpcy54LCB0aGlzLmR4LCB0aGlzLmF4LCB0aGlzLndpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMud2lkdGgpO1xuICAgIGNvbnN0IG5ld1lEYXRhID0gdXBkYXRlRGltZW5zaW9uKHRoaXMueSwgdGhpcy5keSwgdGhpcy5heSwgdGhpcy5oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuaGVpZ2h0KTtcblxuICAgIGxldCBuZXdYID0gbmV3WERhdGEucG9zaXRpb247XG4gICAgbGV0IG5ld1kgPSBuZXdZRGF0YS5wb3NpdGlvbjtcbiAgICBsZXQgbmV3RHggPSBuZXdYRGF0YS52ZWxvY2l0eTtcbiAgICBsZXQgbmV3RHkgPSBuZXdZRGF0YS52ZWxvY2l0eTtcblxuICAgIGNvbnN0IG92ZXJsYXBzID0gdW5pdmVyc2UuY29sbGlzaW9uc0Zvck1vdmUodGhpcywgeyB4OiBuZXdYLCB5OiBuZXdZIH0pO1xuICAgIGNvbnN0IHNvbGlkT3ZlcmxhcCA9IG92ZXJsYXBzLnNvbGlkO1xuXG4gICAgaWYgKHNvbGlkT3ZlcmxhcC5yaWdodCA+IDApIHtcbiAgICAgIG5ld1ggLT0gc29saWRPdmVybGFwLnJpZ2h0O1xuICAgICAgbmV3RHggPSAwO1xuICAgIH0gZWxzZSBpZiAoc29saWRPdmVybGFwLmxlZnQgPiAwKSB7XG4gICAgICBuZXdYICs9IHNvbGlkT3ZlcmxhcC5sZWZ0O1xuICAgICAgbmV3RHggPSAwO1xuICAgIH1cblxuICAgIGlmIChzb2xpZE92ZXJsYXAuYm90dG9tID4gMCkge1xuICAgICAgbmV3WSAtPSBzb2xpZE92ZXJsYXAuYm90dG9tO1xuICAgICAgbmV3RHkgPSAwO1xuICAgIH0gZWxzZSBpZiAoc29saWRPdmVybGFwLnRvcCA+IDApIHtcbiAgICAgIG5ld1kgKz0gc29saWRPdmVybGFwLnRvcDtcbiAgICAgIG5ld0R5ID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnggPSBuZXdYO1xuICAgIHRoaXMueSA9IG5ld1k7XG5cbiAgICBpZiAodGhpcy5pc0FnYWluc3RUb3BXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0Qm90dG9tV2FsbCB8fCBzb2xpZE92ZXJsYXAudG9wIHx8IHNvbGlkT3ZlcmxhcC5ib3R0b20pIHtcbiAgICAgIG5ld0R4ID0gZGFtcGVuKG5ld0R4LCBGUklDVElPTik7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzQWdhaW5zdExlZnRXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0UmlnaHRXYWxsIHx8IHNvbGlkT3ZlcmxhcC5sZWZ0IHx8IHNvbGlkT3ZlcmxhcC5yaWdodCkge1xuICAgICAgbmV3RHkgPSBkYW1wZW4obmV3RHksIEZSSUNUSU9OKTtcbiAgICB9XG5cbiAgICB0aGlzLmR4ID0gYm91bmQobmV3RHgsIC0xICogdGhpcy50ZXJtaW5hbFZlbG9jaXR5LCB0aGlzLnRlcm1pbmFsVmVsb2NpdHkpO1xuICAgIHRoaXMuZHkgPSBib3VuZChuZXdEeSwgLTEgKiB0aGlzLnRlcm1pbmFsVmVsb2NpdHksIHRoaXMudGVybWluYWxWZWxvY2l0eSk7XG4gIH1cblxuICBpc0hpdHRpbmcobWFzczogTWFzcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnJpZ2h0ID49IG1hc3MubGVmdFxuICAgICAgJiYgdGhpcy5sZWZ0IDw9IG1hc3MucmlnaHRcbiAgICAgICYmIHRoaXMuYm90dG9tID49IG1hc3MudG9wXG4gICAgICAmJiB0aGlzLnRvcCA8PSBtYXNzLmJvdHRvbVxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHB1YmxpYyB4ID0gMDtcbiAgcHVibGljIHkgPSAwO1xuICBwdWJsaWMgcHJlc3NlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMueCA9IGV2ZW50Lng7XG4gICAgdGhpcy55ID0gZXZlbnQueTtcbiAgICB0aGlzLnByZXNzZWQgPSBldmVudC5idXR0b25zID09PSAxO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdG91Y2hlcyB9ID0gZXZlbnQ7XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaGVzWzBdO1xuICAgICAgdGhpcy54ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHRoaXMueSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBtb3VzZSA9IG5ldyBNb3VzZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3VzZTtcbiIsImltcG9ydCB7IHJhbmQsIGJvdW5kIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXIge1xuICBwdWJsaWMgeDogbnVtYmVyO1xuICBwdWJsaWMgeTogbnVtYmVyO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyO1xuICBwdWJsaWMgYnJpZ2h0bmVzczogbnVtYmVyO1xuICBwdWJsaWMgdmVjdG9yOiByZWFkb25seSBbbnVtYmVyLCBudW1iZXJdO1xuXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyLCB7IHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9OiBQYXJ0aWFsPFN0YXI+ID0ge30pIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5zaXplID0gc2l6ZSB8fCByYW5kKDEsIDUpO1xuICAgIGNvbnN0IGJhc2VCcmlnaHRuZXNzID0gKHR5cGVvZiBicmlnaHRuZXNzID09PSAndW5kZWZpbmVkJyA/IE1hdGgucmFuZG9tKCkgOiBicmlnaHRuZXNzKTtcbiAgICB0aGlzLmJyaWdodG5lc3MgPSBib3VuZChiYXNlQnJpZ2h0bmVzcywgMCwgMSk7XG4gICAgdGhpcy52ZWN0b3IgPSB2ZWN0b3IgfHwgWy0xLCAxXTtcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cblxuaW1wb3J0IHsgY3R4IH0gZnJvbSAnLi9jYW52YXMnO1xuaW1wb3J0IGdhbWVMb29wIGZyb20gJy4vZ2FtZUxvb3AnO1xuaW1wb3J0IE1hc3MgZnJvbSAnLi9NYXNzJztcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9QbGF5ZXInO1xuaW1wb3J0IHsgcmFuZ2UsIHJhbmQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5pbXBvcnQgU3RhciBmcm9tICcuL1N0YXInO1xuXG5jb25zdCBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FID0gMjAwO1xuY29uc3QgTUFYX1ggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbmNvbnN0IE1BWF9ZID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG5cbmNvbnN0IHNvbGlkTWFzc2VzID0gcmFuZ2UoMTApLm1hcCgoKSA9PiB7XG4gIHJldHVybiBuZXcgTWFzcyh7XG4gICAgeDogcmFuZCgwLCBNQVhfWCksXG4gICAgeTogcmFuZCgwLCBNQVhfWSksXG4gICAgd2lkdGg6IHJhbmQoNTAsIDE1MCksXG4gICAgaGVpZ2h0OiByYW5kKDUwLCAxNTApLFxuICAgIHN0YXRpb25hcnk6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IGNvbGxlY3RpYmxlcyA9IHJhbmdlKDEwKS5tYXAoKCkgPT4ge1xuICByZXR1cm4gbmV3IE1hc3Moe1xuICAgIG1hc3M6IHJhbmQoMC41LCA1KSxcbiAgICB4OiByYW5kKDAsIE1BWF9YKSxcbiAgICB5OiByYW5kKDAsIE1BWF9ZKSxcbiAgICB3aWR0aDogMjUsXG4gICAgaGVpZ2h0OiAyNSxcbiAgICBzb2xpZDogZmFsc2UsXG4gICAgc3RhdGlvbmFyeTogZmFsc2UsXG4gICAgY29sbGVjdE9uVG91Y2g6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IG1hc3NlcyA9IFsuLi5zb2xpZE1hc3NlcywgLi4uY29sbGVjdGlibGVzXTtcbmNvbnN0IGZyZWVNYXNzZXMgPSBbcGxheWVyLCAuLi5tYXNzZXMuZmlsdGVyKG1hc3MgPT4gIW1hc3Muc3RhdGlvbmFyeSldO1xubGV0IHBvaW50cyA9IDA7XG5jb25zdCBtYXhQb2ludHMgPSBjb2xsZWN0aWJsZXMubGVuZ3RoO1xuXG5jb25zdCBzdGFycyA9IHJhbmdlKDEwMCwgKCkgPT4gbmV3IFN0YXIocmFuZCgwLCBNQVhfWCksIHJhbmQoMCwgTUFYX1kpKSk7XG5cbmNvbnN0IHNob290aW5nU3RhcnMgPSBbXSBhcyBTdGFyW107XG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGNvbnN0IFt4LCB5XSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyBbcmFuZCgyNTAsIE1BWF9YKSwgMF0gOiBbTUFYX1gsIHJhbmQoMCwgTUFYX1kgLSAyNTApXTtcbiAgY29uc3QgdmVjdG9yID0gWy0xMCwgMTBdIGFzIGNvbnN0O1xuICBzaG9vdGluZ1N0YXJzLnB1c2gobmV3IFN0YXIoeCwgeSwgeyBicmlnaHRuZXNzOiAxLCB2ZWN0b3IgfSkpO1xufSwgMjAwMCk7XG5cbmdhbWVMb29wKGN0eCwgKGxvb3BDb3VudCkgPT4ge1xuICAvLyBjb25zdCBlZGdlRGlzdGFuY2VYID0gTWF0aC5taW4ocGxheWVyLmxlZnQgLyB3aW5kb3cuaW5uZXJXaWR0aCwgKHdpbmRvdy5pbm5lcldpZHRoIC0gcGxheWVyLnJpZ2h0KSAvIHdpbmRvdy5pbm5lcldpZHRoKTtcbiAgLy8gY29uc3QgZWRnZURpc3RhbmNlWSA9IE1hdGgubWluKHBsYXllci50b3AgLyB3aW5kb3cuaW5uZXJIZWlnaHQsICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBwbGF5ZXIuYm90dG9tKSAvIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIC8vIGlmIChlZGdlRGlzdGFuY2VYIDwgMC4yNSB8fCBlZGdlRGlzdGFuY2VZIDwgMC4yNSkge1xuICAvLyAgIGNvbnNvbGUubG9nKGB4OiAke2VkZ2VEaXN0YW5jZVh9LCB5OiAke2VkZ2VEaXN0YW5jZVl9Li4uIHNoaWZ0IWApO1xuICAvLyB9XG5cbiAgc3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IHgsIHksIHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9ID0gc3RhcjtcbiAgICBjb25zdCB0d2lua2xlID0gYnJpZ2h0bmVzcyAtIE1hdGgucmFuZG9tKCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7KGxvb3BDb3VudCArIGluZGV4KSAlIDIwID09PSAwID8gdHdpbmtsZSA6IGJyaWdodG5lc3N9KWA7XG4gICAgY3R4LmZpbGxSZWN0KHgsIHksIHNpemUsIHNpemUpO1xuICAgIHN0YXIueCArPSB2ZWN0b3JbMF07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBzdGFyLnkgKz0gdmVjdG9yWzFdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgaWYgKHN0YXIueCA8IDAgfHwgc3Rhci54ID4gTUFYX1ggfHwgc3Rhci55IDwgMCB8fCBzdGFyLnkgPiBNQVhfWSkge1xuICAgICAgY29uc3QgW25ld1gsIG5ld1ldID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IFtyYW5kKDAsIE1BWF9YKSwgMF0gOiBbTUFYX1gsIHJhbmQoMCwgTUFYX1kpXTtcbiAgICAgIHN0YXIueCA9IG5ld1g7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIHN0YXIueSA9IG5ld1k7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB9XG4gIH0pO1xuXG4gIHNob290aW5nU3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IHgsIHksIHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9ID0gc3RhcjtcbiAgICBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDI1NSwgJHticmlnaHRuZXNzfSlgO1xuICAgIGN0eC5maWxsUmVjdCh4LCB5LCBzaXplLCBzaXplKTtcbiAgICBzdGFyLnggKz0gdmVjdG9yWzBdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgc3Rhci55ICs9IHZlY3RvclsxXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGlmIChzdGFyLnggPCAwIHx8IHN0YXIueCA+IE1BWF9YIHx8IHN0YXIueSA8IDAgfHwgc3Rhci55ID4gTUFYX1kpIHtcbiAgICAgIHNob290aW5nU3RhcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIG1hc3Nlcy5mb3JFYWNoKChtYXNzLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGhpdHRpbmdNYXNzID0gcGxheWVyLmlzSGl0dGluZyhtYXNzKTtcbiAgICBsZXQgc3RpbGxQcmVzZW50ID0gdHJ1ZTtcblxuICAgIGlmIChtYXNzLnNvbGlkKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjcpJztcbiAgICB9IGVsc2UgaWYgKGhpdHRpbmdNYXNzICYmICFtYXNzLnRvdWNoZWRBdCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDI1NSwgMC44KSc7XG4gICAgICBtYXNzLnRvdWNoZWRBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBwbGF5ZXIuZnVlbCArPSAwLjI1ICogcGxheWVyLk1BWF9GVUVMO1xuICAgIH0gZWxzZSBpZiAobWFzcy5jb2xsZWN0T25Ub3VjaCAmJiBtYXNzLnRvdWNoZWRBdCkge1xuICAgICAgY29uc3QgbXNTaW5jZVRvdWNoID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBtYXNzLnRvdWNoZWRBdDtcbiAgICAgIGlmIChtc1NpbmNlVG91Y2ggPiBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FKSB7XG4gICAgICAgIG1hc3Nlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBzdGlsbFByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgcG9pbnRzICs9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZ1ZhbHVlID0gTWF0aC5jZWlsKChtc1NpbmNlVG91Y2ggLyBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FKSAqIDI1NSk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgke3JnVmFsdWV9LCAke3JnVmFsdWV9LCAyNTUsIDAuOClgO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMTAwLCAyNTUsIDAuOCknO1xuICAgIH1cblxuICAgIGlmIChzdGlsbFByZXNlbnQpIGN0eC5maWxsUmVjdChtYXNzLngsIG1hc3MueSwgbWFzcy53aWR0aCwgbWFzcy5oZWlnaHQpO1xuICB9KTtcblxuICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMTUwLCAwLCAxKSc7XG4gIGN0eC5maWxsUmVjdChwbGF5ZXIueCwgcGxheWVyLnksIHBsYXllci53aWR0aCwgcGxheWVyLmhlaWdodCk7XG5cbiAgY29uc3QgZmFjZW1hc2tDb2xvciA9ICdyZ2JhKDIyMCwgMjIwLCAyNTUsIDEpJztcbiAgY29uc3QgZmFjZW1hc2tXaWR0aCA9IHBsYXllci53aWR0aCAvIDI7XG4gIGNvbnN0IGZhY2VtYXNrSGVpZ2h0ID0gcGxheWVyLmhlaWdodCAvIDU7XG4gIGNvbnN0IGZhY2VtYXNrT2Zmc2V0WSA9IDM7XG4gIGN0eC5maWxsU3R5bGUgPSBmYWNlbWFza0NvbG9yO1xuICBzd2l0Y2ggKHBsYXllci5idXJuZXJYU2lkZSkge1xuICAgIGNhc2UgJ2xlZnQnOiBjdHguZmlsbFJlY3QocGxheWVyLnggKyAocGxheWVyLndpZHRoIC0gZmFjZW1hc2tXaWR0aCksIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICAgIGNhc2UgJ3JpZ2h0JzogY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSArIGZhY2VtYXNrT2Zmc2V0WSwgZmFjZW1hc2tXaWR0aCwgZmFjZW1hc2tIZWlnaHQpOyBicmVhaztcbiAgICBkZWZhdWx0OiBjdHguZmlsbFJlY3QocGxheWVyLnggKyAoKHBsYXllci53aWR0aCAtIGZhY2VtYXNrV2lkdGgpIC8gMiksIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICB9XG5cbiAgY29uc3QgYnVybmVyQ29sb3IgPSBgcmdiYSgyNTUsIDEwMCwgMCwgJHtyYW5kKDAuNSwgMC43NSl9KWA7XG4gIGNvbnN0IGJ1cm5lckxlbmd0aFggPSByYW5kKDAuMjUsIDAuNCkgKiBwbGF5ZXIud2lkdGg7XG4gIGNvbnN0IGJ1cm5lckxlbmd0aFkgPSByYW5kKDAuNCwgMC42KSAqIHBsYXllci5oZWlnaHQ7XG4gIGNvbnN0IGJ1cm5lckFjcm9zcyA9ICh3aWR0aDogbnVtYmVyKTogbnVtYmVyID0+IDAuNiAqIHdpZHRoO1xuICBjb25zdCBidXJuZXJBY3Jvc3NPZmZzZXQgPSAod2lkdGg6IG51bWJlcik6IG51bWJlciA9PiAod2lkdGggLSBidXJuZXJBY3Jvc3Mod2lkdGgpKSAvIDI7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IGJ1cm5lckNvbG9yO1xuICBzd2l0Y2ggKHBsYXllci5idXJuZXJYU2lkZSkge1xuICAgIGNhc2UgJ2xlZnQnOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCAtIGJ1cm5lckxlbmd0aFgsIC8vIHBvc2l0aW9uZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgcGxheWVyXG4gICAgICBwbGF5ZXIueSArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIuaGVpZ2h0KSwgLy8gY2VudGVyZWQgb24gdGhlIFkgYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWCwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIuaGVpZ2h0KSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgY2FzZSAncmlnaHQnOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCArIHBsYXllci53aWR0aCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgcGxheWVyXG4gICAgICBwbGF5ZXIueSArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIuaGVpZ2h0KSwgLy8gY2VudGVyZWQgb24gdGhlIFkgYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWCwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIuaGVpZ2h0KSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogYnJlYWs7XG4gIH1cbiAgc3dpdGNoIChwbGF5ZXIuYnVybmVyWVNpZGUpIHtcbiAgICBjYXNlICdib3R0b20nOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIud2lkdGgpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWCBheGlzXG4gICAgICBwbGF5ZXIueSArIHBsYXllci5oZWlnaHQsIC8vIHBvc2l0aW9uZWQgb24gdGhlIGJvdHRvbSBvZiB0aGUgcGxheWVyXG4gICAgICBidXJuZXJBY3Jvc3MocGxheWVyLndpZHRoKSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWCBheGlzXG4gICAgICBidXJuZXJMZW5ndGhZLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFkgYXhpc1xuICAgICk7IGJyZWFrO1xuICAgIGNhc2UgJ3RvcCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci53aWR0aCksIC8vIGNlbnRlcmVkIG9uIHRoZSBYIGF4aXNcbiAgICAgIHBsYXllci55IC0gYnVybmVyTGVuZ3RoWSwgLy8gcG9zaXRpb25lZCBvbiB0aGUgdG9wIG9mIHRoZSBwbGF5ZXJcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIud2lkdGgpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFksIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogYnJlYWs7XG4gIH1cblxuICBjdHguZm9udCA9IFwiMzBweCBDb3VyaWVyXCI7XG4gIGN0eC5maWxsU3R5bGUgPSAnI0ZGRic7XG4gIGNvbnN0IHNjb3JlVGV4dCA9IGAke3BvaW50c30vJHttYXhQb2ludHN9JHtwb2ludHMgPT09IG1heFBvaW50cyA/ICcgYXd3IHllZScgOiAnJ31gO1xuICBjdHguZmlsbFRleHQoc2NvcmVUZXh0LCA1MCwgNTApO1xuXG4gIGNvbnN0IGZ1ZWxCYXJXaWR0aCA9IDMwMDtcbiAgY29uc3QgZnVlbFJlbWFpbmluZyA9IHBsYXllci5mdWVsIC8gcGxheWVyLk1BWF9GVUVMO1xuICBjb25zdCBmdWVsUmVtYWluaW5nUG9pbnQgPSBmdWVsQmFyV2lkdGggKiBmdWVsUmVtYWluaW5nO1xuICBjb25zdCBmbGFzaGluZyA9IGZ1ZWxSZW1haW5pbmcgPCAwLjI1ICYmIGxvb3BDb3VudCAlIDIwID4gMTA7XG4gIGN0eC5maWxsU3R5bGUgPSBmbGFzaGluZyA/ICdyZ2JhKDI1NSwgMCwgMCwgMC42KScgOiAncmdiYSgyNTUsIDAsIDAsIDAuMyknO1xuICBjdHguZmlsbFJlY3QoNTAgKyBmdWVsUmVtYWluaW5nUG9pbnQsIDYwLCBmdWVsQmFyV2lkdGggLSBmdWVsUmVtYWluaW5nUG9pbnQsIDMwKTtcbiAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDI1NSwgMCwgMC41KSc7XG4gIGN0eC5maWxsUmVjdCg1MCwgNjAsIGZ1ZWxSZW1haW5pbmdQb2ludCwgMzApO1xuXG4gIGZyZWVNYXNzZXMuZm9yRWFjaChtYXNzID0+IG1hc3MudXBkYXRlKCkpO1xufSk7XG4iLCJpbXBvcnQgTWFzcyBmcm9tIFwiLi9NYXNzXCI7XG5pbXBvcnQgbW91c2UgZnJvbSBcIi4vbW91c2VcIjtcbmltcG9ydCB7IGJldHdlZW4sIGJvdW5kIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIE1hc3Mge1xuICBwdWJsaWMgd2lkdGggPSAxNTtcbiAgcHVibGljIGhlaWdodCA9IDIwO1xuICBwdWJsaWMgamV0cGFja0ZvcmNlWCA9IDAuNDsgLy8gKGtnICogcHgpIC8gZnJeMlxuICBwdWJsaWMgamV0cGFja0ZvcmNlWSA9IDEuMzsgLy8gKGtnICogcHgpIC8gZnJeMlxuICBwdWJsaWMgTUFYX0ZVRUwgPSAxMDA7XG4gIHB1YmxpYyBNSU5fRlVFTCA9IDA7XG4gIHB1YmxpYyBNQVhfRlVFTF9SRUNIQVJHRSA9IDI1O1xuICBwdWJsaWMgZnVlbFJlY2hhcmdlUmF0ZSA9IDAuMTtcbiAgcHVibGljIGZ1ZWxSZWNoYXJnZURlbGF5ID0gMjAwO1xuICBwdWJsaWMgbGFzdEJ1cm4gPSBudWxsIGFzIG51bGx8RGF0ZTtcbiAgcHJpdmF0ZSBfZnVlbCA9IDEwMDtcblxuICBnZXQgYnVybmluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5mdWVsID4gMCAmJiBtb3VzZS5wcmVzc2VkO1xuICB9XG5cbiAgZ2V0IGF4SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS54IC0gdGhpcy54O1xuICAgIGNvbnN0IGxlZnRNYXJnaW4gPSAtMSAqIHRoaXMud2lkdGg7XG4gICAgY29uc3QgcmlnaHRNYXJnaW4gPSAyICogdGhpcy53aWR0aDtcbiAgICBpZiAoYmV0d2Vlbihtb3VzZURpc3RhbmNlLCBsZWZ0TWFyZ2luLCByaWdodE1hcmdpbikpIHJldHVybiAwO1xuXG4gICAgY29uc3QgamV0cGFja0FjY2VsZXJhdGlvbiA9IHRoaXMuamV0cGFja0ZvcmNlWCAvIHRoaXMubWFzcztcbiAgICByZXR1cm4gbW91c2VEaXN0YW5jZSA+IDAgPyBqZXRwYWNrQWNjZWxlcmF0aW9uIDogLTEgKiBqZXRwYWNrQWNjZWxlcmF0aW9uO1xuICB9XG5cbiAgZ2V0IGF5SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS55IC0gdGhpcy55O1xuICAgIGNvbnN0IHRvcE1hcmdpbiA9IDA7XG4gICAgY29uc3QgYm90dG9tTWFyZ2luID0gdGhpcy5oZWlnaHQ7XG4gICAgaWYgKG1vdXNlRGlzdGFuY2UgPj0gMCB8fCBiZXR3ZWVuKG1vdXNlRGlzdGFuY2UsIHRvcE1hcmdpbiwgYm90dG9tTWFyZ2luKSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBqZXRwYWNrQWNjZWxlcmF0aW9uID0gdGhpcy5qZXRwYWNrRm9yY2VZIC8gdGhpcy5tYXNzO1xuICAgIHJldHVybiAtMSAqIGpldHBhY2tBY2NlbGVyYXRpb247XG4gIH1cblxuICBnZXQgYXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gc3VwZXIuYXggKyB0aGlzLmF4SmV0cGFjaztcbiAgfVxuXG4gIGdldCBheSgpOiBudW1iZXIge1xuICAgIHJldHVybiBzdXBlci5heSArIHRoaXMuYXlKZXRwYWNrO1xuICB9XG5cbiAgZ2V0IGJ1cm5lclhTaWRlKCk6ICdsZWZ0J3wnbm9uZSd8J3JpZ2h0JyB7XG4gICAgaWYgKHRoaXMuYXhKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF4SmV0cGFjayA+IDAgPyAnbGVmdCcgOiAncmlnaHQnO1xuICB9XG5cbiAgZ2V0IGJ1cm5lcllTaWRlKCk6ICdib3R0b20nfCdub25lJ3wndG9wJyB7XG4gICAgaWYgKHRoaXMuYXlKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF5SmV0cGFjayA+IDAgPyAndG9wJyA6ICdib3R0b20nO1xuICB9XG5cbiAgc2V0IGZ1ZWwoZnVlbDogbnVtYmVyKSB7XG4gICAgdGhpcy5fZnVlbCA9IGJvdW5kKGZ1ZWwsIHRoaXMuTUlOX0ZVRUwsIHRoaXMuTUFYX0ZVRUwpO1xuICB9XG5cbiAgZ2V0IGZ1ZWwoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZnVlbDtcbiAgfVxuXG4gIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICBzdXBlci51cGRhdGUoKTtcbiAgICBpZiAodGhpcy5idXJuaW5nKSB7XG4gICAgICB0aGlzLmZ1ZWwgLT0gMC41O1xuICAgICAgdGhpcy5sYXN0QnVybiA9IG5ldyBEYXRlKCk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHRoaXMuZnVlbCA8IHRoaXMuTUFYX0ZVRUxfUkVDSEFSR0VcbiAgICAgICYmIHRoaXMubGFzdEJ1cm5cbiAgICAgICYmIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5sYXN0QnVybi5nZXRUaW1lKCkgPiB0aGlzLmZ1ZWxSZWNoYXJnZURlbGF5XG4gICAgKSB7XG4gICAgICB0aGlzLmZ1ZWwgPSBib3VuZCh0aGlzLmZ1ZWwgKyB0aGlzLmZ1ZWxSZWNoYXJnZVJhdGUsIHRoaXMuTUlOX0ZVRUwsIHRoaXMuTUFYX0ZVRUwpO1xuICAgIH1cbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==