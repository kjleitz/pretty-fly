!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),n=()=>{s.width=window.innerWidth,s.height=window.innerHeight};n(),window.addEventListener("resize",n),document.body.appendChild(s);const r=s.getContext("2d");r||console.error("Canvas '2d' context is not supported.");const h=(t,e)=>{requestAnimationFrame(()=>h(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e()};var o=h;const a=0,l=1,c=.25,d=100;var u=new class{constructor(){this.masses=[]}overlappingMasses(t){return this.masses.filter(e=>t!==e&&t.isHitting(e))}overlap(t){return this.overlappingMasses(t).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const g=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],n=s-i;return i+Math.random()*n},p=(t,e)=>{e||(e=t,t=0);const[i,s]=t<e?[t,e]:[e,t],n=[...Array(s-i).keys()].map(t=>t+i);return e>=t?n:[s,...n.slice(1).reverse()]},y=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},f=(t,e,i)=>{const[s,n]=e<i?[e,i]:[i,e];return t<s?s:t>n?n:t},w=(t,e,i,s=!0)=>{const[n,r]=e<i?[e,i]:[i,e];return s?t>=n&&t<=r:t>n&&t<r},m=(t,e,i,s,n)=>{let r=t+e,h=e+i;return r>n?(r=n,h=0):r<s&&(r=s,h=0),{position:r,velocity:h}};class x{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,Object.assign(this,t),this.darkMatter||u.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/d}get ax(){return this.stationary?0:a}get ay(){return this.stationary?0:l}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=m(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=m(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height);this.x=t.position,this.y=e.position;const i=u.overlap(this),s=this.isAgainstTopWall||this.isAgainstBottomWall||i.top||i.bottom?c:0,n=this.isAgainstLeftWall||this.isAgainstRightWall||i.left||i.right?c:0,r=y(t.velocity,s),h=y(e.velocity,n);this.dx=f(r,-1*this.terminalVelocity,this.terminalVelocity),this.dy=f(h,-1*this.terminalVelocity,this.terminalVelocity),this.dy>0&&i.bottom>0?(this.y-=i.bottom-1,this.dy=0):this.dy<0&&i.top>0?(this.y+=i.top+1,this.dy=0):this.dx>0&&i.right>0?(this.x-=i.right-1,this.dx=0):this.dx<0&&i.left>0&&(this.x+=i.left+1,this.dx=0)}isHitting(t){const e=t.x,i=t.x+t.width,s=t.y,n=t.y+t.height,r=this.x,h=this.x+this.width,o=this.y,a=this.y+this.height;return h>=e&&r<=i&&a>=s&&o<=n}}var b=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};const v=new class extends x{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3}get burning(){return b.pressed}get axJetpack(){if(!this.burning)return 0;const t=b.x-this.x,e=-1*this.width,i=2*this.width;if(w(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=b.y-this.y,e=this.height;return t>=0||w(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}},k=p(10).map(()=>new x({mass:g(.5,5),x:g(0,window.innerWidth),y:g(0,window.innerHeight),width:g(50,150),height:g(50,150),stationary:!0})),E=p(100).map(()=>{const t=g(1,5);return[g(0,window.innerWidth),g(0,window.innerHeight),t,t]});o(r,()=>{E.forEach((t,e)=>{const i=(e%10+1)/10;r.fillStyle=`rgba(255, 255, 255, ${i})`,r.fillRect(...t)}),k.forEach(t=>{v.isHitting(t)?r.fillStyle="rgba(255, 0, 0, 0.2)":r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(t.x,t.y,t.width,t.height)}),r.fillStyle="rgba(0, 150, 0, 1)",r.fillRect(v.x,v.y,v.width,v.height);const t=v.width/2,e=v.height/5;switch(r.fillStyle="rgba(220, 220, 255, 1)",v.burnerXSide){case"left":r.fillRect(v.x+(v.width-t),v.y+3,t,e);break;case"right":r.fillRect(v.x,v.y+3,t,e);break;default:r.fillRect(v.x+(v.width-t)/2,v.y+3,t,e)}const i=`rgba(255, 100, 0, ${g(.5,.75)})`,s=g(.25,.4)*v.width,n=g(.4,.6)*v.height,h=t=>.6*t,o=t=>(t-h(t))/2;switch(r.fillStyle=i,v.burnerXSide){case"left":r.fillRect(v.x-s,v.y+o(v.height),s,h(v.height));break;case"right":r.fillRect(v.x+v.width,v.y+o(v.height),s,h(v.height))}switch(v.burnerYSide){case"bottom":r.fillRect(v.x+o(v.width),v.y+v.height,h(v.width),n);break;case"top":r.fillRect(v.x+o(v.width),v.y-n,h(v.width),n)}v.update()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaXZlcnNlLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsaXRpZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJHUkFWSVRZX1giLCJHUkFWSVRZX1kiLCJGUklDVElPTiIsIk5PUk1BTF9EUkFHIiwibWFzc2VzIiwic3ViamVjdCIsInRoaXMiLCJmaWx0ZXIiLCJtYXNzIiwiaXNIaXR0aW5nIiwib3ZlcmxhcHBpbmdNYXNzZXMiLCJyZWR1Y2UiLCJtZW1vIiwib3ZlcmxhcCIsInRvcCIsImJvdHRvbSIsImRpc3RhbmNlIiwibGVmdCIsInJpZ2h0IiwicmFuZCIsIm1pbiIsIm1heCIsInJlYWxNaW4iLCJyZWFsTWF4IiwiZGlmZiIsIk1hdGgiLCJyYW5kb20iLCJyYW5nZSIsImJhc2VBcnJheSIsIkFycmF5Iiwia2V5cyIsIm1hcCIsInNsaWNlIiwicmV2ZXJzZSIsImRhbXBlbiIsIm51bSIsImJ5IiwiY2VudGVyIiwibmV3TnVtIiwiYm91bmQiLCJiZXR3ZWVuIiwiaW5jbHVzaXZlIiwidXBkYXRlRGltZW5zaW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsIm5ld1Bvc2l0aW9uIiwibmV3VmVsb2NpdHkiLCJvcHRpb25zIiwieCIsInkiLCJkeCIsImR5Iiwic3RhdGlvbmFyeSIsImRhcmtNYXR0ZXIiLCJhc3NpZ24iLCJwdXNoIiwibmV3WERpbWVuc2lvbiIsImF4IiwibmV3WURpbWVuc2lvbiIsImF5IiwieEZyaWN0aW9uIiwiaXNBZ2FpbnN0VG9wV2FsbCIsImlzQWdhaW5zdEJvdHRvbVdhbGwiLCJ5RnJpY3Rpb24iLCJpc0FnYWluc3RMZWZ0V2FsbCIsImlzQWdhaW5zdFJpZ2h0V2FsbCIsImR4V2l0aEZyaWN0aW9uIiwiZHlXaXRoRnJpY3Rpb24iLCJ0ZXJtaW5hbFZlbG9jaXR5IiwibWFzc0xlZnQiLCJtYXNzUmlnaHQiLCJtYXNzVG9wIiwibWFzc0JvdHRvbSIsInRoaXNMZWZ0IiwidGhpc1JpZ2h0IiwidGhpc1RvcCIsInRoaXNCb3R0b20iLCJwcmVzc2VkIiwiZXZlbnQiLCJwb3B1bGF0ZUZyb21Nb3VzZUV2ZW50IiwicG9wdWxhdGVGcm9tVG91Y2hFdmVudCIsImJ1dHRvbnMiLCJ0b3VjaGVzIiwibGVuZ3RoIiwidG91Y2giLCJjbGllbnRYIiwiY2xpZW50WSIsInBsYXllciIsImpldHBhY2tGb3JjZVgiLCJqZXRwYWNrRm9yY2VZIiwiYnVybmluZyIsIm1vdXNlRGlzdGFuY2UiLCJsZWZ0TWFyZ2luIiwicmlnaHRNYXJnaW4iLCJqZXRwYWNrQWNjZWxlcmF0aW9uIiwiYm90dG9tTWFyZ2luIiwic3VwZXIiLCJheEpldHBhY2siLCJheUpldHBhY2siLCJzdGFycyIsInNpemUiLCJmb3JFYWNoIiwicmVjdE9wdGlvbnMiLCJpbmRleCIsIm9wYWNpdHkiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZhY2VtYXNrV2lkdGgiLCJmYWNlbWFza0hlaWdodCIsImJ1cm5lclhTaWRlIiwiYnVybmVyQ29sb3IiLCJidXJuZXJMZW5ndGhYIiwiYnVybmVyTGVuZ3RoWSIsImJ1cm5lckFjcm9zcyIsImJ1cm5lckFjcm9zc09mZnNldCIsImJ1cm5lcllTaWRlIiwidXBkYXRlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxHLHNDQ2xGckQsTUFBTUMsRUFBU0MsU0FBU0MsY0FBYyxVQUVoQ0MsRUFBZ0IsS0FDcEJILEVBQU9JLE1BQVFDLE9BQU9DLFdBQ3RCTixFQUFPTyxPQUFTRixPQUFPRyxhQUd6QkwsSUFDQUUsT0FBT0ksaUJBQWlCLFNBQVVOLEdBQ2xDRixTQUFTUyxLQUFLQyxZQUFZWCxHQUUxQixNQUFNWSxFQUFNWixFQUFPYSxXQUFXLE1BQ3pCRCxHQUFLRSxRQUFRQyxNQUFNLHlDQ1p4QixNQUFNQyxFQUFXLENBQUMzQyxFQUE2QjRDLEtBQzdDQyxzQkFBc0IsSUFBTUYsRUFBUzNDLEVBQUc0QyxJQUN4QzVDLEVBQUU4QyxVQUFVLEVBQUcsRUFBR2QsT0FBT0MsV0FBWUQsT0FBT0csYUFDNUNTLEtBR2EsUUNKUixNQUFNRyxFQUFZLEVBQ1pDLEVBQVksRUFFWkMsRUFBVyxJQUNYQyxFQUFjLElBd0paLE1BREUsSUFySmpCLG9CQUNTLEtBQUFDLE9BQVMsR0FFaEIsa0JBQWtCQyxHQUNoQixPQUFPQyxLQUFLRixPQUFPRyxPQUFRQyxHQUNyQkgsSUFBWUcsR0FDVEgsRUFBUUksVUFBVUQsSUFJN0IsUUFBUUgsR0FVTixPQVRlQyxLQUFLSSxrQkFBa0JMLEdBU3hCTSxPQUFPLENBQUNDLEVBQU1KLEtBQzFCLE1BQU1LLEVBQVVELEVBVWhCLEdBRHVCSixFQUFLTSxLQUFPVCxFQUFRUyxLQUFPTixFQUFLTSxLQUFPVCxFQUFRVSxPQUNsRCxDQUNsQixNQUFNQyxFQUFXWCxFQUFRVSxPQUFTUCxFQUFLTSxJQUNuQ0QsRUFBUUUsT0FBU0MsSUFBVUgsRUFBUUUsT0FBU0MsR0FXbEQsR0FEMEJSLEVBQUtPLFFBQVVWLEVBQVFVLFFBQVVQLEVBQUtPLFFBQVVWLEVBQVFTLElBQzNELENBQ3JCLE1BQU1FLEVBQVdSLEVBQUtPLE9BQVNWLEVBQVFTLElBQ25DRCxFQUFRQyxJQUFNRSxJQUFVSCxFQUFRQyxJQUFNRSxHQTZDNUMsR0FEd0JSLEVBQUtTLE1BQVFaLEVBQVFZLE1BQVFULEVBQUtTLE1BQVFaLEVBQVFhLE1BQ3JELENBQ25CLE1BQU1GLEVBQVdYLEVBQVFhLE1BQVFWLEVBQUtTLEtBQ2xDSixFQUFRSyxNQUFRRixJQUFVSCxFQUFRSyxNQUFRRixHQTZDaEQsR0FEeUJSLEVBQUtVLE9BQVNiLEVBQVFZLE1BQVFULEVBQUtVLE9BQVNiLEVBQVFhLE1BQ3ZELENBQ3BCLE1BQU1GLEVBQVdSLEVBQUtVLE1BQVFiLEVBQVFZLEtBQ2xDSixFQUFRSSxLQUFPRCxJQUFVSCxFQUFRSSxLQUFPRCxHQUk5QyxPQUFPSCxHQUNOLENBQUVDLElBQUssRUFBR0ksTUFBTyxFQUFHSCxPQUFRLEVBQUdFLEtBQU0sTUN6SnJDLE1BQU1FLEVBQU8sQ0FBQ0MsRUFBYUMsS0FDaEMsTUFBT0MsRUFBU0MsR0FBV0gsRUFBTUMsRUFBTSxDQUFDRCxFQUFLQyxHQUFPLENBQUNBLEVBQUtELEdBQ3BESSxFQUFPRCxFQUFVRCxFQUN2QixPQUFPQSxFQUFXRyxLQUFLQyxTQUFXRixHQUd2QkcsRUFBUSxDQUFDUCxFQUFhQyxLQUM1QkEsSUFDSEEsRUFBTUQsRUFDTkEsRUFBTSxHQUVSLE1BQU9FLEVBQVNDLEdBQVdILEVBQU1DLEVBQU0sQ0FBQ0QsRUFBS0MsR0FBTyxDQUFDQSxFQUFLRCxHQUVwRFEsRUFBWSxJQUFJQyxNQURUTixFQUFVRCxHQUNXUSxRQUFRQyxJQUFJMUQsR0FBS0EsRUFBSWlELEdBQ3ZELE9BQU9ELEdBQU9ELEVBQU1RLEVBQVksQ0FBQ0wsS0FBWUssRUFBVUksTUFBTSxHQUFHQyxZQUdyREMsRUFBUyxDQUFDQyxFQUFhQyxFQUFZQyxFQUFTLEtBRXZELEdBQUlGLElBQVFFLEVBQVEsT0FBT0EsRUFHM0IsR0FBSUYsRUFBTUUsRUFBUSxDQUNoQixNQUFNQyxFQUFTSCxFQUFNQyxFQUNyQixPQUFPRSxFQUFTRCxFQUFTQSxFQUFTQyxFQUlwQyxNQUFNQSxFQUFTSCxFQUFNQyxFQUNyQixPQUFPRSxFQUFTRCxFQUFTQSxFQUFTQyxHQUd2QkMsRUFBUSxDQUFDSixFQUFhZixFQUFhQyxLQUM5QyxNQUFPQyxFQUFTQyxHQUFXSCxFQUFNQyxFQUFNLENBQUNELEVBQUtDLEdBQU8sQ0FBQ0EsRUFBS0QsR0FDMUQsT0FBSWUsRUFBTWIsRUFBZ0JBLEVBQ3RCYSxFQUFNWixFQUFnQkEsRUFDbkJZLEdBR0lLLEVBQVUsQ0FBQ0wsRUFBYWYsRUFBYUMsRUFBYW9CLEdBQVksS0FDekUsTUFBT25CLEVBQVNDLEdBQVdILEVBQU1DLEVBQU0sQ0FBQ0QsRUFBS0MsR0FBTyxDQUFDQSxFQUFLRCxHQUMxRCxPQUFPcUIsRUFBYU4sR0FBT2IsR0FBV2EsR0FBT1osRUFBWVksRUFBTWIsR0FBV2EsRUFBTVosR0N0QzVFbUIsRUFBa0IsQ0FDdEJDLEVBQ0FDLEVBQ0FDLEVBQ0F6QixFQUNBQyxLQUVBLElBQUl5QixFQUFjSCxFQUFXQyxFQUN6QkcsRUFBY0gsRUFBV0MsRUFTN0IsT0FSSUMsRUFBY3pCLEdBQ2hCeUIsRUFBY3pCLEVBQ2QwQixFQUFjLEdBQ0xELEVBQWMxQixJQUN2QjBCLEVBQWMxQixFQUNkMkIsRUFBYyxHQUdULENBQ0xKLFNBQVVHLEVBQ1ZGLFNBQVVHLElBSUMsTUFBTSxFQVduQixZQUFZQyxHQVZMLEtBQUF4QyxLQUFPLEVBQ1AsS0FBQXlDLEVBQUksRUFDSixLQUFBQyxFQUFJLEVBQ0osS0FBQUMsR0FBSyxFQUNMLEtBQUFDLEdBQUssRUFDTCxLQUFBcEUsTUFBUSxHQUNSLEtBQUFHLE9BQVMsR0FDVCxLQUFBa0UsWUFBYSxFQUNaLEtBQUFDLFlBQWEsRUFHbkJoRyxPQUFPaUcsT0FBT2pELEtBQU0wQyxHQUNmMUMsS0FBS2dELFlBQVksRUFBU2xELE9BQU9vRCxLQUFLbEQsTUFHN0Msc0JBRUUsT0FEcUIsRUFBSUEsS0FBS3RCLE1BQVUsRUFBSXNCLEtBQUtuQixRQUMzQm1CLEtBQUtFLEtBQVFMLEVBR3JDLFNBQW1CLE9BQU9HLEtBQUsrQyxXQUFhLEVBQUlyRCxFQUNoRCxTQUFtQixPQUFPTSxLQUFLK0MsV0FBYSxFQUFJcEQsRUFFaEQsdUJBQWtDLE9BQWtCLElBQVhLLEtBQUs0QyxFQUM5QywwQkFBcUMsT0FBTzVDLEtBQUs0QyxJQUFNakUsT0FBT0csWUFBY2tCLEtBQUtuQixPQUNqRix3QkFBbUMsT0FBa0IsSUFBWG1CLEtBQUsyQyxFQUMvQyx5QkFBb0MsT0FBTzNDLEtBQUsyQyxJQUFNaEUsT0FBT0MsV0FBYW9CLEtBQUt0QixNQUUvRSx1QkFDRSxPQUFPLEdBR1QsVUFBb0IsT0FBT3NCLEtBQUs0QyxFQUNoQyxZQUFzQixPQUFPNUMsS0FBSzJDLEVBQUkzQyxLQUFLdEIsTUFDM0MsYUFBdUIsT0FBT3NCLEtBQUs0QyxFQUFJNUMsS0FBS25CLE9BQzVDLFdBQXFCLE9BQU9tQixLQUFLMkMsRUFFakMsU0FDRSxNQUFNUSxFQUFnQmYsRUFBZ0JwQyxLQUFLMkMsRUFBRzNDLEtBQUs2QyxHQUFJN0MsS0FBS29ELEdBQUlwRCxLQUFLdEIsTUFBT0MsT0FBT0MsV0FBYW9CLEtBQUt0QixPQUMvRjJFLEVBQWdCakIsRUFBZ0JwQyxLQUFLNEMsRUFBRzVDLEtBQUs4QyxHQUFJOUMsS0FBS3NELEdBQUl0RCxLQUFLbkIsT0FBUUYsT0FBT0csWUFBY2tCLEtBQUtuQixRQUV2R21CLEtBQUsyQyxFQUFJUSxFQUFjZCxTQUN2QnJDLEtBQUs0QyxFQUFJUyxFQUFjaEIsU0FFdkIsTUFBTTlCLEVBQVUsRUFBU0EsUUFBUVAsTUFFM0J1RCxFQUFZdkQsS0FBS3dELGtCQUFvQnhELEtBQUt5RCxxQkFBdUJsRCxFQUFRQyxLQUFPRCxFQUFRRSxPQUFTYixFQUFXLEVBQzVHOEQsRUFBWTFELEtBQUsyRCxtQkFBcUIzRCxLQUFLNEQsb0JBQXNCckQsRUFBUUksTUFBUUosRUFBUUssTUFBUWhCLEVBQVcsRUFDNUdpRSxFQUFpQmpDLEVBQU91QixFQUFjYixTQUFVaUIsR0FDaERPLEVBQWlCbEMsRUFBT3lCLEVBQWNmLFNBQVVvQixHQUV0RDFELEtBQUs2QyxHQUFLWixFQUFNNEIsR0FBaUIsRUFBSTdELEtBQUsrRCxpQkFBa0IvRCxLQUFLK0Qsa0JBQ2pFL0QsS0FBSzhDLEdBQUtiLEVBQU02QixHQUFpQixFQUFJOUQsS0FBSytELGlCQUFrQi9ELEtBQUsrRCxrQkFFN0QvRCxLQUFLOEMsR0FBSyxHQUFLdkMsRUFBUUUsT0FBUyxHQUNsQ1QsS0FBSzRDLEdBQUtyQyxFQUFRRSxPQUFTLEVBQzNCVCxLQUFLOEMsR0FBSyxHQUNEOUMsS0FBSzhDLEdBQUssR0FBS3ZDLEVBQVFDLElBQU0sR0FDdENSLEtBQUs0QyxHQUFLckMsRUFBUUMsSUFBTSxFQUN4QlIsS0FBSzhDLEdBQUssR0FDRDlDLEtBQUs2QyxHQUFLLEdBQUt0QyxFQUFRSyxNQUFRLEdBQ3hDWixLQUFLMkMsR0FBS3BDLEVBQVFLLE1BQVEsRUFDMUJaLEtBQUs2QyxHQUFLLEdBQ0Q3QyxLQUFLNkMsR0FBSyxHQUFLdEMsRUFBUUksS0FBTyxJQUN2Q1gsS0FBSzJDLEdBQUtwQyxFQUFRSSxLQUFPLEVBQ3pCWCxLQUFLNkMsR0FBSyxHQUlkLFVBQVUzQyxHQUNSLE1BQU04RCxFQUFXOUQsRUFBS3lDLEVBQ2hCc0IsRUFBWS9ELEVBQUt5QyxFQUFJekMsRUFBS3hCLE1BQzFCd0YsRUFBVWhFLEVBQUswQyxFQUNmdUIsRUFBYWpFLEVBQUswQyxFQUFJMUMsRUFBS3JCLE9BRTNCdUYsRUFBV3BFLEtBQUsyQyxFQUNoQjBCLEVBQVlyRSxLQUFLMkMsRUFBSTNDLEtBQUt0QixNQUMxQjRGLEVBQVV0RSxLQUFLNEMsRUFDZjJCLEVBQWF2RSxLQUFLNEMsRUFBSTVDLEtBQUtuQixPQUVqQyxPQUNFd0YsR0FBYUwsR0FDVkksR0FBWUgsR0FDWk0sR0FBY0wsR0FDZEksR0FBV0gsR0MvREwsTUFGRCxJQTlDUCxNQUtMLGNBSk8sS0FBQXhCLEVBQUksRUFDSixLQUFBQyxFQUFJLEVBQ0osS0FBQTRCLFNBQVUsRUFHZjdGLE9BQU9JLGlCQUFpQixZQUFjMEYsSUFDcEN6RSxLQUFLMEUsdUJBQXVCRCxLQUU5QjlGLE9BQU9JLGlCQUFpQixZQUFjMEYsSUFDcEN6RSxLQUFLMEUsdUJBQXVCRCxLQUU5QjlGLE9BQU9JLGlCQUFpQixVQUFZMEYsSUFDbEN6RSxLQUFLMEUsdUJBQXVCRCxLQUc5QjlGLE9BQU9JLGlCQUFpQixhQUFlMEYsSUFDckN6RSxLQUFLMkUsdUJBQXVCRixLQUU5QjlGLE9BQU9JLGlCQUFpQixZQUFjMEYsSUFDcEN6RSxLQUFLMkUsdUJBQXVCRixLQUU5QjlGLE9BQU9JLGlCQUFpQixXQUFhMEYsSUFDbkN6RSxLQUFLMkUsdUJBQXVCRixLQUloQyx1QkFBdUJBLEdBQ3JCekUsS0FBSzJDLEVBQUk4QixFQUFNOUIsRUFDZjNDLEtBQUs0QyxFQUFJNkIsRUFBTTdCLEVBQ2Y1QyxLQUFLd0UsUUFBNEIsSUFBbEJDLEVBQU1HLFFBR3ZCLHVCQUF1QkgsR0FDckIsTUFBTSxRQUFFSSxHQUFZSixFQUNwQixHQUF1QixJQUFuQkksRUFBUUMsT0FDVjlFLEtBQUt3RSxTQUFVLE1BQ1YsQ0FDTCxNQUFNTyxFQUFRRixFQUFRLEdBQ3RCN0UsS0FBSzJDLEVBQUlvQyxFQUFNQyxRQUNmaEYsS0FBSzRDLEVBQUltQyxFQUFNRSxRQUNmakYsS0FBS3dFLFNBQVUsS0NoQ3JCLE1BQU1VLEVBQVMsSUNMQSxjQUFxQixFQUFwQyxjLG9CQUNTLEtBQUF4RyxNQUFRLEdBQ1IsS0FBQUcsT0FBUyxHQUNULEtBQUFzRyxjQUFnQixHQUNoQixLQUFBQyxjQUFnQixJQUV2QixjQUNFLE9BQU8sRUFBTVosUUFHZixnQkFDRSxJQUFLeEUsS0FBS3FGLFFBQVMsT0FBTyxFQUUxQixNQUFNQyxFQUFnQixFQUFNM0MsRUFBSTNDLEtBQUsyQyxFQUMvQjRDLEdBQWMsRUFBSXZGLEtBQUt0QixNQUN2QjhHLEVBQWMsRUFBSXhGLEtBQUt0QixNQUM3QixHQUFJd0QsRUFBUW9ELEVBQWVDLEVBQVlDLEdBQWMsT0FBTyxFQUU1RCxNQUFNQyxFQUFzQnpGLEtBQUttRixjQUFnQm5GLEtBQUtFLEtBQ3RELE9BQU9vRixFQUFnQixFQUFJRyxHQUF1QixFQUFJQSxFQUd4RCxnQkFDRSxJQUFLekYsS0FBS3FGLFFBQVMsT0FBTyxFQUUxQixNQUFNQyxFQUFnQixFQUFNMUMsRUFBSTVDLEtBQUs0QyxFQUUvQjhDLEVBQWUxRixLQUFLbkIsT0FDMUIsT0FBSXlHLEdBQWlCLEdBQUtwRCxFQUFRb0QsRUFGaEIsRUFFMENJLEdBQXNCLEdBRzFFLEdBRG9CMUYsS0FBS29GLGNBQWdCcEYsS0FBS0UsTUFJeEQsU0FDRSxPQUFPeUYsTUFBTXZDLEdBQUtwRCxLQUFLNEYsVUFHekIsU0FDRSxPQUFPRCxNQUFNckMsR0FBS3RELEtBQUs2RixVQUd6QixrQkFDRSxPQUF1QixJQUFuQjdGLEtBQUs0RixVQUF3QixPQUMxQjVGLEtBQUs0RixVQUFZLEVBQUksT0FBUyxRQUd2QyxrQkFDRSxPQUF1QixJQUFuQjVGLEtBQUs2RixVQUF3QixPQUMxQjdGLEtBQUs2RixVQUFZLEVBQUksTUFBUSxXRDFDbEMvRixFQUFTdUIsRUFBTSxJQUFJSSxJQUFJLElBQ3BCLElBQUksRUFBSyxDQUNkdkIsS0FBTVcsRUFBSyxHQUFLLEdBQ2hCOEIsRUFBRzlCLEVBQUssRUFBR2xDLE9BQU9DLFlBQ2xCZ0UsRUFBRy9CLEVBQUssRUFBR2xDLE9BQU9HLGFBQ2xCSixNQUFPbUMsRUFBSyxHQUFJLEtBQ2hCaEMsT0FBUWdDLEVBQUssR0FBSSxLQUNqQmtDLFlBQVksS0FJVitDLEVBQVF6RSxFQUFNLEtBQUtJLElBQUksS0FDM0IsTUFBTXNFLEVBQU9sRixFQUFLLEVBQUcsR0FDckIsTUFBTyxDQUNMQSxFQUFLLEVBQUdsQyxPQUFPQyxZQUNmaUMsRUFBSyxFQUFHbEMsT0FBT0csYUFDZmlILEVBQ0FBLEtBSUosRUFBUzdHLEVBQUssS0FDWjRHLEVBQU1FLFFBQVEsQ0FBQ0MsRUFBYUMsS0FDMUIsTUFBTUMsR0FBWUQsRUFBUSxHQUFNLEdBQUssR0FDckNoSCxFQUFJa0gsaUNBQW1DRCxLQUN2Q2pILEVBQUltSCxZQUFZSixLQUdsQm5HLEVBQU9rRyxRQUFTOUYsSUFDVmdGLEVBQU8vRSxVQUFVRCxHQUNuQmhCLEVBQUlrSCxVQUFZLHVCQUVoQmxILEVBQUlrSCxVQUFZLHVCQUdsQmxILEVBQUltSCxTQUFTbkcsRUFBS3lDLEVBQUd6QyxFQUFLMEMsRUFBRzFDLEVBQUt4QixNQUFPd0IsRUFBS3JCLFVBR2hESyxFQUFJa0gsVUFBWSxxQkFDaEJsSCxFQUFJbUgsU0FBU25CLEVBQU92QyxFQUFHdUMsRUFBT3RDLEVBQUdzQyxFQUFPeEcsTUFBT3dHLEVBQU9yRyxRQUV0RCxNQUNNeUgsRUFBZ0JwQixFQUFPeEcsTUFBUSxFQUMvQjZILEVBQWlCckIsRUFBT3JHLE9BQVMsRUFHdkMsT0FEQUssRUFBSWtILFVBSmtCLHlCQUtkbEIsRUFBT3NCLGFBQ2IsSUFBSyxPQUFRdEgsRUFBSW1ILFNBQVNuQixFQUFPdkMsR0FBS3VDLEVBQU94RyxNQUFRNEgsR0FBZ0JwQixFQUFPdEMsRUFIdEQsRUFHMkUwRCxFQUFlQyxHQUFpQixNQUNqSSxJQUFLLFFBQVNySCxFQUFJbUgsU0FBU25CLEVBQU92QyxFQUFHdUMsRUFBT3RDLEVBSnRCLEVBSTJDMEQsRUFBZUMsR0FBaUIsTUFDakcsUUFBU3JILEVBQUltSCxTQUFTbkIsRUFBT3ZDLEdBQU11QyxFQUFPeEcsTUFBUTRILEdBQWlCLEVBQUlwQixFQUFPdEMsRUFMeEQsRUFLNkUwRCxFQUFlQyxHQUdwSCxNQUFNRSx1QkFBbUM1RixFQUFLLEdBQUssUUFDN0M2RixFQUFnQjdGLEVBQUssSUFBTSxJQUFPcUUsRUFBT3hHLE1BQ3pDaUksRUFBZ0I5RixFQUFLLEdBQUssSUFBT3FFLEVBQU9yRyxPQUN4QytILEVBQWdCbEksR0FBMEIsR0FBTUEsRUFDaERtSSxFQUFzQm5JLElBQTJCQSxFQUFRa0ksRUFBYWxJLElBQVUsRUFHdEYsT0FEQVEsRUFBSWtILFVBQVlLLEVBQ1J2QixFQUFPc0IsYUFDYixJQUFLLE9BQVF0SCxFQUFJbUgsU0FDZm5CLEVBQU92QyxFQUFJK0QsRUFDWHhCLEVBQU90QyxFQUFJaUUsRUFBbUIzQixFQUFPckcsUUFDckM2SCxFQUNBRSxFQUFhMUIsRUFBT3JHLFNBQ25CLE1BQ0gsSUFBSyxRQUFTSyxFQUFJbUgsU0FDaEJuQixFQUFPdkMsRUFBSXVDLEVBQU94RyxNQUNsQndHLEVBQU90QyxFQUFJaUUsRUFBbUIzQixFQUFPckcsUUFDckM2SCxFQUNBRSxFQUFhMUIsRUFBT3JHLFNBSXhCLE9BQVFxRyxFQUFPNEIsYUFDYixJQUFLLFNBQVU1SCxFQUFJbUgsU0FDakJuQixFQUFPdkMsRUFBSWtFLEVBQW1CM0IsRUFBT3hHLE9BQ3JDd0csRUFBT3RDLEVBQUlzQyxFQUFPckcsT0FDbEIrSCxFQUFhMUIsRUFBT3hHLE9BQ3BCaUksR0FDQyxNQUNILElBQUssTUFBT3pILEVBQUltSCxTQUNkbkIsRUFBT3ZDLEVBQUlrRSxFQUFtQjNCLEVBQU94RyxPQUNyQ3dHLEVBQU90QyxFQUFJK0QsRUFDWEMsRUFBYTFCLEVBQU94RyxPQUNwQmlJLEdBS0p6QixFQUFPNkIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuY29uc3Qgc3RyZXRjaENhbnZhcyA9ICgpOiB2b2lkID0+IHtcbiAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG59O1xuXG5zdHJldGNoQ2FudmFzKCk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc3RyZXRjaENhbnZhcyk7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcbmlmICghY3R4KSBjb25zb2xlLmVycm9yKFwiQ2FudmFzICcyZCcgY29udGV4dCBpcyBub3Qgc3VwcG9ydGVkLlwiKTtcblxuZXhwb3J0IHsgY3R4IH07XG5leHBvcnQgZGVmYXVsdCBjYW52YXM7XG4iLCJjb25zdCBnYW1lTG9vcCA9IChjOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRyYXc6ICgpID0+IHZvaWQpOiB2b2lkID0+IHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IGdhbWVMb29wKGMsIGRyYXcpKTtcbiAgYy5jbGVhclJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIGRyYXcoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVMb29wO1xuIiwiaW1wb3J0IE1hc3MgZnJvbSBcIi4vTWFzc1wiO1xuXG5leHBvcnQgY29uc3QgR1JBVklUWV9YID0gMDsgLy8gcHgvZnJeMlxuZXhwb3J0IGNvbnN0IEdSQVZJVFlfWSA9IDE7IC8vIHB4L2ZyXjJcbmV4cG9ydCBjb25zdCBBSVJfUkVTSVNUQU5DRSA9IDAuMjU7IC8vIFRPRE9cbmV4cG9ydCBjb25zdCBGUklDVElPTiA9IDAuMjU7IC8vIFRPRE86IHRoaXMgc2hvdWxkIGJlIGRlcGVuZGVudCBvbiBtYXNzXG5leHBvcnQgY29uc3QgTk9STUFMX0RSQUcgPSAxMDA7IC8vIHN1cmZhY2UgYXJlYSBpbiBwaXhlbHMsIHBlciBraWxvZ3JhbVxuXG5jbGFzcyBVbml2ZXJzZSB7XG4gIHB1YmxpYyBtYXNzZXMgPSBbXSBhcyBNYXNzW107XG5cbiAgb3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdDogTWFzcyk6IE1hc3NbXSB7XG4gICAgcmV0dXJuIHRoaXMubWFzc2VzLmZpbHRlcigobWFzcykgPT4ge1xuICAgICAgaWYgKHN1YmplY3QgPT09IG1hc3MpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBzdWJqZWN0LmlzSGl0dGluZyhtYXNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIG92ZXJsYXAoc3ViamVjdDogTWFzcyk6IFJlY29yZDwndG9wJ3wncmlnaHQnfCdib3R0b20nfCdsZWZ0JywgbnVtYmVyPiB7XG4gICAgY29uc3QgbWFzc2VzID0gdGhpcy5vdmVybGFwcGluZ01hc3NlcyhzdWJqZWN0KTtcbiAgICAvKipcbiAgICAgKiAsLS0tLSxcbiAgICAgKiB8ICAgIHwgPD0gc3ViamVjdFxuICAgICAqICctLS0tJ1xuICAgICAqIC4uLi4uLlxuICAgICAqIDogICAgOiA8PSBtYXNzXG4gICAgICogYGBgYGBgXG4gICAgICovXG4gICAgcmV0dXJuIG1hc3Nlcy5yZWR1Y2UoKG1lbW8sIG1hc3MpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJsYXAgPSBtZW1vO1xuXG4gICAgICAvKipcbiAgICAgICAqICwtLS0tLCAgICAsLS0tLSwgICAgLC0uLS0sLi4gICAgLC0tLS0sICAgICwtLS0tLCAgLi4sLS0uLSwgICAgLC0tLS0sICAgICAgLC0tLS0sICAgIC4uLC0tLS0sLi5cbiAgICAgICAqIHwgICAgfCAgICB8IC4uLnwuLiAgfCA6ICB8IDogICAgfCAgICB8ICAuLnwuLi4gfCAgOiB8ICA6IHwgICAgfCAgICB8ICAgIC4ufC4uLi58Li4gIDogfCAgICB8IDpcbiAgICAgICAqICctLi0tJy4uICAnLTotLScgOiAgJy0tLS0nYGAgIC4uJy0tLi0nICA6ICctLTotJyAgYGAnLS0tLScgIC4uJy0tLS0nLi4gIDogJy0tLS0nIDogIGBgJy0tLS0nYGBcbiAgICAgICAqICAgOiAgICA6ICAgIGBgYGBgYCAgICAgICAgICAgIDogICAgOiAgICBgYGBgYGAgICAgICAgICAgICAgIDogICAgICAgIDogIGBgYGBgYGBgYGBcbiAgICAgICAqICAgYGBgYGBgICAgICAgICAgICAgICAgICAgICAgIGBgYGBgYCAgICAgICAgICAgICAgICAgICAgICAgIGBgYGBgYGBgYGBcbiAgICAgICAqL1xuICAgICAgY29uc3QgbWFzc1RvcE92ZXJsYXAgPSBtYXNzLnRvcCA+PSBzdWJqZWN0LnRvcCAmJiBtYXNzLnRvcCA8PSBzdWJqZWN0LmJvdHRvbTtcbiAgICAgIGlmIChtYXNzVG9wT3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHN1YmplY3QuYm90dG9tIC0gbWFzcy50b3A7XG4gICAgICAgIGlmIChvdmVybGFwLmJvdHRvbSA8IGRpc3RhbmNlKSBvdmVybGFwLmJvdHRvbSA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIC4uLi4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uLi4uICAgICAgICAgICAgICAgICAgICAgLi4uLi4uLi4uLlxuICAgICAgICogOiAgICA6ICAgIC4uLi4uLiAgICAgICAgICAgICAgICA6ICAgIDogICAuLi4uLi4gICAgICAgICAgICA6ICAgICAgICA6ICAuLi4uLi4uLi4uXG4gICAgICAgKiBgYCwtLS0tLCAgOiAsLS06LSwgIC4uLC0tLS0sICAsLWAtLSxgYCAsLTotLSwgOiAgLC0tLS0sLi4gIGBgLC0tLS0sYGAgIDogLC0tLS0sIDogIC4uLC0tLS0sLi5cbiAgICAgICAqICAgfCAgICB8ICBgYHxgYGAgfCAgOiB8ICA6IHwgIHwgICAgfCAgIHwgYGBgfGBgICB8IDogIHwgOiAgICB8ICAgIHwgICAgYGB8YGBgYHxgYCAgOiB8ICAgIHwgOlxuICAgICAgICogICAnLS0tLScgICAgJy0tLS0nICBgYCctLWAtJyAgJy0tLS0nICAgJy0tLS0nICAgICctYC0tJ2BgICAgICctLS0tJyAgICAgICctLS0tJyAgICBgYCctLS0tJ2BgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NCb3R0b21PdmVybGFwID0gbWFzcy5ib3R0b20gPD0gc3ViamVjdC5ib3R0b20gJiYgbWFzcy5ib3R0b20gPj0gc3ViamVjdC50b3A7XG4gICAgICBpZiAobWFzc0JvdHRvbU92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBtYXNzLmJvdHRvbSAtIHN1YmplY3QudG9wO1xuICAgICAgICBpZiAob3ZlcmxhcC50b3AgPCBkaXN0YW5jZSkgb3ZlcmxhcC50b3AgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogLC0tLS06ICAgIDpcbiAgICAgICAqIHwgICAgfGBgYGBgXG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqICAgLi4uLi4uXG4gICAgICAgKiAuLTotLS4gOlxuICAgICAgICogfCBgYGB8YGBcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogLi4uLi4uXG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIHxgYGBgfFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwgICAgfC4uLi4uXG4gICAgICAgKiAnLS0tLTogICAgOlxuICAgICAgICogICAgICBgYGBgYGBcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfCAuLi58Li5cbiAgICAgICAqICctOi0tJyA6XG4gICAgICAgKiAgIGBgYGBgYFxuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8Li4uLnxcbiAgICAgICAqIDotLS0tOlxuICAgICAgICogYGBgYGBgXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogLC0tLS06ICAgIDpcbiAgICAgICAqIHwgICAgfCAgICA6XG4gICAgICAgKiAnLS0tLTogICAgOlxuICAgICAgICogICAgICBgYGBgYGBcbiAgICAgICAqICAgLi4uLi4uXG4gICAgICAgKiAsLTotLSwgOlxuICAgICAgICogfCA6ICB8IDpcbiAgICAgICAqICctOi0tJyA6XG4gICAgICAgKiAgIGBgYGBgYFxuICAgICAgICogLi4uLi4uXG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIHwgICAgfFxuICAgICAgICogOi0tLS06XG4gICAgICAgKiBgYGBgYGBcbiAgICAgICAqL1xuICAgICAgY29uc3QgbWFzc0xlZnRPdmVybGFwID0gbWFzcy5sZWZ0ID49IHN1YmplY3QubGVmdCAmJiBtYXNzLmxlZnQgPD0gc3ViamVjdC5yaWdodDtcbiAgICAgIGlmIChtYXNzTGVmdE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBzdWJqZWN0LnJpZ2h0IC0gbWFzcy5sZWZ0O1xuICAgICAgICBpZiAob3ZlcmxhcC5yaWdodCA8IGRpc3RhbmNlKSBvdmVybGFwLnJpZ2h0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogLi4uLi4uXG4gICAgICAgKiA6ICAgIDotLS0tLFxuICAgICAgICogYGBgYGB8ICAgIHxcbiAgICAgICAqICAgICAgJy0tLS0nXG4gICAgICAgKiAgICAuLi4uLi5cbiAgICAgICAqICAgIDogLC0tOi0sXG4gICAgICAgKiAgICBgYHxgYGAgfFxuICAgICAgICogICAgICAnLS0tLSdcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAgICAgIDotLS0tOlxuICAgICAgICogICAgICB8YGBgYHxcbiAgICAgICAqICAgICAgJy0tLS0nXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogLi4uLi58ICAgIHxcbiAgICAgICAqIDogICAgOi0tLS0nXG4gICAgICAgKiBgYGBgYGBcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAgICAuLnwuLi4gfFxuICAgICAgICogICAgOiAnLS06LSdcbiAgICAgICAqICAgIGBgYGBgYFxuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqICAgICAgfC4uLi58XG4gICAgICAgKiAgICAgIDotLS0tOlxuICAgICAgICogICAgICBgYGBgYGBcbiAgICAgICAqICAuLi4uLi5cbiAgICAgICAqICA6ICAgICwtLS0tLFxuICAgICAgICogIDogICAgfCAgICB8XG4gICAgICAgKiAgOiAgICAnLS0tLSdcbiAgICAgICAqICBgYGBgYGBcbiAgICAgICAqICAgIC4uLi4uLlxuICAgICAgICogICAgOiAsLS06LSxcbiAgICAgICAqICAgIDogfCAgOiB8XG4gICAgICAgKiAgICA6ICctLTotJ1xuICAgICAgICogICAgYGBgYGBgXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgfCAgICB8XG4gICAgICAgKiAgICAgIDotLS0tOlxuICAgICAgICogICAgICBgYGBgYGBcbiAgICAgICAqL1xuICAgICAgY29uc3QgbWFzc1JpZ2h0T3ZlcmxhcCA9IG1hc3MucmlnaHQgPj0gc3ViamVjdC5sZWZ0ICYmIG1hc3MucmlnaHQgPD0gc3ViamVjdC5yaWdodDtcbiAgICAgIGlmIChtYXNzUmlnaHRPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbWFzcy5yaWdodCAtIHN1YmplY3QubGVmdDtcbiAgICAgICAgaWYgKG92ZXJsYXAubGVmdCA8IGRpc3RhbmNlKSBvdmVybGFwLmxlZnQgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLy8gSSdtIG1pc3NpbmcgdG90YWwgb3ZlcmxhcHMgYW5kIHRvdGFsIGVjbGlwc2VzIGJ1dCBJIGRvbid0IGdpdmUgYSBzaGl0XG4gICAgICByZXR1cm4gb3ZlcmxhcDtcbiAgICB9LCB7IHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCwgbGVmdDogMCB9KTtcbiAgfVxufVxuXG5jb25zdCB1bml2ZXJzZSA9IG5ldyBVbml2ZXJzZSgpO1xuZXhwb3J0IGRlZmF1bHQgdW5pdmVyc2U7XG4iLCJleHBvcnQgY29uc3QgcmFuZCA9IChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuICByZXR1cm4gcmVhbE1pbiArIChNYXRoLnJhbmRvbSgpICogZGlmZik7XG59O1xuXG5leHBvcnQgY29uc3QgcmFuZ2UgPSAobWluOiBudW1iZXIsIG1heD86IG51bWJlcik6IG51bWJlcltdID0+IHtcbiAgaWYgKCFtYXgpIHtcbiAgICBtYXggPSBtaW47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBtaW4gPSAwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIH1cbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbiAgY29uc3QgYmFzZUFycmF5ID0gWy4uLkFycmF5KGRpZmYpLmtleXMoKV0ubWFwKG4gPT4gbiArIHJlYWxNaW4pO1xuICByZXR1cm4gbWF4ID49IG1pbiA/IGJhc2VBcnJheSA6IFtyZWFsTWF4LCAuLi5iYXNlQXJyYXkuc2xpY2UoMSkucmV2ZXJzZSgpXTtcbn07XG5cbmV4cG9ydCBjb25zdCBkYW1wZW4gPSAobnVtOiBudW1iZXIsIGJ5OiBudW1iZXIsIGNlbnRlciA9IDApOiBudW1iZXIgPT4ge1xuICAvLyBudW1iZXIgaXMgYWxyZWFkeSBhdCB0aGUgY2VudGVyXG4gIGlmIChudW0gPT09IGNlbnRlcikgcmV0dXJuIGNlbnRlcjtcblxuICAvLyBudW1iZXIgaXMgaGlnaGVyIHRoYW4gdGhlIGNlbnRlcjsgc3VidHJhY3QgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGlmIChudW0gPiBjZW50ZXIpIHtcbiAgICBjb25zdCBuZXdOdW0gPSBudW0gLSBieTtcbiAgICByZXR1cm4gbmV3TnVtIDwgY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xuICB9XG5cbiAgLy8gbnVtYmVyIGlzIGxvd2VyIHRoYW4gdGhlIGNlbnRlcjsgYWRkIGFuZCBkb24ndCBvdmVyc2hvb3QgdGhlIGNlbnRlclxuICBjb25zdCBuZXdOdW0gPSBudW0gKyBieTtcbiAgcmV0dXJuIG5ld051bSA+IGNlbnRlciA/IGNlbnRlciA6IG5ld051bTtcbn07XG5cbmV4cG9ydCBjb25zdCBib3VuZCA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGlmIChudW0gPCByZWFsTWluKSByZXR1cm4gcmVhbE1pbjtcbiAgaWYgKG51bSA+IHJlYWxNYXgpIHJldHVybiByZWFsTWF4O1xuICByZXR1cm4gbnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJldHdlZW4gPSAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgaW5jbHVzaXZlID0gdHJ1ZSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgcmV0dXJuIGluY2x1c2l2ZSA/IChudW0gPj0gcmVhbE1pbiAmJiBudW0gPD0gcmVhbE1heCkgOiAobnVtID4gcmVhbE1pbiAmJiBudW0gPCByZWFsTWF4KTtcbn07XG4iLCJpbXBvcnQgdW5pdmVyc2UsIHsgR1JBVklUWV9YLCBHUkFWSVRZX1ksIEZSSUNUSU9OLCBOT1JNQUxfRFJBRyB9IGZyb20gXCIuL3VuaXZlcnNlXCI7XG5pbXBvcnQgeyBkYW1wZW4sIGJvdW5kIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmNvbnN0IHVwZGF0ZURpbWVuc2lvbiA9IChcbiAgcG9zaXRpb246IG51bWJlcixcbiAgdmVsb2NpdHk6IG51bWJlcixcbiAgYWNjZWxlcmF0aW9uOiBudW1iZXIsXG4gIG1pbjogbnVtYmVyLFxuICBtYXg6IG51bWJlcixcbik6IHsgcG9zaXRpb246IG51bWJlcjsgdmVsb2NpdHk6IG51bWJlciB9ID0+IHtcbiAgbGV0IG5ld1Bvc2l0aW9uID0gcG9zaXRpb24gKyB2ZWxvY2l0eTtcbiAgbGV0IG5ld1ZlbG9jaXR5ID0gdmVsb2NpdHkgKyBhY2NlbGVyYXRpb247XG4gIGlmIChuZXdQb3NpdGlvbiA+IG1heCkge1xuICAgIG5ld1Bvc2l0aW9uID0gbWF4O1xuICAgIG5ld1ZlbG9jaXR5ID0gMDtcbiAgfSBlbHNlIGlmIChuZXdQb3NpdGlvbiA8IG1pbikge1xuICAgIG5ld1Bvc2l0aW9uID0gbWluO1xuICAgIG5ld1ZlbG9jaXR5ID0gMDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IG5ld1Bvc2l0aW9uLFxuICAgIHZlbG9jaXR5OiBuZXdWZWxvY2l0eSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hc3Mge1xuICBwdWJsaWMgbWFzcyA9IDE7IC8vIGtnXG4gIHB1YmxpYyB4ID0gMDsgLy8gcHhcbiAgcHVibGljIHkgPSAwOyAvLyBweFxuICBwdWJsaWMgZHggPSAwOyAvLyBweC9mclxuICBwdWJsaWMgZHkgPSAwOyAvLyBweC9mclxuICBwdWJsaWMgd2lkdGggPSAyNTsgLy8gcHhcbiAgcHVibGljIGhlaWdodCA9IDI1OyAvLyBweFxuICBwdWJsaWMgc3RhdGlvbmFyeSA9IGZhbHNlO1xuICBwcml2YXRlIGRhcmtNYXR0ZXIgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogUGFydGlhbDxNYXNzPikge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0aW9ucyk7XG4gICAgaWYgKCF0aGlzLmRhcmtNYXR0ZXIpIHVuaXZlcnNlLm1hc3Nlcy5wdXNoKHRoaXMpO1xuICB9XG5cbiAgZ2V0IGRyYWdDb2VmZmljaWVudCgpOiBudW1iZXIge1xuICAgIGNvbnN0IHN1cmZhY2VBcmVhID0gKDIgKiB0aGlzLndpZHRoKSArICgyICogdGhpcy5oZWlnaHQpO1xuICAgIHJldHVybiAoc3VyZmFjZUFyZWEgLyB0aGlzLm1hc3MpIC8gTk9STUFMX0RSQUc7XG4gIH1cblxuICBnZXQgYXgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuc3RhdGlvbmFyeSA/IDAgOiBHUkFWSVRZX1g7IH1cbiAgZ2V0IGF5KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnN0YXRpb25hcnkgPyAwIDogR1JBVklUWV9ZOyB9XG5cbiAgZ2V0IGlzQWdhaW5zdFRvcFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnkgPT09IDA7IH1cbiAgZ2V0IGlzQWdhaW5zdEJvdHRvbVdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnkgPT09IHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuaGVpZ2h0OyB9XG4gIGdldCBpc0FnYWluc3RMZWZ0V2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueCA9PT0gMDsgfVxuICBnZXQgaXNBZ2FpbnN0UmlnaHRXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy54ID09PSB3aW5kb3cuaW5uZXJXaWR0aCAtIHRoaXMud2lkdGg7IH1cblxuICBnZXQgdGVybWluYWxWZWxvY2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiAyMDsgLy8gVE9ETzogc2hvdWxkIGJlIGJhc2VkIG9uIGRyYWdcbiAgfVxuXG4gIGdldCB0b3AoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueTsgfVxuICBnZXQgcmlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7IH1cbiAgZ2V0IGJvdHRvbSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy55ICsgdGhpcy5oZWlnaHQ7IH1cbiAgZ2V0IGxlZnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueDsgfVxuXG4gIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBuZXdYRGltZW5zaW9uID0gdXBkYXRlRGltZW5zaW9uKHRoaXMueCwgdGhpcy5keCwgdGhpcy5heCwgdGhpcy53aWR0aCwgd2luZG93LmlubmVyV2lkdGggLSB0aGlzLndpZHRoKTtcbiAgICBjb25zdCBuZXdZRGltZW5zaW9uID0gdXBkYXRlRGltZW5zaW9uKHRoaXMueSwgdGhpcy5keSwgdGhpcy5heSwgdGhpcy5oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuaGVpZ2h0KTtcblxuICAgIHRoaXMueCA9IG5ld1hEaW1lbnNpb24ucG9zaXRpb247XG4gICAgdGhpcy55ID0gbmV3WURpbWVuc2lvbi5wb3NpdGlvbjtcblxuICAgIGNvbnN0IG92ZXJsYXAgPSB1bml2ZXJzZS5vdmVybGFwKHRoaXMpO1xuXG4gICAgY29uc3QgeEZyaWN0aW9uID0gdGhpcy5pc0FnYWluc3RUb3BXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0Qm90dG9tV2FsbCB8fCBvdmVybGFwLnRvcCB8fCBvdmVybGFwLmJvdHRvbSA/IEZSSUNUSU9OIDogMDtcbiAgICBjb25zdCB5RnJpY3Rpb24gPSB0aGlzLmlzQWdhaW5zdExlZnRXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0UmlnaHRXYWxsIHx8IG92ZXJsYXAubGVmdCB8fCBvdmVybGFwLnJpZ2h0ID8gRlJJQ1RJT04gOiAwO1xuICAgIGNvbnN0IGR4V2l0aEZyaWN0aW9uID0gZGFtcGVuKG5ld1hEaW1lbnNpb24udmVsb2NpdHksIHhGcmljdGlvbik7XG4gICAgY29uc3QgZHlXaXRoRnJpY3Rpb24gPSBkYW1wZW4obmV3WURpbWVuc2lvbi52ZWxvY2l0eSwgeUZyaWN0aW9uKTtcblxuICAgIHRoaXMuZHggPSBib3VuZChkeFdpdGhGcmljdGlvbiwgLTEgKiB0aGlzLnRlcm1pbmFsVmVsb2NpdHksIHRoaXMudGVybWluYWxWZWxvY2l0eSk7XG4gICAgdGhpcy5keSA9IGJvdW5kKGR5V2l0aEZyaWN0aW9uLCAtMSAqIHRoaXMudGVybWluYWxWZWxvY2l0eSwgdGhpcy50ZXJtaW5hbFZlbG9jaXR5KTtcblxuICAgIGlmICh0aGlzLmR5ID4gMCAmJiBvdmVybGFwLmJvdHRvbSA+IDApIHtcbiAgICAgIHRoaXMueSAtPSBvdmVybGFwLmJvdHRvbSAtIDE7XG4gICAgICB0aGlzLmR5ID0gMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZHkgPCAwICYmIG92ZXJsYXAudG9wID4gMCkge1xuICAgICAgdGhpcy55ICs9IG92ZXJsYXAudG9wICsgMTtcbiAgICAgIHRoaXMuZHkgPSAwO1xuICAgIH0gZWxzZSBpZiAodGhpcy5keCA+IDAgJiYgb3ZlcmxhcC5yaWdodCA+IDApIHtcbiAgICAgIHRoaXMueCAtPSBvdmVybGFwLnJpZ2h0IC0gMTtcbiAgICAgIHRoaXMuZHggPSAwO1xuICAgIH0gZWxzZSBpZiAodGhpcy5keCA8IDAgJiYgb3ZlcmxhcC5sZWZ0ID4gMCkge1xuICAgICAgdGhpcy54ICs9IG92ZXJsYXAubGVmdCArIDE7XG4gICAgICB0aGlzLmR4ID0gMDtcbiAgICB9XG4gIH1cblxuICBpc0hpdHRpbmcobWFzczogTWFzcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG1hc3NMZWZ0ID0gbWFzcy54O1xuICAgIGNvbnN0IG1hc3NSaWdodCA9IG1hc3MueCArIG1hc3Mud2lkdGg7XG4gICAgY29uc3QgbWFzc1RvcCA9IG1hc3MueTtcbiAgICBjb25zdCBtYXNzQm90dG9tID0gbWFzcy55ICsgbWFzcy5oZWlnaHQ7XG5cbiAgICBjb25zdCB0aGlzTGVmdCA9IHRoaXMueDtcbiAgICBjb25zdCB0aGlzUmlnaHQgPSB0aGlzLnggKyB0aGlzLndpZHRoO1xuICAgIGNvbnN0IHRoaXNUb3AgPSB0aGlzLnk7XG4gICAgY29uc3QgdGhpc0JvdHRvbSA9IHRoaXMueSArIHRoaXMuaGVpZ2h0O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXNSaWdodCA+PSBtYXNzTGVmdFxuICAgICAgJiYgdGhpc0xlZnQgPD0gbWFzc1JpZ2h0XG4gICAgICAmJiB0aGlzQm90dG9tID49IG1hc3NUb3BcbiAgICAgICYmIHRoaXNUb3AgPD0gbWFzc0JvdHRvbVxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBNb3VzZSB7XG4gIHB1YmxpYyB4ID0gMDtcbiAgcHVibGljIHkgPSAwO1xuICBwdWJsaWMgcHJlc3NlZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMueCA9IGV2ZW50Lng7XG4gICAgdGhpcy55ID0gZXZlbnQueTtcbiAgICB0aGlzLnByZXNzZWQgPSBldmVudC5idXR0b25zID09PSAxO1xuICB9XG5cbiAgcG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudDogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdG91Y2hlcyB9ID0gZXZlbnQ7XG4gICAgaWYgKHRvdWNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnByZXNzZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG91Y2ggPSB0b3VjaGVzWzBdO1xuICAgICAgdGhpcy54ID0gdG91Y2guY2xpZW50WDtcbiAgICAgIHRoaXMueSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBtb3VzZSA9IG5ldyBNb3VzZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3VzZTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5cbmltcG9ydCB7IGN0eCB9IGZyb20gJy4vY2FudmFzJztcbmltcG9ydCBnYW1lTG9vcCBmcm9tICcuL2dhbWVMb29wJztcbmltcG9ydCBNYXNzIGZyb20gJy4vTWFzcyc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyJztcbmltcG9ydCB7IHJhbmdlLCByYW5kIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuaW1wb3J0IHVuaXZlcnNlIGZyb20gJy4vdW5pdmVyc2UnO1xuXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG5cbmNvbnN0IG1hc3NlcyA9IHJhbmdlKDEwKS5tYXAoKCkgPT4ge1xuICByZXR1cm4gbmV3IE1hc3Moe1xuICAgIG1hc3M6IHJhbmQoMC41LCA1KSxcbiAgICB4OiByYW5kKDAsIHdpbmRvdy5pbm5lcldpZHRoKSxcbiAgICB5OiByYW5kKDAsIHdpbmRvdy5pbm5lckhlaWdodCksXG4gICAgd2lkdGg6IHJhbmQoNTAsIDE1MCksXG4gICAgaGVpZ2h0OiByYW5kKDUwLCAxNTApLFxuICAgIHN0YXRpb25hcnk6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IHN0YXJzID0gcmFuZ2UoMTAwKS5tYXAoKCkgPT4ge1xuICBjb25zdCBzaXplID0gcmFuZCgxLCA1KTtcbiAgcmV0dXJuIFtcbiAgICByYW5kKDAsIHdpbmRvdy5pbm5lcldpZHRoKSxcbiAgICByYW5kKDAsIHdpbmRvdy5pbm5lckhlaWdodCksXG4gICAgc2l6ZSxcbiAgICBzaXplLFxuICBdIGFzIGNvbnN0O1xufSk7XG5cbmdhbWVMb29wKGN0eCwgKCkgPT4ge1xuICBzdGFycy5mb3JFYWNoKChyZWN0T3B0aW9ucywgaW5kZXgpID0+IHtcbiAgICBjb25zdCBvcGFjaXR5ID0gKChpbmRleCAlIDEwKSArIDEpIC8gMTA7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7b3BhY2l0eX0pYDtcbiAgICBjdHguZmlsbFJlY3QoLi4ucmVjdE9wdGlvbnMpO1xuICB9KTtcblxuICBtYXNzZXMuZm9yRWFjaCgobWFzcykgPT4ge1xuICAgIGlmIChwbGF5ZXIuaXNIaXR0aW5nKG1hc3MpKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjIpJztcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMCwgMCwgMC41KSc7XG4gICAgfVxuXG4gICAgY3R4LmZpbGxSZWN0KG1hc3MueCwgbWFzcy55LCBtYXNzLndpZHRoLCBtYXNzLmhlaWdodCk7XG4gIH0pO1xuXG4gIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAxNTAsIDAsIDEpJztcbiAgY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSwgcGxheWVyLndpZHRoLCBwbGF5ZXIuaGVpZ2h0KTtcblxuICBjb25zdCBmYWNlbWFza0NvbG9yID0gJ3JnYmEoMjIwLCAyMjAsIDI1NSwgMSknO1xuICBjb25zdCBmYWNlbWFza1dpZHRoID0gcGxheWVyLndpZHRoIC8gMjtcbiAgY29uc3QgZmFjZW1hc2tIZWlnaHQgPSBwbGF5ZXIuaGVpZ2h0IC8gNTtcbiAgY29uc3QgZmFjZW1hc2tPZmZzZXRZID0gMztcbiAgY3R4LmZpbGxTdHlsZSA9IGZhY2VtYXNrQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArIChwbGF5ZXIud2lkdGggLSBmYWNlbWFza1dpZHRoKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gICAgY2FzZSAncmlnaHQnOiBjdHguZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IGN0eC5maWxsUmVjdChwbGF5ZXIueCArICgocGxheWVyLndpZHRoIC0gZmFjZW1hc2tXaWR0aCkgLyAyKSwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gIH1cblxuICBjb25zdCBidXJuZXJDb2xvciA9IGByZ2JhKDI1NSwgMTAwLCAwLCAke3JhbmQoMC41LCAwLjc1KX0pYDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWCA9IHJhbmQoMC4yNSwgMC40KSAqIHBsYXllci53aWR0aDtcbiAgY29uc3QgYnVybmVyTGVuZ3RoWSA9IHJhbmQoMC40LCAwLjYpICogcGxheWVyLmhlaWdodDtcbiAgY29uc3QgYnVybmVyQWNyb3NzID0gKHdpZHRoOiBudW1iZXIpOiBudW1iZXIgPT4gMC42ICogd2lkdGg7XG4gIGNvbnN0IGJ1cm5lckFjcm9zc09mZnNldCA9ICh3aWR0aDogbnVtYmVyKTogbnVtYmVyID0+ICh3aWR0aCAtIGJ1cm5lckFjcm9zcyh3aWR0aCkpIC8gMjtcblxuICBjdHguZmlsbFN0eWxlID0gYnVybmVyQ29sb3I7XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lclhTaWRlKSB7XG4gICAgY2FzZSAnbGVmdCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54IC0gYnVybmVyTGVuZ3RoWCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBjYXNlICdyaWdodCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgcGxheWVyLndpZHRoLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBwbGF5ZXJcbiAgICAgIHBsYXllci55ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci5oZWlnaHQpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWSBheGlzXG4gICAgICBidXJuZXJMZW5ndGhYLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci5oZWlnaHQpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuICBzd2l0Y2ggKHBsYXllci5idXJuZXJZU2lkZSkge1xuICAgIGNhc2UgJ2JvdHRvbSc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci53aWR0aCksIC8vIGNlbnRlcmVkIG9uIHRoZSBYIGF4aXNcbiAgICAgIHBsYXllci55ICsgcGxheWVyLmhlaWdodCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgYm90dG9tIG9mIHRoZSBwbGF5ZXJcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIud2lkdGgpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFksIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgY2FzZSAndG9wJzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLndpZHRoKSwgLy8gY2VudGVyZWQgb24gdGhlIFggYXhpc1xuICAgICAgcGxheWVyLnkgLSBidXJuZXJMZW5ndGhZLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSB0b3Agb2YgdGhlIHBsYXllclxuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci53aWR0aCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWSwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBkZWZhdWx0OiBicmVhaztcbiAgfVxuXG4gIHBsYXllci51cGRhdGUoKTtcbn0pO1xuIiwiaW1wb3J0IE1hc3MgZnJvbSBcIi4vTWFzc1wiO1xuaW1wb3J0IG1vdXNlIGZyb20gXCIuL21vdXNlXCI7XG5pbXBvcnQgeyBiZXR3ZWVuIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIE1hc3Mge1xuICBwdWJsaWMgd2lkdGggPSAxNTtcbiAgcHVibGljIGhlaWdodCA9IDIwO1xuICBwdWJsaWMgamV0cGFja0ZvcmNlWCA9IDAuNDsgLy8gKGtnICogcHgpIC8gZnJeMlxuICBwdWJsaWMgamV0cGFja0ZvcmNlWSA9IDEuMzsgLy8gKGtnICogcHgpIC8gZnJeMlxuXG4gIGdldCBidXJuaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBtb3VzZS5wcmVzc2VkO1xuICB9XG5cbiAgZ2V0IGF4SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS54IC0gdGhpcy54O1xuICAgIGNvbnN0IGxlZnRNYXJnaW4gPSAtMSAqIHRoaXMud2lkdGg7XG4gICAgY29uc3QgcmlnaHRNYXJnaW4gPSAyICogdGhpcy53aWR0aDtcbiAgICBpZiAoYmV0d2Vlbihtb3VzZURpc3RhbmNlLCBsZWZ0TWFyZ2luLCByaWdodE1hcmdpbikpIHJldHVybiAwO1xuXG4gICAgY29uc3QgamV0cGFja0FjY2VsZXJhdGlvbiA9IHRoaXMuamV0cGFja0ZvcmNlWCAvIHRoaXMubWFzcztcbiAgICByZXR1cm4gbW91c2VEaXN0YW5jZSA+IDAgPyBqZXRwYWNrQWNjZWxlcmF0aW9uIDogLTEgKiBqZXRwYWNrQWNjZWxlcmF0aW9uO1xuICB9XG5cbiAgZ2V0IGF5SmV0cGFjaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5idXJuaW5nKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1vdXNlRGlzdGFuY2UgPSBtb3VzZS55IC0gdGhpcy55O1xuICAgIGNvbnN0IHRvcE1hcmdpbiA9IDA7XG4gICAgY29uc3QgYm90dG9tTWFyZ2luID0gdGhpcy5oZWlnaHQ7XG4gICAgaWYgKG1vdXNlRGlzdGFuY2UgPj0gMCB8fCBiZXR3ZWVuKG1vdXNlRGlzdGFuY2UsIHRvcE1hcmdpbiwgYm90dG9tTWFyZ2luKSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBqZXRwYWNrQWNjZWxlcmF0aW9uID0gdGhpcy5qZXRwYWNrRm9yY2VZIC8gdGhpcy5tYXNzO1xuICAgIHJldHVybiAtMSAqIGpldHBhY2tBY2NlbGVyYXRpb247XG4gIH1cblxuICBnZXQgYXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gc3VwZXIuYXggKyB0aGlzLmF4SmV0cGFjaztcbiAgfVxuXG4gIGdldCBheSgpOiBudW1iZXIge1xuICAgIHJldHVybiBzdXBlci5heSArIHRoaXMuYXlKZXRwYWNrO1xuICB9XG5cbiAgZ2V0IGJ1cm5lclhTaWRlKCk6ICdsZWZ0J3wnbm9uZSd8J3JpZ2h0JyB7XG4gICAgaWYgKHRoaXMuYXhKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF4SmV0cGFjayA+IDAgPyAnbGVmdCcgOiAncmlnaHQnO1xuICB9XG5cbiAgZ2V0IGJ1cm5lcllTaWRlKCk6ICdib3R0b20nfCdub25lJ3wndG9wJyB7XG4gICAgaWYgKHRoaXMuYXlKZXRwYWNrID09PSAwKSByZXR1cm4gJ25vbmUnO1xuICAgIHJldHVybiB0aGlzLmF5SmV0cGFjayA+IDAgPyAndG9wJyA6ICdib3R0b20nO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9