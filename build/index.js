!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),o=()=>{s.width=window.innerWidth,s.height=window.innerHeight};o(),window.addEventListener("resize",o),document.body.appendChild(s);const n=s.getContext("2d");n||console.error("Canvas '2d' context is not supported.");let r=0;const h=(t,e)=>{requestAnimationFrame(()=>h(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e(r),r+=1};var l=h;const a=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],o=s-i;return i+Math.random()*o};function c(t,...e){const i="number"==typeof e[0]?e[0]:0,s="function"==typeof e[0]?e[0]:e[1],[o,n]=t<i?[t,i]:[i,t];return[...Array(n-o).keys()].map(t=>s?s(t+o):t+o)}c(10),c(0,10),c(0,t=>t.toString()),c(0,10,t=>t.toString());window.range=c;const u=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},d=(t,e,i)=>{const[s,o]=e<i?[e,i]:[i,e];return t<s?s:t>o?o:t},g=(t,e,i,s=!0)=>{const[o,n]=e<i?[e,i]:[i,e];return s?t>=o&&t<=n:t>o&&t<n},f=(t,e)=>Math.abs(t-e),p=0,y=1,m=.25,w=100;var b=new class{constructor(){this.masses=[]}collisionsForMove(t,e){const i=new v(Object.assign(Object.assign(Object.assign({},t),e),{darkMatter:!0})),s=i.x-t.x,o=i.y-t.y,n=o<0,r=o>0,h=s<0,l=s>0;return this.masses.reduce((e,s)=>{if(s===t)return e;if(!i.isHitting(s))return e;const o=s.solid?e.solid:e.ephemeral;if(n&&g(s.bottom,t.top,i.top)){const t=f(s.bottom,i.top);o.top<t&&(o.top=t)}if(r&&g(s.top,t.bottom,i.bottom)){const t=f(s.top,i.bottom);o.bottom<t&&(o.bottom=t)}if(h&&g(s.right,t.left,i.left)){const t=f(s.right,i.left);o.left<t&&(o.left=t)}if(l&&g(s.left,t.right,i.right)){const t=f(s.left,i.right);o.right<t&&(o.right=t)}return e},{solid:{top:0,bottom:0,left:0,right:0},ephemeral:{top:0,bottom:0,left:0,right:0}})}overlappingMasses(t,{ignore:e=[]}={}){return this.masses.filter(i=>t!==i&&!e.includes(i)&&t.isHitting(i))}overlap(t,{ignore:e=[]}={}){return this.overlappingMasses(t,{ignore:e}).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const x=(t,e,i,s,o)=>{let n=t+e,r=e+i;return n>o?(n=o,r=0):n<s&&(n=s,r=0),{position:n,velocity:r}};class v{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,this.solid=!0,this.collectOnTouch=!1,this.touchedAt=null,Object.assign(this,t),this.darkMatter||b.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/w}get ax(){return this.stationary?0:p}get ay(){return this.stationary?0:y}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=x(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=x(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height);let i=t.position,s=e.position,o=t.velocity,n=e.velocity;const r=b.collisionsForMove(this,{x:i,y:s}).solid;r.right>0?(i-=r.right,o=0):r.left>0&&(i+=r.left,o=0),r.bottom>0?(s-=r.bottom,n=0):r.top>0&&(s+=r.top,n=0),this.x=i,this.y=s,(this.isAgainstTopWall||this.isAgainstBottomWall||r.top||r.bottom)&&(o=u(o,m)),(this.isAgainstLeftWall||this.isAgainstRightWall||r.left||r.right)&&(n=u(n,m)),this.dx=d(o,-1*this.terminalVelocity,this.terminalVelocity),this.dy=d(n,-1*this.terminalVelocity,this.terminalVelocity)}isHitting(t){return this.right>=t.left&&this.left<=t.right&&this.bottom>=t.top&&this.top<=t.bottom}}var M=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};class S{constructor(t,e,{size:i,brightness:s,vector:o}={}){this.x=t,this.y=e,this.size=i||a(1,5);const n=void 0===s?Math.random():s;this.brightness=d(n,0,1),this.vector=o||[-1,1]}}const k=window.innerWidth,E=window.innerHeight,F=new class extends v{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3}get burning(){return M.pressed}get axJetpack(){if(!this.burning)return 0;const t=M.x-this.x,e=-1*this.width,i=2*this.width;if(g(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=M.y-this.y,e=this.height;return t>=0||g(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}},j=c(10).map(()=>new v({x:a(0,k),y:a(0,E),width:a(50,150),height:a(50,150),stationary:!0})),A=c(10).map(()=>new v({mass:a(.5,5),x:a(0,k),y:a(0,E),width:25,height:25,solid:!1,stationary:Math.random()>.5,collectOnTouch:!0})),O=[...j,...A],R=[F,...O.filter(t=>!t.stationary)];let T=0;const W=A.length,H=c(100,()=>new S(a(0,k),a(0,E))),L=[];setInterval(()=>{const[t,e]=Math.random()>.5?[a(250,k),0]:[k,a(0,E-250)];L.push(new S(t,e,{brightness:1,vector:[-10,10]}))},2e3),l(n,t=>{H.forEach((e,i)=>{const{x:s,y:o,size:r,brightness:h,vector:l}=e,c=h-Math.random();if(n.fillStyle=`rgba(255, 255, 255, ${(t+i)%20==0?c:h})`,n.fillRect(s,o,r,r),e.x+=l[0],e.y+=l[1],e.x<0||e.x>k||e.y<0||e.y>E){const[t,i]=Math.random()>.5?[a(0,k),0]:[k,a(0,E)];e.x=t,e.y=i}}),L.forEach((t,e)=>{const{x:i,y:s,size:o,brightness:r,vector:h}=t;n.fillStyle=`rgba(255, 255, 255, ${r})`,n.fillRect(i,s,o,o),t.x+=h[0],t.y+=h[1],(t.x<0||t.x>k||t.y<0||t.y>E)&&L.splice(e,1)}),O.forEach((t,e)=>{const i=F.isHitting(t);let s=!0;if(t.solid)n.fillStyle="rgba(255, 0, 0, 0.7)";else if(i&&!t.touchedAt)n.fillStyle="rgba(0, 0, 255, 0.8)",t.touchedAt=(new Date).getTime();else if(t.collectOnTouch&&t.touchedAt){const i=(new Date).getTime()-t.touchedAt;if(i>200)O.splice(e,1),s=!1,T+=1;else{const t=Math.ceil(i/200*255);n.fillStyle=`rgba(${t}, ${t}, 255, 0.8)`}}else n.fillStyle="rgba(0, 100, 255, 0.8)";s&&n.fillRect(t.x,t.y,t.width,t.height)}),n.fillStyle="rgba(0, 150, 0, 1)",n.fillRect(F.x,F.y,F.width,F.height);const e=F.width/2,i=F.height/5;switch(n.fillStyle="rgba(220, 220, 255, 1)",F.burnerXSide){case"left":n.fillRect(F.x+(F.width-e),F.y+3,e,i);break;case"right":n.fillRect(F.x,F.y+3,e,i);break;default:n.fillRect(F.x+(F.width-e)/2,F.y+3,e,i)}const s=`rgba(255, 100, 0, ${a(.5,.75)})`,o=a(.25,.4)*F.width,r=a(.4,.6)*F.height,h=t=>.6*t,l=t=>(t-h(t))/2;switch(n.fillStyle=s,F.burnerXSide){case"left":n.fillRect(F.x-o,F.y+l(F.height),o,h(F.height));break;case"right":n.fillRect(F.x+F.width,F.y+l(F.height),o,h(F.height))}switch(F.burnerYSide){case"bottom":n.fillRect(F.x+l(F.width),F.y+F.height,h(F.width),r);break;case"top":n.fillRect(F.x+l(F.width),F.y-r,h(F.width),r)}n.font="30px Courier",n.fillStyle="#FFF";const c=`${T}/${W}${T===W?" aww yee":""}`;n.fillText(c,50,50),R.forEach(t=>t.update())})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdGllcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdW5pdmVyc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9TdGFyLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJyYW5kIiwibWluIiwibWF4IiwicmVhbE1pbiIsInJlYWxNYXgiLCJkaWZmIiwiTWF0aCIsInJhbmRvbSIsInJhbmdlIiwibWF4QW5kT3JNYXBwZXIiLCJtYXBwZXIiLCJBcnJheSIsImtleXMiLCJtYXAiLCJ0b1N0cmluZyIsImRhbXBlbiIsIm51bSIsImJ5IiwiY2VudGVyIiwibmV3TnVtIiwiYm91bmQiLCJiZXR3ZWVuIiwiaW5jbHVzaXZlIiwiZGlmZmVyZW5jZSIsImFicyIsIkdSQVZJVFlfWCIsIkdSQVZJVFlfWSIsIkZSSUNUSU9OIiwiTk9STUFMX0RSQUciLCJtYXNzZXMiLCJzdWJqZWN0IiwidG9Qb3NpdGlvbiIsIm1vdmVkU3ViamVjdCIsImRhcmtNYXR0ZXIiLCJkeCIsIngiLCJkeSIsInkiLCJtb3ZpbmciLCJ0aGlzIiwicmVkdWNlIiwib3ZlcmxhcHMiLCJvYnN0YWNsZSIsImlzSGl0dGluZyIsIm92ZXJsYXAiLCJzb2xpZCIsImVwaGVtZXJhbCIsImJvdHRvbSIsInRvcCIsImRpc3RhbmNlIiwicmlnaHQiLCJsZWZ0IiwiaWdub3JlIiwiZmlsdGVyIiwibWFzcyIsImluY2x1ZGVzIiwib3ZlcmxhcHBpbmdNYXNzZXMiLCJtZW1vIiwidXBkYXRlRGltZW5zaW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsIm5ld1Bvc2l0aW9uIiwibmV3VmVsb2NpdHkiLCJvcHRpb25zIiwic3RhdGlvbmFyeSIsImNvbGxlY3RPblRvdWNoIiwidG91Y2hlZEF0IiwiYXNzaWduIiwicHVzaCIsIm5ld1hEYXRhIiwiYXgiLCJuZXdZRGF0YSIsImF5IiwibmV3WCIsIm5ld1kiLCJuZXdEeCIsIm5ld0R5Iiwic29saWRPdmVybGFwIiwiY29sbGlzaW9uc0Zvck1vdmUiLCJpc0FnYWluc3RUb3BXYWxsIiwiaXNBZ2FpbnN0Qm90dG9tV2FsbCIsImlzQWdhaW5zdExlZnRXYWxsIiwiaXNBZ2FpbnN0UmlnaHRXYWxsIiwidGVybWluYWxWZWxvY2l0eSIsInByZXNzZWQiLCJldmVudCIsInBvcHVsYXRlRnJvbU1vdXNlRXZlbnQiLCJwb3B1bGF0ZUZyb21Ub3VjaEV2ZW50IiwiYnV0dG9ucyIsInRvdWNoZXMiLCJsZW5ndGgiLCJ0b3VjaCIsImNsaWVudFgiLCJjbGllbnRZIiwic2l6ZSIsImJyaWdodG5lc3MiLCJ2ZWN0b3IiLCJiYXNlQnJpZ2h0bmVzcyIsIk1BWF9YIiwiTUFYX1kiLCJwbGF5ZXIiLCJqZXRwYWNrRm9yY2VYIiwiamV0cGFja0ZvcmNlWSIsImJ1cm5pbmciLCJtb3VzZURpc3RhbmNlIiwibGVmdE1hcmdpbiIsInJpZ2h0TWFyZ2luIiwiamV0cGFja0FjY2VsZXJhdGlvbiIsImJvdHRvbU1hcmdpbiIsInN1cGVyIiwiYXhKZXRwYWNrIiwiYXlKZXRwYWNrIiwic29saWRNYXNzZXMiLCJjb2xsZWN0aWJsZXMiLCJmcmVlTWFzc2VzIiwicG9pbnRzIiwibWF4UG9pbnRzIiwic3RhcnMiLCJzaG9vdGluZ1N0YXJzIiwic2V0SW50ZXJ2YWwiLCJsb29wQ291bnQiLCJmb3JFYWNoIiwic3RhciIsImluZGV4IiwidHdpbmtsZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3BsaWNlIiwiaGl0dGluZ01hc3MiLCJzdGlsbFByZXNlbnQiLCJEYXRlIiwiZ2V0VGltZSIsIm1zU2luY2VUb3VjaCIsInJnVmFsdWUiLCJjZWlsIiwiZmFjZW1hc2tXaWR0aCIsImZhY2VtYXNrSGVpZ2h0IiwiYnVybmVyWFNpZGUiLCJidXJuZXJDb2xvciIsImJ1cm5lckxlbmd0aFgiLCJidXJuZXJMZW5ndGhZIiwiYnVybmVyQWNyb3NzIiwiYnVybmVyQWNyb3NzT2Zmc2V0IiwiYnVybmVyWVNpZGUiLCJmb250Iiwic2NvcmVUZXh0IiwiZmlsbFRleHQiLCJ1cGRhdGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxF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LEdBQUksSUFFNUIvQixFQUFXTyxRQUFRcEUsR0FBUUEsRUFBSzhGIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbmNvbnN0IHN0cmV0Y2hDYW52YXMgPSAoKTogdm9pZCA9PiB7XG4gIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xufTtcblxuc3RyZXRjaENhbnZhcygpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHN0cmV0Y2hDYW52YXMpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5pZiAoIWN0eCkgY29uc29sZS5lcnJvcihcIkNhbnZhcyAnMmQnIGNvbnRleHQgaXMgbm90IHN1cHBvcnRlZC5cIik7XG5cbmV4cG9ydCB7IGN0eCB9O1xuZXhwb3J0IGRlZmF1bHQgY2FudmFzO1xuIiwibGV0IGxvb3BDb3VudCA9IDA7XG5cbmNvbnN0IGdhbWVMb29wID0gKGM6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZHJhdzogKGxvb3BDb3VudDogbnVtYmVyKSA9PiB2b2lkKTogdm9pZCA9PiB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBnYW1lTG9vcChjLCBkcmF3KSk7XG4gIGMuY2xlYXJSZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICBkcmF3KGxvb3BDb3VudCk7XG4gIGxvb3BDb3VudCArPSAxO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUxvb3A7XG4iLCJleHBvcnQgY29uc3QgcmFuZCA9IChtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuICByZXR1cm4gcmVhbE1pbiArIChNYXRoLnJhbmRvbSgpICogZGlmZik7XG59O1xuXG4vLyBleHBvcnQgY29uc3QgcmFuZ2UgPSAobWluOiBudW1iZXIsIG1heD86IG51bWJlcik6IG51bWJlcltdID0+IHtcbi8vICAgaWYgKCFtYXgpIHtcbi8vICAgICBtYXggPSBtaW47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbi8vICAgICBtaW4gPSAwOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4vLyAgIH1cbi8vICAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4vLyAgIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbi8vICAgY29uc3QgYmFzZUFycmF5ID0gWy4uLkFycmF5KGRpZmYpLmtleXMoKV0ubWFwKG4gPT4gbiArIHJlYWxNaW4pO1xuLy8gICByZXR1cm4gbWF4ID49IG1pbiA/IGJhc2VBcnJheSA6IFtyZWFsTWF4LCAuLi5iYXNlQXJyYXkuc2xpY2UoMSkucmV2ZXJzZSgpXTtcbi8vIH07XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5nZTxUPihtaW46IG51bWJlciwgLi4ubWF4QW5kT3JNYXBwZXI6IFtdKTogbnVtYmVyW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbbnVtYmVyXSk6IG51bWJlcltdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogWyhuOiBudW1iZXIpID0+IFRdKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlPFQ+KG1pbjogbnVtYmVyLCAuLi5tYXhBbmRPck1hcHBlcjogW251bWJlciwgKG46IG51bWJlcikgPT4gVF0pOiBUW107XG5leHBvcnQgZnVuY3Rpb24gcmFuZ2U8VD4obWluOiBudW1iZXIsIC4uLm1heEFuZE9yTWFwcGVyOiBbXXxbbnVtYmVyfCgobjogbnVtYmVyKSA9PiBUKV18W251bWJlciwgKG46IG51bWJlcikgPT4gVF0pOiAobnVtYmVyfFQpW10ge1xuICBjb25zdCBtYXggPSB0eXBlb2YgbWF4QW5kT3JNYXBwZXJbMF0gPT09ICdudW1iZXInID8gbWF4QW5kT3JNYXBwZXJbMF0gOiAwO1xuICBjb25zdCBtYXBwZXIgPSB0eXBlb2YgbWF4QW5kT3JNYXBwZXJbMF0gPT09ICdmdW5jdGlvbicgPyBtYXhBbmRPck1hcHBlclswXSA6IG1heEFuZE9yTWFwcGVyWzFdO1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgY29uc3QgZGlmZiA9IHJlYWxNYXggLSByZWFsTWluO1xuICByZXR1cm4gWy4uLkFycmF5KGRpZmYpLmtleXMoKV0ubWFwKG4gPT4gKG1hcHBlciA/IG1hcHBlcihuICsgcmVhbE1pbikgOiBuICsgcmVhbE1pbikpO1xufVxuXG5jb25zdCBhID0gcmFuZ2UoMTApO1xuY29uc3QgYiA9IHJhbmdlKDAsIDEwKTtcbmNvbnN0IGMgPSByYW5nZSgwLCBuID0+IG4udG9TdHJpbmcoKSk7XG5jb25zdCBkID0gcmFuZ2UoMCwgMTAsIG4gPT4gbi50b1N0cmluZygpKTtcblxuKHdpbmRvdyBhcyBhbnkpLnJhbmdlID0gcmFuZ2U7XG5cbmV4cG9ydCBjb25zdCBkYW1wZW4gPSAobnVtOiBudW1iZXIsIGJ5OiBudW1iZXIsIGNlbnRlciA9IDApOiBudW1iZXIgPT4ge1xuICAvLyBudW1iZXIgaXMgYWxyZWFkeSBhdCB0aGUgY2VudGVyXG4gIGlmIChudW0gPT09IGNlbnRlcikgcmV0dXJuIGNlbnRlcjtcblxuICAvLyBudW1iZXIgaXMgaGlnaGVyIHRoYW4gdGhlIGNlbnRlcjsgc3VidHJhY3QgYW5kIGRvbid0IG92ZXJzaG9vdCB0aGUgY2VudGVyXG4gIGlmIChudW0gPiBjZW50ZXIpIHtcbiAgICBjb25zdCBuZXdOdW0gPSBudW0gLSBieTtcbiAgICByZXR1cm4gbmV3TnVtIDwgY2VudGVyID8gY2VudGVyIDogbmV3TnVtO1xuICB9XG5cbiAgLy8gbnVtYmVyIGlzIGxvd2VyIHRoYW4gdGhlIGNlbnRlcjsgYWRkIGFuZCBkb24ndCBvdmVyc2hvb3QgdGhlIGNlbnRlclxuICBjb25zdCBuZXdOdW0gPSBudW0gKyBieTtcbiAgcmV0dXJuIG5ld051bSA+IGNlbnRlciA/IGNlbnRlciA6IG5ld051bTtcbn07XG5cbmV4cG9ydCBjb25zdCBib3VuZCA9IChudW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGlmIChudW0gPCByZWFsTWluKSByZXR1cm4gcmVhbE1pbjtcbiAgaWYgKG51bSA+IHJlYWxNYXgpIHJldHVybiByZWFsTWF4O1xuICByZXR1cm4gbnVtO1xufTtcblxuZXhwb3J0IGNvbnN0IGJldHdlZW4gPSAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgaW5jbHVzaXZlID0gdHJ1ZSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBbcmVhbE1pbiwgcmVhbE1heF0gPSBtaW4gPCBtYXggPyBbbWluLCBtYXhdIDogW21heCwgbWluXTtcbiAgcmV0dXJuIGluY2x1c2l2ZSA/IChudW0gPj0gcmVhbE1pbiAmJiBudW0gPD0gcmVhbE1heCkgOiAobnVtID4gcmVhbE1pbiAmJiBudW0gPCByZWFsTWF4KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkaWZmZXJlbmNlID0gKG46IG51bWJlciwgbTogbnVtYmVyKTogbnVtYmVyID0+IE1hdGguYWJzKG4gLSBtKTtcbiIsImltcG9ydCBNYXNzIGZyb20gXCIuL01hc3NcIjtcbmltcG9ydCB7IGJldHdlZW4sIGRpZmZlcmVuY2UgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuZXhwb3J0IGNvbnN0IEdSQVZJVFlfWCA9IDA7IC8vIHB4L2ZyXjJcbmV4cG9ydCBjb25zdCBHUkFWSVRZX1kgPSAxOyAvLyBweC9mcl4yXG5leHBvcnQgY29uc3QgQUlSX1JFU0lTVEFOQ0UgPSAwLjI1OyAvLyBUT0RPXG5leHBvcnQgY29uc3QgRlJJQ1RJT04gPSAwLjI1OyAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBkZXBlbmRlbnQgb24gbWFzc1xuZXhwb3J0IGNvbnN0IE5PUk1BTF9EUkFHID0gMTAwOyAvLyBzdXJmYWNlIGFyZWEgaW4gcGl4ZWxzLCBwZXIga2lsb2dyYW1cblxuaW50ZXJmYWNlIFBvaW50IHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBPdmVybGFwIHtcbiAgdG9wOiBudW1iZXI7XG4gIGJvdHRvbTogbnVtYmVyO1xuICBsZWZ0OiBudW1iZXI7XG4gIHJpZ2h0OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBPdmVybGFwcyB7XG4gIHNvbGlkOiBPdmVybGFwO1xuICBlcGhlbWVyYWw6IE92ZXJsYXA7XG59XG5cbmNsYXNzIFVuaXZlcnNlIHtcbiAgcHVibGljIG1hc3NlcyA9IFtdIGFzIE1hc3NbXTtcblxuICBjb2xsaXNpb25zRm9yTW92ZShzdWJqZWN0OiBNYXNzLCB0b1Bvc2l0aW9uOiBQb2ludCk6IE92ZXJsYXBzIHtcbiAgICBjb25zdCBtb3ZlZFN1YmplY3QgPSBuZXcgTWFzcyh7XG4gICAgICAuLi5zdWJqZWN0LFxuICAgICAgLi4udG9Qb3NpdGlvbixcbiAgICAgIGRhcmtNYXR0ZXI6IHRydWUsXG4gICAgfSk7XG5cbiAgICBjb25zdCBkeCA9IG1vdmVkU3ViamVjdC54IC0gc3ViamVjdC54O1xuICAgIGNvbnN0IGR5ID0gbW92ZWRTdWJqZWN0LnkgLSBzdWJqZWN0Lnk7XG4gICAgY29uc3QgbW92aW5nID0ge1xuICAgICAgdXA6IGR5IDwgMCxcbiAgICAgIGRvd246IGR5ID4gMCxcbiAgICAgIGxlZnQ6IGR4IDwgMCxcbiAgICAgIHJpZ2h0OiBkeCA+IDAsXG4gICAgfTtcblxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovXG4gICAgcmV0dXJuIHRoaXMubWFzc2VzLnJlZHVjZSgob3ZlcmxhcHMsIG9ic3RhY2xlKSA9PiB7XG4gICAgICBpZiAob2JzdGFjbGUgPT09IHN1YmplY3QpIHJldHVybiBvdmVybGFwcztcblxuICAgICAgY29uc3QgaGl0dGluZ09ic3RhY2xlID0gbW92ZWRTdWJqZWN0LmlzSGl0dGluZyhvYnN0YWNsZSk7XG4gICAgICBpZiAoIWhpdHRpbmdPYnN0YWNsZSkgcmV0dXJuIG92ZXJsYXBzO1xuXG4gICAgICBjb25zdCBvdmVybGFwID0gb2JzdGFjbGUuc29saWQgPyBvdmVybGFwcy5zb2xpZCA6IG92ZXJsYXBzLmVwaGVtZXJhbDtcbiAgICAgIGlmIChtb3ZpbmcudXAgJiYgYmV0d2VlbihvYnN0YWNsZS5ib3R0b20sIHN1YmplY3QudG9wLCBtb3ZlZFN1YmplY3QudG9wKSkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGRpZmZlcmVuY2Uob2JzdGFjbGUuYm90dG9tLCBtb3ZlZFN1YmplY3QudG9wKTtcbiAgICAgICAgaWYgKG92ZXJsYXAudG9wIDwgZGlzdGFuY2UpIG92ZXJsYXAudG9wID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb3ZpbmcuZG93biAmJiBiZXR3ZWVuKG9ic3RhY2xlLnRvcCwgc3ViamVjdC5ib3R0b20sIG1vdmVkU3ViamVjdC5ib3R0b20pKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS50b3AsIG1vdmVkU3ViamVjdC5ib3R0b20pO1xuICAgICAgICBpZiAob3ZlcmxhcC5ib3R0b20gPCBkaXN0YW5jZSkgb3ZlcmxhcC5ib3R0b20gPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdmluZy5sZWZ0ICYmIGJldHdlZW4ob2JzdGFjbGUucmlnaHQsIHN1YmplY3QubGVmdCwgbW92ZWRTdWJqZWN0LmxlZnQpKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlmZmVyZW5jZShvYnN0YWNsZS5yaWdodCwgbW92ZWRTdWJqZWN0LmxlZnQpO1xuICAgICAgICBpZiAob3ZlcmxhcC5sZWZ0IDwgZGlzdGFuY2UpIG92ZXJsYXAubGVmdCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICBpZiAobW92aW5nLnJpZ2h0ICYmIGJldHdlZW4ob2JzdGFjbGUubGVmdCwgc3ViamVjdC5yaWdodCwgbW92ZWRTdWJqZWN0LnJpZ2h0KSkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGRpZmZlcmVuY2Uob2JzdGFjbGUubGVmdCwgbW92ZWRTdWJqZWN0LnJpZ2h0KTtcbiAgICAgICAgaWYgKG92ZXJsYXAucmlnaHQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5yaWdodCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3ZlcmxhcHM7XG4gICAgfSwge1xuICAgICAgc29saWQ6IHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBib3R0b206IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgfSxcbiAgICAgIGVwaGVtZXJhbDoge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgfVxuXG4gIG92ZXJsYXBwaW5nTWFzc2VzKHN1YmplY3Q6IE1hc3MsIHsgaWdub3JlID0gW10gfTogeyBpZ25vcmU/OiBNYXNzW10gfSA9IHt9KTogTWFzc1tdIHtcbiAgICByZXR1cm4gdGhpcy5tYXNzZXMuZmlsdGVyKChtYXNzKSA9PiB7XG4gICAgICBpZiAoc3ViamVjdCA9PT0gbWFzcyB8fCBpZ25vcmUuaW5jbHVkZXMobWFzcykpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBzdWJqZWN0LmlzSGl0dGluZyhtYXNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIG92ZXJsYXAoc3ViamVjdDogTWFzcywgeyBpZ25vcmUgPSBbXSB9OiB7IGlnbm9yZT86IE1hc3NbXSB9ID0ge30pOiBPdmVybGFwIHtcbiAgICBjb25zdCBtYXNzZXMgPSB0aGlzLm92ZXJsYXBwaW5nTWFzc2VzKHN1YmplY3QsIHsgaWdub3JlIH0pO1xuICAgIC8qKlxuICAgICAqICwtLS0tLFxuICAgICAqIHwgICAgfCA8PSBzdWJqZWN0XG4gICAgICogJy0tLS0nXG4gICAgICogLi4uLi4uXG4gICAgICogOiAgICA6IDw9IG1hc3NcbiAgICAgKiBgYGBgYGBcbiAgICAgKi9cbiAgICByZXR1cm4gbWFzc2VzLnJlZHVjZSgobWVtbzogT3ZlcmxhcCwgbWFzcykgPT4ge1xuICAgICAgY29uc3Qgb3ZlcmxhcCA9IG1lbW87XG5cbiAgICAgIC8qKlxuICAgICAgICogLC0tLS0sICAgICwtLS0tLCAgICAsLS4tLSwuLiAgICAsLS0tLSwgICAgLC0tLS0sICAuLiwtLS4tLCAgICAsLS0tLSwgICAgICAsLS0tLSwgICAgLi4sLS0tLSwuLlxuICAgICAgICogfCAgICB8ICAgIHwgLi4ufC4uICB8IDogIHwgOiAgICB8ICAgIHwgIC4ufC4uLiB8ICA6IHwgIDogfCAgICB8ICAgIHwgICAgLi58Li4uLnwuLiAgOiB8ICAgIHwgOlxuICAgICAgICogJy0uLS0nLi4gICctOi0tJyA6ICAnLS0tLSdgYCAgLi4nLS0uLScgIDogJy0tOi0nICBgYCctLS0tJyAgLi4nLS0tLScuLiAgOiAnLS0tLScgOiAgYGAnLS0tLSdgYFxuICAgICAgICogICA6ICAgIDogICAgYGBgYGBgICAgICAgICAgICAgOiAgICA6ICAgIGBgYGBgYCAgICAgICAgICAgICAgOiAgICAgICAgOiAgYGBgYGBgYGBgYFxuICAgICAgICogICBgYGBgYGAgICAgICAgICAgICAgICAgICAgICAgYGBgYGBgICAgICAgICAgICAgICAgICAgICAgICAgYGBgYGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzVG9wT3ZlcmxhcCA9IG1hc3MudG9wID49IHN1YmplY3QudG9wICYmIG1hc3MudG9wIDw9IHN1YmplY3QuYm90dG9tO1xuICAgICAgaWYgKG1hc3NUb3BPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ViamVjdC5ib3R0b20gLSBtYXNzLnRvcDtcbiAgICAgICAgaWYgKG92ZXJsYXAuYm90dG9tIDwgZGlzdGFuY2UpIG92ZXJsYXAuYm90dG9tID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogLi4uLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4uLi4gICAgICAgICAgICAgICAgICAgICAuLi4uLi4uLi4uXG4gICAgICAgKiA6ICAgIDogICAgLi4uLi4uICAgICAgICAgICAgICAgIDogICAgOiAgIC4uLi4uLiAgICAgICAgICAgIDogICAgICAgIDogIC4uLi4uLi4uLi5cbiAgICAgICAqIGBgLC0tLS0sICA6ICwtLTotLCAgLi4sLS0tLSwgICwtYC0tLGBgICwtOi0tLCA6ICAsLS0tLSwuLiAgYGAsLS0tLSxgYCAgOiAsLS0tLSwgOiAgLi4sLS0tLSwuLlxuICAgICAgICogICB8ICAgIHwgIGBgfGBgYCB8ICA6IHwgIDogfCAgfCAgICB8ICAgfCBgYGB8YGAgIHwgOiAgfCA6ICAgIHwgICAgfCAgICBgYHxgYGBgfGBgICA6IHwgICAgfCA6XG4gICAgICAgKiAgICctLS0tJyAgICAnLS0tLScgIGBgJy0tYC0nICAnLS0tLScgICAnLS0tLScgICAgJy1gLS0nYGAgICAgJy0tLS0nICAgICAgJy0tLS0nICAgIGBgJy0tLS0nYGBcbiAgICAgICAqL1xuICAgICAgY29uc3QgbWFzc0JvdHRvbU92ZXJsYXAgPSBtYXNzLmJvdHRvbSA8PSBzdWJqZWN0LmJvdHRvbSAmJiBtYXNzLmJvdHRvbSA+PSBzdWJqZWN0LnRvcDtcbiAgICAgIGlmIChtYXNzQm90dG9tT3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG1hc3MuYm90dG9tIC0gc3ViamVjdC50b3A7XG4gICAgICAgIGlmIChvdmVybGFwLnRvcCA8IGRpc3RhbmNlKSBvdmVybGFwLnRvcCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAsLS0tLTogICAgOlxuICAgICAgICogfCAgICB8YGBgYGBcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogICAuLi4uLi5cbiAgICAgICAqIC4tOi0tLiA6XG4gICAgICAgKiB8IGBgYHxgYFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDotLS0tOlxuICAgICAgICogfGBgYGB8XG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfCAgICB8Li4uLi5cbiAgICAgICAqICctLS0tOiAgICA6XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8IC4uLnwuLlxuICAgICAgICogJy06LS0nIDpcbiAgICAgICAqICAgYGBgYGBgXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwuLi4ufFxuICAgICAgICogOi0tLS06XG4gICAgICAgKiBgYGBgYGBcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAsLS0tLTogICAgOlxuICAgICAgICogfCAgICB8ICAgIDpcbiAgICAgICAqICctLS0tOiAgICA6XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogICAuLi4uLi5cbiAgICAgICAqICwtOi0tLCA6XG4gICAgICAgKiB8IDogIHwgOlxuICAgICAgICogJy06LS0nIDpcbiAgICAgICAqICAgYGBgYGBgXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDotLS0tOlxuICAgICAgICogfCAgICB8XG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzTGVmdE92ZXJsYXAgPSBtYXNzLmxlZnQgPj0gc3ViamVjdC5sZWZ0ICYmIG1hc3MubGVmdCA8PSBzdWJqZWN0LnJpZ2h0O1xuICAgICAgaWYgKG1hc3NMZWZ0T3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHN1YmplY3QucmlnaHQgLSBtYXNzLmxlZnQ7XG4gICAgICAgIGlmIChvdmVybGFwLnJpZ2h0IDwgZGlzdGFuY2UpIG92ZXJsYXAucmlnaHQgPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAuLi4uLi5cbiAgICAgICAqIDogICAgOi0tLS0sXG4gICAgICAgKiBgYGBgYHwgICAgfFxuICAgICAgICogICAgICAnLS0tLSdcbiAgICAgICAqICAgIC4uLi4uLlxuICAgICAgICogICAgOiAsLS06LSxcbiAgICAgICAqICAgIGBgfGBgYCB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIHxgYGBgfFxuICAgICAgICogICAgICAnLS0tLSdcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAuLi4uLnwgICAgfFxuICAgICAgICogOiAgICA6LS0tLSdcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqICAgIC4ufC4uLiB8XG4gICAgICAgKiAgICA6ICctLTotJ1xuICAgICAgICogICAgYGBgYGBgXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogICAgICB8Li4uLnxcbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICogIC4uLi4uLlxuICAgICAgICogIDogICAgLC0tLS0sXG4gICAgICAgKiAgOiAgICB8ICAgIHxcbiAgICAgICAqICA6ICAgICctLS0tJ1xuICAgICAgICogIGBgYGBgYFxuICAgICAgICogICAgLi4uLi4uXG4gICAgICAgKiAgICA6ICwtLTotLFxuICAgICAgICogICAgOiB8ICA6IHxcbiAgICAgICAqICAgIDogJy0tOi0nXG4gICAgICAgKiAgICBgYGBgYGBcbiAgICAgICAqICAgICAgLi4uLi4uXG4gICAgICAgKiAgICAgIDotLS0tOlxuICAgICAgICogICAgICB8ICAgIHxcbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIGBgYGBgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzUmlnaHRPdmVybGFwID0gbWFzcy5yaWdodCA+PSBzdWJqZWN0LmxlZnQgJiYgbWFzcy5yaWdodCA8PSBzdWJqZWN0LnJpZ2h0O1xuICAgICAgaWYgKG1hc3NSaWdodE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBtYXNzLnJpZ2h0IC0gc3ViamVjdC5sZWZ0O1xuICAgICAgICBpZiAob3ZlcmxhcC5sZWZ0IDwgZGlzdGFuY2UpIG92ZXJsYXAubGVmdCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvLyBJJ20gbWlzc2luZyB0b3RhbCBvdmVybGFwcyBhbmQgdG90YWwgZWNsaXBzZXMgYnV0IEkgZG9uJ3QgZ2l2ZSBhIHNoaXRcbiAgICAgIHJldHVybiBvdmVybGFwO1xuICAgIH0sIHtcbiAgICAgIHRvcDogMCxcbiAgICAgIHJpZ2h0OiAwLFxuICAgICAgYm90dG9tOiAwLFxuICAgICAgbGVmdDogMCxcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCB1bml2ZXJzZSA9IG5ldyBVbml2ZXJzZSgpO1xuZXhwb3J0IGRlZmF1bHQgdW5pdmVyc2U7XG4iLCJpbXBvcnQgdW5pdmVyc2UsIHsgR1JBVklUWV9YLCBHUkFWSVRZX1ksIEZSSUNUSU9OLCBOT1JNQUxfRFJBRyB9IGZyb20gXCIuL3VuaXZlcnNlXCI7XG5pbXBvcnQgeyBkYW1wZW4sIGJvdW5kIH0gZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmNvbnN0IHVwZGF0ZURpbWVuc2lvbiA9IChcbiAgcG9zaXRpb246IG51bWJlcixcbiAgdmVsb2NpdHk6IG51bWJlcixcbiAgYWNjZWxlcmF0aW9uOiBudW1iZXIsXG4gIG1pbjogbnVtYmVyLFxuICBtYXg6IG51bWJlcixcbik6IHsgcG9zaXRpb246IG51bWJlcjsgdmVsb2NpdHk6IG51bWJlciB9ID0+IHtcbiAgbGV0IG5ld1Bvc2l0aW9uID0gcG9zaXRpb24gKyB2ZWxvY2l0eTtcbiAgbGV0IG5ld1ZlbG9jaXR5ID0gdmVsb2NpdHkgKyBhY2NlbGVyYXRpb247XG4gIGlmIChuZXdQb3NpdGlvbiA+IG1heCkge1xuICAgIG5ld1Bvc2l0aW9uID0gbWF4O1xuICAgIG5ld1ZlbG9jaXR5ID0gMDtcbiAgfSBlbHNlIGlmIChuZXdQb3NpdGlvbiA8IG1pbikge1xuICAgIG5ld1Bvc2l0aW9uID0gbWluO1xuICAgIG5ld1ZlbG9jaXR5ID0gMDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IG5ld1Bvc2l0aW9uLFxuICAgIHZlbG9jaXR5OiBuZXdWZWxvY2l0eSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hc3Mge1xuICBwdWJsaWMgbWFzcyA9IDE7IC8vIGtnXG4gIHB1YmxpYyB4ID0gMDsgLy8gcHhcbiAgcHVibGljIHkgPSAwOyAvLyBweFxuICBwdWJsaWMgZHggPSAwOyAvLyBweC9mclxuICBwdWJsaWMgZHkgPSAwOyAvLyBweC9mclxuICBwdWJsaWMgd2lkdGggPSAyNTsgLy8gcHhcbiAgcHVibGljIGhlaWdodCA9IDI1OyAvLyBweFxuICBwdWJsaWMgc3RhdGlvbmFyeSA9IGZhbHNlOyAvLyBkb2Vzbid0IG1vdmVcbiAgcHVibGljIGRhcmtNYXR0ZXIgPSBmYWxzZTsgLy8gZG9lc24ndCBpbnRlcmFjdFxuICBwdWJsaWMgc29saWQgPSB0cnVlOyAvLyBjYW4ndCBwYXNzIHRocm91Z2ggaXRcbiAgcHVibGljIGNvbGxlY3RPblRvdWNoID0gZmFsc2U7XG4gIHB1YmxpYyB0b3VjaGVkQXQgPSBudWxsIGFzIG51bGx8bnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBQYXJ0aWFsPE1hc3M+KSB7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKTtcbiAgICBpZiAoIXRoaXMuZGFya01hdHRlcikgdW5pdmVyc2UubWFzc2VzLnB1c2godGhpcyk7XG4gIH1cblxuICBnZXQgZHJhZ0NvZWZmaWNpZW50KCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3VyZmFjZUFyZWEgPSAoMiAqIHRoaXMud2lkdGgpICsgKDIgKiB0aGlzLmhlaWdodCk7XG4gICAgcmV0dXJuIChzdXJmYWNlQXJlYSAvIHRoaXMubWFzcykgLyBOT1JNQUxfRFJBRztcbiAgfVxuXG4gIGdldCBheCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zdGF0aW9uYXJ5ID8gMCA6IEdSQVZJVFlfWDsgfVxuICBnZXQgYXkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuc3RhdGlvbmFyeSA/IDAgOiBHUkFWSVRZX1k7IH1cblxuICBnZXQgaXNBZ2FpbnN0VG9wV2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueSA9PT0gMDsgfVxuICBnZXQgaXNBZ2FpbnN0Qm90dG9tV2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueSA9PT0gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5oZWlnaHQ7IH1cbiAgZ2V0IGlzQWdhaW5zdExlZnRXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy54ID09PSAwOyB9XG4gIGdldCBpc0FnYWluc3RSaWdodFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnggPT09IHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy53aWR0aDsgfVxuXG4gIGdldCB0ZXJtaW5hbFZlbG9jaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDIwOyAvLyBUT0RPOiBzaG91bGQgYmUgYmFzZWQgb24gZHJhZ1xuICB9XG5cbiAgZ2V0IHRvcCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy55OyB9XG4gIGdldCByaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy54ICsgdGhpcy53aWR0aDsgfVxuICBnZXQgYm90dG9tKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodDsgfVxuICBnZXQgbGVmdCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy54OyB9XG5cbiAgdXBkYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IG5ld1hEYXRhID0gdXBkYXRlRGltZW5zaW9uKHRoaXMueCwgdGhpcy5keCwgdGhpcy5heCwgdGhpcy53aWR0aCwgd2luZG93LmlubmVyV2lkdGggLSB0aGlzLndpZHRoKTtcbiAgICBjb25zdCBuZXdZRGF0YSA9IHVwZGF0ZURpbWVuc2lvbih0aGlzLnksIHRoaXMuZHksIHRoaXMuYXksIHRoaXMuaGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmhlaWdodCk7XG5cbiAgICBsZXQgbmV3WCA9IG5ld1hEYXRhLnBvc2l0aW9uO1xuICAgIGxldCBuZXdZID0gbmV3WURhdGEucG9zaXRpb247XG4gICAgbGV0IG5ld0R4ID0gbmV3WERhdGEudmVsb2NpdHk7XG4gICAgbGV0IG5ld0R5ID0gbmV3WURhdGEudmVsb2NpdHk7XG5cbiAgICBjb25zdCBvdmVybGFwcyA9IHVuaXZlcnNlLmNvbGxpc2lvbnNGb3JNb3ZlKHRoaXMsIHsgeDogbmV3WCwgeTogbmV3WSB9KTtcbiAgICBjb25zdCBzb2xpZE92ZXJsYXAgPSBvdmVybGFwcy5zb2xpZDtcblxuICAgIGlmIChzb2xpZE92ZXJsYXAucmlnaHQgPiAwKSB7XG4gICAgICBuZXdYIC09IHNvbGlkT3ZlcmxhcC5yaWdodDtcbiAgICAgIG5ld0R4ID0gMDtcbiAgICB9IGVsc2UgaWYgKHNvbGlkT3ZlcmxhcC5sZWZ0ID4gMCkge1xuICAgICAgbmV3WCArPSBzb2xpZE92ZXJsYXAubGVmdDtcbiAgICAgIG5ld0R4ID0gMDtcbiAgICB9XG5cbiAgICBpZiAoc29saWRPdmVybGFwLmJvdHRvbSA+IDApIHtcbiAgICAgIG5ld1kgLT0gc29saWRPdmVybGFwLmJvdHRvbTtcbiAgICAgIG5ld0R5ID0gMDtcbiAgICB9IGVsc2UgaWYgKHNvbGlkT3ZlcmxhcC50b3AgPiAwKSB7XG4gICAgICBuZXdZICs9IHNvbGlkT3ZlcmxhcC50b3A7XG4gICAgICBuZXdEeSA9IDA7XG4gICAgfVxuXG4gICAgdGhpcy54ID0gbmV3WDtcbiAgICB0aGlzLnkgPSBuZXdZO1xuXG4gICAgaWYgKHRoaXMuaXNBZ2FpbnN0VG9wV2FsbCB8fCB0aGlzLmlzQWdhaW5zdEJvdHRvbVdhbGwgfHwgc29saWRPdmVybGFwLnRvcCB8fCBzb2xpZE92ZXJsYXAuYm90dG9tKSB7XG4gICAgICBuZXdEeCA9IGRhbXBlbihuZXdEeCwgRlJJQ1RJT04pO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc0FnYWluc3RMZWZ0V2FsbCB8fCB0aGlzLmlzQWdhaW5zdFJpZ2h0V2FsbCB8fCBzb2xpZE92ZXJsYXAubGVmdCB8fCBzb2xpZE92ZXJsYXAucmlnaHQpIHtcbiAgICAgIG5ld0R5ID0gZGFtcGVuKG5ld0R5LCBGUklDVElPTik7XG4gICAgfVxuXG4gICAgdGhpcy5keCA9IGJvdW5kKG5ld0R4LCAtMSAqIHRoaXMudGVybWluYWxWZWxvY2l0eSwgdGhpcy50ZXJtaW5hbFZlbG9jaXR5KTtcbiAgICB0aGlzLmR5ID0gYm91bmQobmV3RHksIC0xICogdGhpcy50ZXJtaW5hbFZlbG9jaXR5LCB0aGlzLnRlcm1pbmFsVmVsb2NpdHkpO1xuICB9XG5cbiAgaXNIaXR0aW5nKG1hc3M6IE1hc3MpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5yaWdodCA+PSBtYXNzLmxlZnRcbiAgICAgICYmIHRoaXMubGVmdCA8PSBtYXNzLnJpZ2h0XG4gICAgICAmJiB0aGlzLmJvdHRvbSA+PSBtYXNzLnRvcFxuICAgICAgJiYgdGhpcy50b3AgPD0gbWFzcy5ib3R0b21cbiAgICApO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTW91c2Uge1xuICBwdWJsaWMgeCA9IDA7XG4gIHB1YmxpYyB5ID0gMDtcbiAgcHVibGljIHByZXNzZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tTW91c2VFdmVudChldmVudCk7XG4gICAgfSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIHBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnggPSBldmVudC54O1xuICAgIHRoaXMueSA9IGV2ZW50Lnk7XG4gICAgdGhpcy5wcmVzc2VkID0gZXZlbnQuYnV0dG9ucyA9PT0gMTtcbiAgfVxuXG4gIHBvcHVsYXRlRnJvbVRvdWNoRXZlbnQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB7IHRvdWNoZXMgfSA9IGV2ZW50O1xuICAgIGlmICh0b3VjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRvdWNoID0gdG91Y2hlc1swXTtcbiAgICAgIHRoaXMueCA9IHRvdWNoLmNsaWVudFg7XG4gICAgICB0aGlzLnkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgbW91c2UgPSBuZXcgTW91c2UoKTtcblxuZXhwb3J0IGRlZmF1bHQgbW91c2U7XG4iLCJpbXBvcnQgeyByYW5kLCBib3VuZCB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGFyIHtcbiAgcHVibGljIHg6IG51bWJlcjtcbiAgcHVibGljIHk6IG51bWJlcjtcbiAgcHVibGljIHNpemU6IG51bWJlcjtcbiAgcHVibGljIGJyaWdodG5lc3M6IG51bWJlcjtcbiAgcHVibGljIHZlY3RvcjogcmVhZG9ubHkgW251bWJlciwgbnVtYmVyXTtcblxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlciwgeyBzaXplLCBicmlnaHRuZXNzLCB2ZWN0b3IgfTogUGFydGlhbDxTdGFyPiA9IHt9KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuc2l6ZSA9IHNpemUgfHwgcmFuZCgxLCA1KTtcbiAgICBjb25zdCBiYXNlQnJpZ2h0bmVzcyA9ICh0eXBlb2YgYnJpZ2h0bmVzcyA9PT0gJ3VuZGVmaW5lZCcgPyBNYXRoLnJhbmRvbSgpIDogYnJpZ2h0bmVzcyk7XG4gICAgdGhpcy5icmlnaHRuZXNzID0gYm91bmQoYmFzZUJyaWdodG5lc3MsIDAsIDEpO1xuICAgIHRoaXMudmVjdG9yID0gdmVjdG9yIHx8IFstMSwgMV07XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlIG1heC1jbGFzc2VzLXBlci1maWxlICovXG5cbmltcG9ydCB7IGN0eCB9IGZyb20gJy4vY2FudmFzJztcbmltcG9ydCBnYW1lTG9vcCBmcm9tICcuL2dhbWVMb29wJztcbmltcG9ydCBNYXNzIGZyb20gJy4vTWFzcyc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyJztcbmltcG9ydCB7IHJhbmdlLCByYW5kIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuaW1wb3J0IFN0YXIgZnJvbSAnLi9TdGFyJztcblxuY29uc3QgRVBIRU1FUkFMX0RJU0FQUEVBUkFOQ0VfVElNRSA9IDIwMDtcbmNvbnN0IE1BWF9YID0gd2luZG93LmlubmVyV2lkdGg7XG5jb25zdCBNQVhfWSA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuY29uc3QgcGxheWVyID0gbmV3IFBsYXllcigpO1xuXG5jb25zdCBzb2xpZE1hc3NlcyA9IHJhbmdlKDEwKS5tYXAoKCkgPT4ge1xuICByZXR1cm4gbmV3IE1hc3Moe1xuICAgIHg6IHJhbmQoMCwgTUFYX1gpLFxuICAgIHk6IHJhbmQoMCwgTUFYX1kpLFxuICAgIHdpZHRoOiByYW5kKDUwLCAxNTApLFxuICAgIGhlaWdodDogcmFuZCg1MCwgMTUwKSxcbiAgICBzdGF0aW9uYXJ5OiB0cnVlLFxuICB9KTtcbn0pO1xuXG5jb25zdCBjb2xsZWN0aWJsZXMgPSByYW5nZSgxMCkubWFwKCgpID0+IHtcbiAgcmV0dXJuIG5ldyBNYXNzKHtcbiAgICBtYXNzOiByYW5kKDAuNSwgNSksXG4gICAgeDogcmFuZCgwLCBNQVhfWCksXG4gICAgeTogcmFuZCgwLCBNQVhfWSksXG4gICAgd2lkdGg6IDI1LFxuICAgIGhlaWdodDogMjUsXG4gICAgc29saWQ6IGZhbHNlLFxuICAgIHN0YXRpb25hcnk6IE1hdGgucmFuZG9tKCkgPiAwLjUsXG4gICAgY29sbGVjdE9uVG91Y2g6IHRydWUsXG4gIH0pO1xufSk7XG5cbmNvbnN0IG1hc3NlcyA9IFsuLi5zb2xpZE1hc3NlcywgLi4uY29sbGVjdGlibGVzXTtcbmNvbnN0IGZyZWVNYXNzZXMgPSBbcGxheWVyLCAuLi5tYXNzZXMuZmlsdGVyKG1hc3MgPT4gIW1hc3Muc3RhdGlvbmFyeSldO1xubGV0IHBvaW50cyA9IDA7XG5jb25zdCBtYXhQb2ludHMgPSBjb2xsZWN0aWJsZXMubGVuZ3RoO1xuXG5jb25zdCBzdGFycyA9IHJhbmdlKDEwMCwgKCkgPT4gbmV3IFN0YXIocmFuZCgwLCBNQVhfWCksIHJhbmQoMCwgTUFYX1kpKSk7XG5cbmNvbnN0IHNob290aW5nU3RhcnMgPSBbXSBhcyBTdGFyW107XG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGNvbnN0IFt4LCB5XSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyBbcmFuZCgyNTAsIE1BWF9YKSwgMF0gOiBbTUFYX1gsIHJhbmQoMCwgTUFYX1kgLSAyNTApXTtcbiAgY29uc3QgdmVjdG9yID0gWy0xMCwgMTBdIGFzIGNvbnN0O1xuICBzaG9vdGluZ1N0YXJzLnB1c2gobmV3IFN0YXIoeCwgeSwgeyBicmlnaHRuZXNzOiAxLCB2ZWN0b3IgfSkpO1xufSwgMjAwMCk7XG5cbmdhbWVMb29wKGN0eCwgKGxvb3BDb3VudCkgPT4ge1xuICAvLyBzdGFycy5mb3JFYWNoKCh7IHgsIHksIHNpemUsIGJyaWdodG5lc3MgfSwgaW5kZXgpID0+IHtcbiAgLy8gICBjb25zdCB0d2lua2xlID0gYnJpZ2h0bmVzcyAtIE1hdGgucmFuZG9tKCk7XG4gIC8vICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7KGxvb3BDb3VudCArIGluZGV4KSAlIDIwID09PSAwID8gdHdpbmtsZSA6IGJyaWdodG5lc3N9KWA7XG4gIC8vICAgY3R4LmZpbGxSZWN0KHgsIHksIHNpemUsIHNpemUpO1xuICAvLyB9KTtcbiAgc3RhcnMuZm9yRWFjaCgoc3RhciwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IHgsIHksIHNpemUsIGJyaWdodG5lc3MsIHZlY3RvciB9ID0gc3RhcjtcbiAgICBjb25zdCB0d2lua2xlID0gYnJpZ2h0bmVzcyAtIE1hdGgucmFuZG9tKCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7KGxvb3BDb3VudCArIGluZGV4KSAlIDIwID09PSAwID8gdHdpbmtsZSA6IGJyaWdodG5lc3N9KWA7XG4gICAgY3R4LmZpbGxSZWN0KHgsIHksIHNpemUsIHNpemUpO1xuICAgIC8vIGlmIChsb29wQ291bnQgJSAxMCA9PT0gMCkge1xuICAgIHN0YXIueCArPSB2ZWN0b3JbMF07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBzdGFyLnkgKz0gdmVjdG9yWzFdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgLy8gfVxuICAgIGlmIChzdGFyLnggPCAwIHx8IHN0YXIueCA+IE1BWF9YIHx8IHN0YXIueSA8IDAgfHwgc3Rhci55ID4gTUFYX1kpIHtcbiAgICAgIGNvbnN0IFtuZXdYLCBuZXdZXSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyBbcmFuZCgwLCBNQVhfWCksIDBdIDogW01BWF9YLCByYW5kKDAsIE1BWF9ZKV07XG4gICAgICBzdGFyLnggPSBuZXdYOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBzdGFyLnkgPSBuZXdZOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgfVxuICB9KTtcblxuICBzaG9vdGluZ1N0YXJzLmZvckVhY2goKHN0YXIsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgeyB4LCB5LCBzaXplLCBicmlnaHRuZXNzLCB2ZWN0b3IgfSA9IHN0YXI7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAyNTUsICR7YnJpZ2h0bmVzc30pYDtcbiAgICBjdHguZmlsbFJlY3QoeCwgeSwgc2l6ZSwgc2l6ZSk7XG4gICAgc3Rhci54ICs9IHZlY3RvclswXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHN0YXIueSArPSB2ZWN0b3JbMV07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBpZiAoc3Rhci54IDwgMCB8fCBzdGFyLnggPiBNQVhfWCB8fCBzdGFyLnkgPCAwIHx8IHN0YXIueSA+IE1BWF9ZKSB7XG4gICAgICBzaG9vdGluZ1N0YXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9KTtcblxuICBtYXNzZXMuZm9yRWFjaCgobWFzcywgaW5kZXgpID0+IHtcbiAgICBjb25zdCBoaXR0aW5nTWFzcyA9IHBsYXllci5pc0hpdHRpbmcobWFzcyk7XG4gICAgbGV0IHN0aWxsUHJlc2VudCA9IHRydWU7XG5cbiAgICBpZiAobWFzcy5zb2xpZCkge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMCwgMCwgMC43KSc7XG4gICAgfSBlbHNlIGlmIChoaXR0aW5nTWFzcyAmJiAhbWFzcy50b3VjaGVkQXQpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAyNTUsIDAuOCknO1xuICAgICAgbWFzcy50b3VjaGVkQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIH0gZWxzZSBpZiAobWFzcy5jb2xsZWN0T25Ub3VjaCAmJiBtYXNzLnRvdWNoZWRBdCkge1xuICAgICAgY29uc3QgbXNTaW5jZVRvdWNoID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBtYXNzLnRvdWNoZWRBdDtcbiAgICAgIGlmIChtc1NpbmNlVG91Y2ggPiBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FKSB7XG4gICAgICAgIG1hc3Nlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBzdGlsbFByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgcG9pbnRzICs9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZ1ZhbHVlID0gTWF0aC5jZWlsKChtc1NpbmNlVG91Y2ggLyBFUEhFTUVSQUxfRElTQVBQRUFSQU5DRV9USU1FKSAqIDI1NSk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiYSgke3JnVmFsdWV9LCAke3JnVmFsdWV9LCAyNTUsIDAuOClgO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMTAwLCAyNTUsIDAuOCknO1xuICAgIH1cblxuICAgIGlmIChzdGlsbFByZXNlbnQpIGN0eC5maWxsUmVjdChtYXNzLngsIG1hc3MueSwgbWFzcy53aWR0aCwgbWFzcy5oZWlnaHQpO1xuICB9KTtcblxuICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMTUwLCAwLCAxKSc7XG4gIGN0eC5maWxsUmVjdChwbGF5ZXIueCwgcGxheWVyLnksIHBsYXllci53aWR0aCwgcGxheWVyLmhlaWdodCk7XG5cbiAgY29uc3QgZmFjZW1hc2tDb2xvciA9ICdyZ2JhKDIyMCwgMjIwLCAyNTUsIDEpJztcbiAgY29uc3QgZmFjZW1hc2tXaWR0aCA9IHBsYXllci53aWR0aCAvIDI7XG4gIGNvbnN0IGZhY2VtYXNrSGVpZ2h0ID0gcGxheWVyLmhlaWdodCAvIDU7XG4gIGNvbnN0IGZhY2VtYXNrT2Zmc2V0WSA9IDM7XG4gIGN0eC5maWxsU3R5bGUgPSBmYWNlbWFza0NvbG9yO1xuICBzd2l0Y2ggKHBsYXllci5idXJuZXJYU2lkZSkge1xuICAgIGNhc2UgJ2xlZnQnOiBjdHguZmlsbFJlY3QocGxheWVyLnggKyAocGxheWVyLndpZHRoIC0gZmFjZW1hc2tXaWR0aCksIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICAgIGNhc2UgJ3JpZ2h0JzogY3R4LmZpbGxSZWN0KHBsYXllci54LCBwbGF5ZXIueSArIGZhY2VtYXNrT2Zmc2V0WSwgZmFjZW1hc2tXaWR0aCwgZmFjZW1hc2tIZWlnaHQpOyBicmVhaztcbiAgICBkZWZhdWx0OiBjdHguZmlsbFJlY3QocGxheWVyLnggKyAoKHBsYXllci53aWR0aCAtIGZhY2VtYXNrV2lkdGgpIC8gMiksIHBsYXllci55ICsgZmFjZW1hc2tPZmZzZXRZLCBmYWNlbWFza1dpZHRoLCBmYWNlbWFza0hlaWdodCk7IGJyZWFrO1xuICB9XG5cbiAgY29uc3QgYnVybmVyQ29sb3IgPSBgcmdiYSgyNTUsIDEwMCwgMCwgJHtyYW5kKDAuNSwgMC43NSl9KWA7XG4gIGNvbnN0IGJ1cm5lckxlbmd0aFggPSByYW5kKDAuMjUsIDAuNCkgKiBwbGF5ZXIud2lkdGg7XG4gIGNvbnN0IGJ1cm5lckxlbmd0aFkgPSByYW5kKDAuNCwgMC42KSAqIHBsYXllci5oZWlnaHQ7XG4gIGNvbnN0IGJ1cm5lckFjcm9zcyA9ICh3aWR0aDogbnVtYmVyKTogbnVtYmVyID0+IDAuNiAqIHdpZHRoO1xuICBjb25zdCBidXJuZXJBY3Jvc3NPZmZzZXQgPSAod2lkdGg6IG51bWJlcik6IG51bWJlciA9PiAod2lkdGggLSBidXJuZXJBY3Jvc3Mod2lkdGgpKSAvIDI7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IGJ1cm5lckNvbG9yO1xuICBzd2l0Y2ggKHBsYXllci5idXJuZXJYU2lkZSkge1xuICAgIGNhc2UgJ2xlZnQnOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCAtIGJ1cm5lckxlbmd0aFgsIC8vIHBvc2l0aW9uZWQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgcGxheWVyXG4gICAgICBwbGF5ZXIueSArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIuaGVpZ2h0KSwgLy8gY2VudGVyZWQgb24gdGhlIFkgYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWCwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIuaGVpZ2h0KSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgY2FzZSAncmlnaHQnOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCArIHBsYXllci53aWR0aCwgLy8gcG9zaXRpb25lZCBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgcGxheWVyXG4gICAgICBwbGF5ZXIueSArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIuaGVpZ2h0KSwgLy8gY2VudGVyZWQgb24gdGhlIFkgYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWCwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIuaGVpZ2h0KSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogYnJlYWs7XG4gIH1cbiAgc3dpdGNoIChwbGF5ZXIuYnVybmVyWVNpZGUpIHtcbiAgICBjYXNlICdib3R0b20nOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIud2lkdGgpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWCBheGlzXG4gICAgICBwbGF5ZXIueSArIHBsYXllci5oZWlnaHQsIC8vIHBvc2l0aW9uZWQgb24gdGhlIGJvdHRvbSBvZiB0aGUgcGxheWVyXG4gICAgICBidXJuZXJBY3Jvc3MocGxheWVyLndpZHRoKSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWCBheGlzXG4gICAgICBidXJuZXJMZW5ndGhZLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFkgYXhpc1xuICAgICk7IGJyZWFrO1xuICAgIGNhc2UgJ3RvcCc6IGN0eC5maWxsUmVjdChcbiAgICAgIHBsYXllci54ICsgYnVybmVyQWNyb3NzT2Zmc2V0KHBsYXllci53aWR0aCksIC8vIGNlbnRlcmVkIG9uIHRoZSBYIGF4aXNcbiAgICAgIHBsYXllci55IC0gYnVybmVyTGVuZ3RoWSwgLy8gcG9zaXRpb25lZCBvbiB0aGUgdG9wIG9mIHRoZSBwbGF5ZXJcbiAgICAgIGJ1cm5lckFjcm9zcyhwbGF5ZXIud2lkdGgpLCAvLyBjcm9zcy1zZWN0aW9uIG9yaWVudGVkIGFsb25nIHRoZSBYIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFksIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWSBheGlzXG4gICAgKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogYnJlYWs7XG4gIH1cblxuICBjdHguZm9udCA9IFwiMzBweCBDb3VyaWVyXCI7XG4gIGN0eC5maWxsU3R5bGUgPSAnI0ZGRic7XG4gIGNvbnN0IHNjb3JlVGV4dCA9IGAke3BvaW50c30vJHttYXhQb2ludHN9JHtwb2ludHMgPT09IG1heFBvaW50cyA/ICcgYXd3IHllZScgOiAnJ31gO1xuICBjdHguZmlsbFRleHQoc2NvcmVUZXh0LCA1MCwgNTApO1xuXG4gIGZyZWVNYXNzZXMuZm9yRWFjaChtYXNzID0+IG1hc3MudXBkYXRlKCkpO1xufSk7XG4iLCJpbXBvcnQgTWFzcyBmcm9tIFwiLi9NYXNzXCI7XG5pbXBvcnQgbW91c2UgZnJvbSBcIi4vbW91c2VcIjtcbmltcG9ydCB7IGJldHdlZW4gfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgTWFzcyB7XG4gIHB1YmxpYyB3aWR0aCA9IDE1O1xuICBwdWJsaWMgaGVpZ2h0ID0gMjA7XG4gIHB1YmxpYyBqZXRwYWNrRm9yY2VYID0gMC40OyAvLyAoa2cgKiBweCkgLyBmcl4yXG4gIHB1YmxpYyBqZXRwYWNrRm9yY2VZID0gMS4zOyAvLyAoa2cgKiBweCkgLyBmcl4yXG5cbiAgZ2V0IGJ1cm5pbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1vdXNlLnByZXNzZWQ7XG4gIH1cblxuICBnZXQgYXhKZXRwYWNrKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmJ1cm5pbmcpIHJldHVybiAwO1xuXG4gICAgY29uc3QgbW91c2VEaXN0YW5jZSA9IG1vdXNlLnggLSB0aGlzLng7XG4gICAgY29uc3QgbGVmdE1hcmdpbiA9IC0xICogdGhpcy53aWR0aDtcbiAgICBjb25zdCByaWdodE1hcmdpbiA9IDIgKiB0aGlzLndpZHRoO1xuICAgIGlmIChiZXR3ZWVuKG1vdXNlRGlzdGFuY2UsIGxlZnRNYXJnaW4sIHJpZ2h0TWFyZ2luKSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBqZXRwYWNrQWNjZWxlcmF0aW9uID0gdGhpcy5qZXRwYWNrRm9yY2VYIC8gdGhpcy5tYXNzO1xuICAgIHJldHVybiBtb3VzZURpc3RhbmNlID4gMCA/IGpldHBhY2tBY2NlbGVyYXRpb24gOiAtMSAqIGpldHBhY2tBY2NlbGVyYXRpb247XG4gIH1cblxuICBnZXQgYXlKZXRwYWNrKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmJ1cm5pbmcpIHJldHVybiAwO1xuXG4gICAgY29uc3QgbW91c2VEaXN0YW5jZSA9IG1vdXNlLnkgLSB0aGlzLnk7XG4gICAgY29uc3QgdG9wTWFyZ2luID0gMDtcbiAgICBjb25zdCBib3R0b21NYXJnaW4gPSB0aGlzLmhlaWdodDtcbiAgICBpZiAobW91c2VEaXN0YW5jZSA+PSAwIHx8IGJldHdlZW4obW91c2VEaXN0YW5jZSwgdG9wTWFyZ2luLCBib3R0b21NYXJnaW4pKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGpldHBhY2tBY2NlbGVyYXRpb24gPSB0aGlzLmpldHBhY2tGb3JjZVkgLyB0aGlzLm1hc3M7XG4gICAgcmV0dXJuIC0xICogamV0cGFja0FjY2VsZXJhdGlvbjtcbiAgfVxuXG4gIGdldCBheCgpOiBudW1iZXIge1xuICAgIHJldHVybiBzdXBlci5heCArIHRoaXMuYXhKZXRwYWNrO1xuICB9XG5cbiAgZ2V0IGF5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHN1cGVyLmF5ICsgdGhpcy5heUpldHBhY2s7XG4gIH1cblxuICBnZXQgYnVybmVyWFNpZGUoKTogJ2xlZnQnfCdub25lJ3wncmlnaHQnIHtcbiAgICBpZiAodGhpcy5heEpldHBhY2sgPT09IDApIHJldHVybiAnbm9uZSc7XG4gICAgcmV0dXJuIHRoaXMuYXhKZXRwYWNrID4gMCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gIH1cblxuICBnZXQgYnVybmVyWVNpZGUoKTogJ2JvdHRvbSd8J25vbmUnfCd0b3AnIHtcbiAgICBpZiAodGhpcy5heUpldHBhY2sgPT09IDApIHJldHVybiAnbm9uZSc7XG4gICAgcmV0dXJuIHRoaXMuYXlKZXRwYWNrID4gMCA/ICd0b3AnIDogJ2JvdHRvbSc7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=