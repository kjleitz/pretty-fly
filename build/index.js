!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=document.createElement("canvas"),n=()=>{s.width=window.innerWidth,s.height=window.innerHeight};n(),window.addEventListener("resize",n),document.body.appendChild(s);const r=s.getContext("2d");r||console.error("Canvas '2d' context is not supported.");const o=(t,e)=>{requestAnimationFrame(()=>o(t,e)),t.clearRect(0,0,window.innerWidth,window.innerHeight),e()};var h=o;const a=0,l=1,c=.25,u=100;var d=new class{constructor(){this.masses=[]}overlappingMasses(t){return this.masses.filter(e=>t!==e&&t.isHitting(e))}overlap(t){return this.overlappingMasses(t).reduce((e,i)=>{const s=e;if(i.top>=t.top&&i.top<=t.bottom){const e=t.bottom-i.top;s.bottom<e&&(s.bottom=e)}if(i.bottom<=t.bottom&&i.bottom>=t.top){const e=i.bottom-t.top;s.top<e&&(s.top=e)}if(i.left>=t.left&&i.left<=t.right){const e=t.right-i.left;s.right<e&&(s.right=e)}if(i.right>=t.left&&i.right<=t.right){const e=i.right-t.left;s.left<e&&(s.left=e)}return s},{top:0,right:0,bottom:0,left:0})}};const g=(t,e)=>{const[i,s]=t<e?[t,e]:[e,t],n=s-i;return i+Math.random()*n},p=(t,e)=>{e||(e=t,t=0);const[i,s]=t<e?[t,e]:[e,t],n=[...Array(s-i).keys()].map(t=>t+i);return e>=t?n:[s,...n.slice(1).reverse()]},f=(t,e,i=0)=>{if(t===i)return i;if(t>i){const s=t-e;return s<i?i:s}const s=t+e;return s>i?i:s},y=(t,e,i)=>{const[s,n]=e<i?[e,i]:[i,e];return t<s?s:t>n?n:t},w=(t,e,i,s=!0)=>{const[n,r]=e<i?[e,i]:[i,e];return s?t>=n&&t<=r:t>n&&t<r},m=(t,e,i,s,n)=>{let r=t+e,o=e+i;return r>n?(r=n,o=0):r<s&&(r=s,o=0),{position:r,velocity:o}};class x{constructor(t){this.mass=1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.width=25,this.height=25,this.stationary=!1,this.darkMatter=!1,Object.assign(this,t),this.darkMatter||d.masses.push(this)}get dragCoefficient(){return(2*this.width+2*this.height)/this.mass/u}get ax(){return this.stationary?0:a}get ay(){return this.stationary?0:l}get isAgainstTopWall(){return 0===this.y}get isAgainstBottomWall(){return this.y===window.innerHeight-this.height}get isAgainstLeftWall(){return 0===this.x}get isAgainstRightWall(){return this.x===window.innerWidth-this.width}get terminalVelocity(){return 20}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}update(){const t=m(this.x,this.dx,this.ax,this.width,window.innerWidth-this.width),e=this.isAgainstTopWall||this.isAgainstBottomWall?c:0,i=f(t.velocity,e),s=m(this.y,this.dy,this.ay,this.height,window.innerHeight-this.height),n=this.isAgainstLeftWall||this.isAgainstRightWall?c:0,r=f(s.velocity,n);this.x=t.position,this.dx=y(i,-1*this.terminalVelocity,this.terminalVelocity),this.y=s.position,this.dy=y(r,-1*this.terminalVelocity,this.terminalVelocity);const o=d.overlap(this);o.bottom>0?(this.y-=o.bottom,this.dy=0):o.top>0&&(this.y+=o.top,this.dy=0),o.right>0?(this.x-=o.right,this.dx=0):o.left>0&&(this.x+=o.left,this.dx=0)}isHitting(t){const e=t.x,i=t.x+t.width,s=t.y,n=t.y+t.height,r=this.x,o=this.x+this.width,h=this.y,a=this.y+this.height;return o>=e&&r<=i&&a>=s&&h<=n}}var b=new class{constructor(){this.x=0,this.y=0,this.pressed=!1,window.addEventListener("mousedown",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mousemove",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("mouseup",t=>{this.populateFromMouseEvent(t)}),window.addEventListener("touchstart",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchmove",t=>{this.populateFromTouchEvent(t)}),window.addEventListener("touchend",t=>{this.populateFromTouchEvent(t)})}populateFromMouseEvent(t){this.x=t.x,this.y=t.y,this.pressed=1===t.buttons}populateFromTouchEvent(t){const{touches:e}=t;if(0===e.length)this.pressed=!1;else{const t=e[0];this.x=t.clientX,this.y=t.clientY,this.pressed=!0}}};const v=new class extends x{constructor(){super(...arguments),this.width=15,this.height=20,this.jetpackForceX=.4,this.jetpackForceY=1.3}get burning(){return b.pressed}get axJetpack(){if(!this.burning)return 0;const t=b.x-this.x,e=-1*this.width,i=2*this.width;if(w(t,e,i))return 0;const s=this.jetpackForceX/this.mass;return t>0?s:-1*s}get ayJetpack(){if(!this.burning)return 0;const t=b.y-this.y,e=this.height;return t>=0||w(t,0,e)?0:-1*(this.jetpackForceY/this.mass)}get ax(){return super.ax+this.axJetpack}get ay(){return super.ay+this.ayJetpack}get burnerXSide(){return 0===this.axJetpack?"none":this.axJetpack>0?"left":"right"}get burnerYSide(){return 0===this.ayJetpack?"none":this.ayJetpack>0?"top":"bottom"}},k=p(10).map(()=>new x({mass:g(.5,5),x:g(0,window.innerWidth),y:g(0,window.innerHeight),width:g(50,150),height:g(50,150),stationary:!0})),E=p(100).map(()=>{const t=g(1,5);return[g(0,window.innerWidth),g(0,window.innerHeight),t,t]});h(r,()=>{E.forEach((t,e)=>{const i=(e%10+1)/10;r.fillStyle=`rgba(255, 255, 255, ${i})`,r.fillRect(...t)}),k.forEach(t=>{v.isHitting(t)?r.fillStyle="rgba(255, 0, 0, 0.2)":r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(t.x,t.y,t.width,t.height)}),r.fillStyle="rgba(0, 150, 0, 1)",r.fillRect(v.x,v.y,v.width,v.height);const t=v.width/2,e=v.height/5;switch(r.fillStyle="rgba(220, 220, 255, 1)",v.burnerXSide){case"left":r.fillRect(v.x+(v.width-t),v.y+3,t,e);break;case"right":r.fillRect(v.x,v.y+3,t,e);break;default:r.fillRect(v.x+(v.width-t)/2,v.y+3,t,e)}const i=`rgba(255, 100, 0, ${g(.5,.75)})`,s=g(.25,.4)*v.width,n=g(.4,.6)*v.height,o=t=>.6*t,h=t=>(t-o(t))/2;switch(r.fillStyle=i,v.burnerXSide){case"left":r.fillRect(v.x-s,v.y+h(v.height),s,o(v.height));break;case"right":r.fillRect(v.x+v.width,v.y+h(v.height),s,o(v.height))}switch(v.burnerYSide){case"bottom":r.fillRect(v.x+h(v.width),v.y+v.height,o(v.width),n);break;case"top":r.fillRect(v.x+h(v.width),v.y-n,o(v.width),n)}v.update()})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUxvb3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaXZlcnNlLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlsaXRpZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hc3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUGxheWVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3RyZXRjaENhbnZhcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImN0eCIsImdldENvbnRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJnYW1lTG9vcCIsImRyYXciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJHUkFWSVRZX1giLCJHUkFWSVRZX1kiLCJGUklDVElPTiIsIk5PUk1BTF9EUkFHIiwibWFzc2VzIiwic3ViamVjdCIsInRoaXMiLCJmaWx0ZXIiLCJtYXNzIiwiaXNIaXR0aW5nIiwib3ZlcmxhcHBpbmdNYXNzZXMiLCJyZWR1Y2UiLCJtZW1vIiwib3ZlcmxhcCIsInRvcCIsImJvdHRvbSIsImRpc3RhbmNlIiwibGVmdCIsInJpZ2h0IiwicmFuZCIsIm1pbiIsIm1heCIsInJlYWxNaW4iLCJyZWFsTWF4IiwiZGlmZiIsIk1hdGgiLCJyYW5kb20iLCJyYW5nZSIsImJhc2VBcnJheSIsIkFycmF5Iiwia2V5cyIsIm1hcCIsInNsaWNlIiwicmV2ZXJzZSIsImRhbXBlbiIsIm51bSIsImJ5IiwiY2VudGVyIiwibmV3TnVtIiwiYm91bmQiLCJiZXR3ZWVuIiwiaW5jbHVzaXZlIiwidXBkYXRlRGltZW5zaW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsIm5ld1Bvc2l0aW9uIiwibmV3VmVsb2NpdHkiLCJvcHRpb25zIiwieCIsInkiLCJkeCIsImR5Iiwic3RhdGlvbmFyeSIsImRhcmtNYXR0ZXIiLCJhc3NpZ24iLCJwdXNoIiwibmV3WERpbWVuc2lvbiIsImF4IiwieEZyaWN0aW9uIiwiaXNBZ2FpbnN0VG9wV2FsbCIsImlzQWdhaW5zdEJvdHRvbVdhbGwiLCJkeFdpdGhGcmljdGlvbiIsIm5ld1lEaW1lbnNpb24iLCJheSIsInlGcmljdGlvbiIsImlzQWdhaW5zdExlZnRXYWxsIiwiaXNBZ2FpbnN0UmlnaHRXYWxsIiwiZHlXaXRoRnJpY3Rpb24iLCJ0ZXJtaW5hbFZlbG9jaXR5IiwibWFzc0xlZnQiLCJtYXNzUmlnaHQiLCJtYXNzVG9wIiwibWFzc0JvdHRvbSIsInRoaXNMZWZ0IiwidGhpc1JpZ2h0IiwidGhpc1RvcCIsInRoaXNCb3R0b20iLCJwcmVzc2VkIiwiZXZlbnQiLCJwb3B1bGF0ZUZyb21Nb3VzZUV2ZW50IiwicG9wdWxhdGVGcm9tVG91Y2hFdmVudCIsImJ1dHRvbnMiLCJ0b3VjaGVzIiwibGVuZ3RoIiwidG91Y2giLCJjbGllbnRYIiwiY2xpZW50WSIsInBsYXllciIsImpldHBhY2tGb3JjZVgiLCJqZXRwYWNrRm9yY2VZIiwiYnVybmluZyIsIm1vdXNlRGlzdGFuY2UiLCJsZWZ0TWFyZ2luIiwicmlnaHRNYXJnaW4iLCJqZXRwYWNrQWNjZWxlcmF0aW9uIiwiYm90dG9tTWFyZ2luIiwic3VwZXIiLCJheEpldHBhY2siLCJheUpldHBhY2siLCJzdGFycyIsInNpemUiLCJmb3JFYWNoIiwicmVjdE9wdGlvbnMiLCJpbmRleCIsIm9wYWNpdHkiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZhY2VtYXNrV2lkdGgiLCJmYWNlbWFza0hlaWdodCIsImJ1cm5lclhTaWRlIiwiYnVybmVyQ29sb3IiLCJidXJuZXJMZW5ndGhYIiwiYnVybmVyTGVuZ3RoWSIsImJ1cm5lckFjcm9zcyIsImJ1cm5lckFjcm9zc09mZnNldCIsImJ1cm5lcllTaWRlIiwidXBkYXRlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxD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bnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbmNvbnN0IHN0cmV0Y2hDYW52YXMgPSAoKTogdm9pZCA9PiB7XG4gIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xufTtcblxuc3RyZXRjaENhbnZhcygpO1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHN0cmV0Y2hDYW52YXMpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XG5pZiAoIWN0eCkgY29uc29sZS5lcnJvcihcIkNhbnZhcyAnMmQnIGNvbnRleHQgaXMgbm90IHN1cHBvcnRlZC5cIik7XG5cbmV4cG9ydCB7IGN0eCB9O1xuZXhwb3J0IGRlZmF1bHQgY2FudmFzO1xuIiwiY29uc3QgZ2FtZUxvb3AgPSAoYzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkcmF3OiAoKSA9PiB2b2lkKTogdm9pZCA9PiB7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBnYW1lTG9vcChjLCBkcmF3KSk7XG4gIGMuY2xlYXJSZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICBkcmF3KCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lTG9vcDtcbiIsImltcG9ydCBNYXNzIGZyb20gXCIuL01hc3NcIjtcblxuZXhwb3J0IGNvbnN0IEdSQVZJVFlfWCA9IDA7IC8vIHB4L2ZyXjJcbmV4cG9ydCBjb25zdCBHUkFWSVRZX1kgPSAxOyAvLyBweC9mcl4yXG5leHBvcnQgY29uc3QgQUlSX1JFU0lTVEFOQ0UgPSAwLjI1OyAvLyBUT0RPXG5leHBvcnQgY29uc3QgRlJJQ1RJT04gPSAwLjI1OyAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBkZXBlbmRlbnQgb24gbWFzc1xuZXhwb3J0IGNvbnN0IE5PUk1BTF9EUkFHID0gMTAwOyAvLyBzdXJmYWNlIGFyZWEgaW4gcGl4ZWxzLCBwZXIga2lsb2dyYW1cblxuY2xhc3MgVW5pdmVyc2Uge1xuICBwdWJsaWMgbWFzc2VzID0gW10gYXMgTWFzc1tdO1xuXG4gIG92ZXJsYXBwaW5nTWFzc2VzKHN1YmplY3Q6IE1hc3MpOiBNYXNzW10ge1xuICAgIHJldHVybiB0aGlzLm1hc3Nlcy5maWx0ZXIoKG1hc3MpID0+IHtcbiAgICAgIGlmIChzdWJqZWN0ID09PSBtYXNzKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc3ViamVjdC5pc0hpdHRpbmcobWFzcyk7XG4gICAgfSk7XG4gIH1cblxuICBvdmVybGFwKHN1YmplY3Q6IE1hc3MpOiBSZWNvcmQ8J3RvcCd8J3JpZ2h0J3wnYm90dG9tJ3wnbGVmdCcsIG51bWJlcj4ge1xuICAgIGNvbnN0IG1hc3NlcyA9IHRoaXMub3ZlcmxhcHBpbmdNYXNzZXMoc3ViamVjdCk7XG4gICAgLyoqXG4gICAgICogLC0tLS0sXG4gICAgICogfCAgICB8IDw9IHN1YmplY3RcbiAgICAgKiAnLS0tLSdcbiAgICAgKiAuLi4uLi5cbiAgICAgKiA6ICAgIDogPD0gbWFzc1xuICAgICAqIGBgYGBgYFxuICAgICAqL1xuICAgIHJldHVybiBtYXNzZXMucmVkdWNlKChtZW1vLCBtYXNzKSA9PiB7XG4gICAgICBjb25zdCBvdmVybGFwID0gbWVtbztcblxuICAgICAgLyoqXG4gICAgICAgKiAsLS0tLSwgICAgLC0tLS0sICAgICwtLi0tLC4uICAgICwtLS0tLCAgICAsLS0tLSwgIC4uLC0tLi0sICAgICwtLS0tLCAgICAgICwtLS0tLCAgICAuLiwtLS0tLC4uXG4gICAgICAgKiB8ICAgIHwgICAgfCAuLi58Li4gIHwgOiAgfCA6ICAgIHwgICAgfCAgLi58Li4uIHwgIDogfCAgOiB8ICAgIHwgICAgfCAgICAuLnwuLi4ufC4uICA6IHwgICAgfCA6XG4gICAgICAgKiAnLS4tLScuLiAgJy06LS0nIDogICctLS0tJ2BgICAuLictLS4tJyAgOiAnLS06LScgIGBgJy0tLS0nICAuLictLS0tJy4uICA6ICctLS0tJyA6ICBgYCctLS0tJ2BgXG4gICAgICAgKiAgIDogICAgOiAgICBgYGBgYGAgICAgICAgICAgICA6ICAgIDogICAgYGBgYGBgICAgICAgICAgICAgICA6ICAgICAgICA6ICBgYGBgYGBgYGBgXG4gICAgICAgKiAgIGBgYGBgYCAgICAgICAgICAgICAgICAgICAgICBgYGBgYGAgICAgICAgICAgICAgICAgICAgICAgICBgYGBgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NUb3BPdmVybGFwID0gbWFzcy50b3AgPj0gc3ViamVjdC50b3AgJiYgbWFzcy50b3AgPD0gc3ViamVjdC5ib3R0b207XG4gICAgICBpZiAobWFzc1RvcE92ZXJsYXApIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBzdWJqZWN0LmJvdHRvbSAtIG1hc3MudG9wO1xuICAgICAgICBpZiAob3ZlcmxhcC5ib3R0b20gPCBkaXN0YW5jZSkgb3ZlcmxhcC5ib3R0b20gPSBkaXN0YW5jZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiAuLi4uLi4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLi4uLiAgICAgICAgICAgICAgICAgICAgIC4uLi4uLi4uLi5cbiAgICAgICAqIDogICAgOiAgICAuLi4uLi4gICAgICAgICAgICAgICAgOiAgICA6ICAgLi4uLi4uICAgICAgICAgICAgOiAgICAgICAgOiAgLi4uLi4uLi4uLlxuICAgICAgICogYGAsLS0tLSwgIDogLC0tOi0sICAuLiwtLS0tLCAgLC1gLS0sYGAgLC06LS0sIDogICwtLS0tLC4uICBgYCwtLS0tLGBgICA6ICwtLS0tLCA6ICAuLiwtLS0tLC4uXG4gICAgICAgKiAgIHwgICAgfCAgYGB8YGBgIHwgIDogfCAgOiB8ICB8ICAgIHwgICB8IGBgYHxgYCAgfCA6ICB8IDogICAgfCAgICB8ICAgIGBgfGBgYGB8YGAgIDogfCAgICB8IDpcbiAgICAgICAqICAgJy0tLS0nICAgICctLS0tJyAgYGAnLS1gLScgICctLS0tJyAgICctLS0tJyAgICAnLWAtLSdgYCAgICAnLS0tLScgICAgICAnLS0tLScgICAgYGAnLS0tLSdgYFxuICAgICAgICovXG4gICAgICBjb25zdCBtYXNzQm90dG9tT3ZlcmxhcCA9IG1hc3MuYm90dG9tIDw9IHN1YmplY3QuYm90dG9tICYmIG1hc3MuYm90dG9tID49IHN1YmplY3QudG9wO1xuICAgICAgaWYgKG1hc3NCb3R0b21PdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gbWFzcy5ib3R0b20gLSBzdWJqZWN0LnRvcDtcbiAgICAgICAgaWYgKG92ZXJsYXAudG9wIDwgZGlzdGFuY2UpIG92ZXJsYXAudG9wID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHxgYGBgYFxuICAgICAgICogJy0tLS0nXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLi06LS0uIDpcbiAgICAgICAqIHwgYGBgfGBgXG4gICAgICAgKiAnLS0tLSdcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8YGBgYHxcbiAgICAgICAqICctLS0tJ1xuICAgICAgICogLC0tLS0sXG4gICAgICAgKiB8ICAgIHwuLi4uLlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAsLS0tLSxcbiAgICAgICAqIHwgLi4ufC4uXG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqICwtLS0tLFxuICAgICAgICogfC4uLi58XG4gICAgICAgKiA6LS0tLTpcbiAgICAgICAqIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICwtLS0tOiAgICA6XG4gICAgICAgKiB8ICAgIHwgICAgOlxuICAgICAgICogJy0tLS06ICAgIDpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgIC4uLi4uLlxuICAgICAgICogLC06LS0sIDpcbiAgICAgICAqIHwgOiAgfCA6XG4gICAgICAgKiAnLTotLScgOlxuICAgICAgICogICBgYGBgYGBcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOi0tLS06XG4gICAgICAgKiB8ICAgIHxcbiAgICAgICAqIDotLS0tOlxuICAgICAgICogYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NMZWZ0T3ZlcmxhcCA9IG1hc3MubGVmdCA+PSBzdWJqZWN0LmxlZnQgJiYgbWFzcy5sZWZ0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc0xlZnRPdmVybGFwKSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gc3ViamVjdC5yaWdodCAtIG1hc3MubGVmdDtcbiAgICAgICAgaWYgKG92ZXJsYXAucmlnaHQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5yaWdodCA9IGRpc3RhbmNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIC4uLi4uLlxuICAgICAgICogOiAgICA6LS0tLSxcbiAgICAgICAqIGBgYGBgfCAgICB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgLi4uLi4uXG4gICAgICAgKiAgICA6ICwtLTotLFxuICAgICAgICogICAgYGB8YGBgIHxcbiAgICAgICAqICAgICAgJy0tLS0nXG4gICAgICAgKiAgICAgIC4uLi4uLlxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgfGBgYGB8XG4gICAgICAgKiAgICAgICctLS0tJ1xuICAgICAgICogICAgICAsLS0tLSxcbiAgICAgICAqIC4uLi4ufCAgICB8XG4gICAgICAgKiA6ICAgIDotLS0tJ1xuICAgICAgICogYGBgYGBgXG4gICAgICAgKiAgICAgICwtLS0tLFxuICAgICAgICogICAgLi58Li4uIHxcbiAgICAgICAqICAgIDogJy0tOi0nXG4gICAgICAgKiAgICBgYGBgYGBcbiAgICAgICAqICAgICAgLC0tLS0sXG4gICAgICAgKiAgICAgIHwuLi4ufFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKiAgLi4uLi4uXG4gICAgICAgKiAgOiAgICAsLS0tLSxcbiAgICAgICAqICA6ICAgIHwgICAgfFxuICAgICAgICogIDogICAgJy0tLS0nXG4gICAgICAgKiAgYGBgYGBgXG4gICAgICAgKiAgICAuLi4uLi5cbiAgICAgICAqICAgIDogLC0tOi0sXG4gICAgICAgKiAgICA6IHwgIDogfFxuICAgICAgICogICAgOiAnLS06LSdcbiAgICAgICAqICAgIGBgYGBgYFxuICAgICAgICogICAgICAuLi4uLi5cbiAgICAgICAqICAgICAgOi0tLS06XG4gICAgICAgKiAgICAgIHwgICAgfFxuICAgICAgICogICAgICA6LS0tLTpcbiAgICAgICAqICAgICAgYGBgYGBgXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IG1hc3NSaWdodE92ZXJsYXAgPSBtYXNzLnJpZ2h0ID49IHN1YmplY3QubGVmdCAmJiBtYXNzLnJpZ2h0IDw9IHN1YmplY3QucmlnaHQ7XG4gICAgICBpZiAobWFzc1JpZ2h0T3ZlcmxhcCkge1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IG1hc3MucmlnaHQgLSBzdWJqZWN0LmxlZnQ7XG4gICAgICAgIGlmIChvdmVybGFwLmxlZnQgPCBkaXN0YW5jZSkgb3ZlcmxhcC5sZWZ0ID0gZGlzdGFuY2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEknbSBtaXNzaW5nIHRvdGFsIG92ZXJsYXBzIGFuZCB0b3RhbCBlY2xpcHNlcyBidXQgSSBkb24ndCBnaXZlIGEgc2hpdFxuICAgICAgcmV0dXJuIG92ZXJsYXA7XG4gICAgfSwgeyB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIGxlZnQ6IDAgfSk7XG4gIH1cbn1cblxuY29uc3QgdW5pdmVyc2UgPSBuZXcgVW5pdmVyc2UoKTtcbmV4cG9ydCBkZWZhdWx0IHVuaXZlcnNlO1xuIiwiZXhwb3J0IGNvbnN0IHJhbmQgPSAobWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIGNvbnN0IGRpZmYgPSByZWFsTWF4IC0gcmVhbE1pbjtcbiAgcmV0dXJuIHJlYWxNaW4gKyAoTWF0aC5yYW5kb20oKSAqIGRpZmYpO1xufTtcblxuZXhwb3J0IGNvbnN0IHJhbmdlID0gKG1pbjogbnVtYmVyLCBtYXg/OiBudW1iZXIpOiBudW1iZXJbXSA9PiB7XG4gIGlmICghbWF4KSB7XG4gICAgbWF4ID0gbWluOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgbWluID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICB9XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBjb25zdCBkaWZmID0gcmVhbE1heCAtIHJlYWxNaW47XG4gIGNvbnN0IGJhc2VBcnJheSA9IFsuLi5BcnJheShkaWZmKS5rZXlzKCldLm1hcChuID0+IG4gKyByZWFsTWluKTtcbiAgcmV0dXJuIG1heCA+PSBtaW4gPyBiYXNlQXJyYXkgOiBbcmVhbE1heCwgLi4uYmFzZUFycmF5LnNsaWNlKDEpLnJldmVyc2UoKV07XG59O1xuXG5leHBvcnQgY29uc3QgZGFtcGVuID0gKG51bTogbnVtYmVyLCBieTogbnVtYmVyLCBjZW50ZXIgPSAwKTogbnVtYmVyID0+IHtcbiAgLy8gbnVtYmVyIGlzIGFscmVhZHkgYXQgdGhlIGNlbnRlclxuICBpZiAobnVtID09PSBjZW50ZXIpIHJldHVybiBjZW50ZXI7XG5cbiAgLy8gbnVtYmVyIGlzIGhpZ2hlciB0aGFuIHRoZSBjZW50ZXI7IHN1YnRyYWN0IGFuZCBkb24ndCBvdmVyc2hvb3QgdGhlIGNlbnRlclxuICBpZiAobnVtID4gY2VudGVyKSB7XG4gICAgY29uc3QgbmV3TnVtID0gbnVtIC0gYnk7XG4gICAgcmV0dXJuIG5ld051bSA8IGNlbnRlciA/IGNlbnRlciA6IG5ld051bTtcbiAgfVxuXG4gIC8vIG51bWJlciBpcyBsb3dlciB0aGFuIHRoZSBjZW50ZXI7IGFkZCBhbmQgZG9uJ3Qgb3ZlcnNob290IHRoZSBjZW50ZXJcbiAgY29uc3QgbmV3TnVtID0gbnVtICsgYnk7XG4gIHJldHVybiBuZXdOdW0gPiBjZW50ZXIgPyBjZW50ZXIgOiBuZXdOdW07XG59O1xuXG5leHBvcnQgY29uc3QgYm91bmQgPSAobnVtOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gIGNvbnN0IFtyZWFsTWluLCByZWFsTWF4XSA9IG1pbiA8IG1heCA/IFttaW4sIG1heF0gOiBbbWF4LCBtaW5dO1xuICBpZiAobnVtIDwgcmVhbE1pbikgcmV0dXJuIHJlYWxNaW47XG4gIGlmIChudW0gPiByZWFsTWF4KSByZXR1cm4gcmVhbE1heDtcbiAgcmV0dXJuIG51bTtcbn07XG5cbmV4cG9ydCBjb25zdCBiZXR3ZWVuID0gKG51bTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGluY2x1c2l2ZSA9IHRydWUpOiBib29sZWFuID0+IHtcbiAgY29uc3QgW3JlYWxNaW4sIHJlYWxNYXhdID0gbWluIDwgbWF4ID8gW21pbiwgbWF4XSA6IFttYXgsIG1pbl07XG4gIHJldHVybiBpbmNsdXNpdmUgPyAobnVtID49IHJlYWxNaW4gJiYgbnVtIDw9IHJlYWxNYXgpIDogKG51bSA+IHJlYWxNaW4gJiYgbnVtIDwgcmVhbE1heCk7XG59O1xuIiwiaW1wb3J0IHVuaXZlcnNlLCB7IEdSQVZJVFlfWCwgR1JBVklUWV9ZLCBGUklDVElPTiwgTk9STUFMX0RSQUcgfSBmcm9tIFwiLi91bml2ZXJzZVwiO1xuaW1wb3J0IHsgZGFtcGVuLCBib3VuZCB9IGZyb20gXCIuL3V0aWxpdGllc1wiO1xuXG5jb25zdCB1cGRhdGVEaW1lbnNpb24gPSAoXG4gIHBvc2l0aW9uOiBudW1iZXIsXG4gIHZlbG9jaXR5OiBudW1iZXIsXG4gIGFjY2VsZXJhdGlvbjogbnVtYmVyLFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4pOiB7IHBvc2l0aW9uOiBudW1iZXI7IHZlbG9jaXR5OiBudW1iZXIgfSA9PiB7XG4gIGxldCBuZXdQb3NpdGlvbiA9IHBvc2l0aW9uICsgdmVsb2NpdHk7XG4gIGxldCBuZXdWZWxvY2l0eSA9IHZlbG9jaXR5ICsgYWNjZWxlcmF0aW9uO1xuICBpZiAobmV3UG9zaXRpb24gPiBtYXgpIHtcbiAgICBuZXdQb3NpdGlvbiA9IG1heDtcbiAgICBuZXdWZWxvY2l0eSA9IDA7XG4gIH0gZWxzZSBpZiAobmV3UG9zaXRpb24gPCBtaW4pIHtcbiAgICBuZXdQb3NpdGlvbiA9IG1pbjtcbiAgICBuZXdWZWxvY2l0eSA9IDA7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBuZXdQb3NpdGlvbixcbiAgICB2ZWxvY2l0eTogbmV3VmVsb2NpdHksXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXNzIHtcbiAgcHVibGljIG1hc3MgPSAxOyAvLyBrZ1xuICBwdWJsaWMgeCA9IDA7IC8vIHB4XG4gIHB1YmxpYyB5ID0gMDsgLy8gcHhcbiAgcHVibGljIGR4ID0gMDsgLy8gcHgvZnJcbiAgcHVibGljIGR5ID0gMDsgLy8gcHgvZnJcbiAgcHVibGljIHdpZHRoID0gMjU7IC8vIHB4XG4gIHB1YmxpYyBoZWlnaHQgPSAyNTsgLy8gcHhcbiAgcHVibGljIHN0YXRpb25hcnkgPSBmYWxzZTtcbiAgcHJpdmF0ZSBkYXJrTWF0dGVyID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IFBhcnRpYWw8TWFzcz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMsIG9wdGlvbnMpO1xuICAgIGlmICghdGhpcy5kYXJrTWF0dGVyKSB1bml2ZXJzZS5tYXNzZXMucHVzaCh0aGlzKTtcbiAgfVxuXG4gIGdldCBkcmFnQ29lZmZpY2llbnQoKTogbnVtYmVyIHtcbiAgICBjb25zdCBzdXJmYWNlQXJlYSA9ICgyICogdGhpcy53aWR0aCkgKyAoMiAqIHRoaXMuaGVpZ2h0KTtcbiAgICByZXR1cm4gKHN1cmZhY2VBcmVhIC8gdGhpcy5tYXNzKSAvIE5PUk1BTF9EUkFHO1xuICB9XG5cbiAgZ2V0IGF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnN0YXRpb25hcnkgPyAwIDogR1JBVklUWV9YOyB9XG4gIGdldCBheSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5zdGF0aW9uYXJ5ID8gMCA6IEdSQVZJVFlfWTsgfVxuXG4gIGdldCBpc0FnYWluc3RUb3BXYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSAwOyB9XG4gIGdldCBpc0FnYWluc3RCb3R0b21XYWxsKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy55ID09PSB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmhlaWdodDsgfVxuICBnZXQgaXNBZ2FpbnN0TGVmdFdhbGwoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnggPT09IDA7IH1cbiAgZ2V0IGlzQWdhaW5zdFJpZ2h0V2FsbCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMueCA9PT0gd2luZG93LmlubmVyV2lkdGggLSB0aGlzLndpZHRoOyB9XG5cbiAgZ2V0IHRlcm1pbmFsVmVsb2NpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMjA7IC8vIFRPRE86IHNob3VsZCBiZSBiYXNlZCBvbiBkcmFnXG4gIH1cblxuICBnZXQgdG9wKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnk7IH1cbiAgZ2V0IHJpZ2h0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnggKyB0aGlzLndpZHRoOyB9XG4gIGdldCBib3R0b20oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0OyB9XG4gIGdldCBsZWZ0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLng7IH1cblxuICB1cGRhdGUoKTogdm9pZCB7XG4gICAgY29uc3QgbmV3WERpbWVuc2lvbiA9IHVwZGF0ZURpbWVuc2lvbih0aGlzLngsIHRoaXMuZHgsIHRoaXMuYXgsIHRoaXMud2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy53aWR0aCk7XG4gICAgY29uc3QgeEZyaWN0aW9uID0gdGhpcy5pc0FnYWluc3RUb3BXYWxsIHx8IHRoaXMuaXNBZ2FpbnN0Qm90dG9tV2FsbCA/IEZSSUNUSU9OIDogMDtcbiAgICBjb25zdCBkeFdpdGhGcmljdGlvbiA9IGRhbXBlbihuZXdYRGltZW5zaW9uLnZlbG9jaXR5LCB4RnJpY3Rpb24pO1xuXG4gICAgY29uc3QgbmV3WURpbWVuc2lvbiA9IHVwZGF0ZURpbWVuc2lvbih0aGlzLnksIHRoaXMuZHksIHRoaXMuYXksIHRoaXMuaGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmhlaWdodCk7XG4gICAgY29uc3QgeUZyaWN0aW9uID0gdGhpcy5pc0FnYWluc3RMZWZ0V2FsbCB8fCB0aGlzLmlzQWdhaW5zdFJpZ2h0V2FsbCA/IEZSSUNUSU9OIDogMDtcbiAgICBjb25zdCBkeVdpdGhGcmljdGlvbiA9IGRhbXBlbihuZXdZRGltZW5zaW9uLnZlbG9jaXR5LCB5RnJpY3Rpb24pO1xuXG4gICAgdGhpcy54ID0gbmV3WERpbWVuc2lvbi5wb3NpdGlvbjtcbiAgICB0aGlzLmR4ID0gYm91bmQoZHhXaXRoRnJpY3Rpb24sIC0xICogdGhpcy50ZXJtaW5hbFZlbG9jaXR5LCB0aGlzLnRlcm1pbmFsVmVsb2NpdHkpO1xuICAgIHRoaXMueSA9IG5ld1lEaW1lbnNpb24ucG9zaXRpb247XG4gICAgdGhpcy5keSA9IGJvdW5kKGR5V2l0aEZyaWN0aW9uLCAtMSAqIHRoaXMudGVybWluYWxWZWxvY2l0eSwgdGhpcy50ZXJtaW5hbFZlbG9jaXR5KTtcblxuICAgIGNvbnN0IG92ZXJsYXAgPSB1bml2ZXJzZS5vdmVybGFwKHRoaXMpO1xuICAgIGlmIChvdmVybGFwLmJvdHRvbSA+IDApIHtcbiAgICAgIHRoaXMueSAtPSBvdmVybGFwLmJvdHRvbTtcbiAgICAgIHRoaXMuZHkgPSAwO1xuICAgIH0gZWxzZSBpZiAob3ZlcmxhcC50b3AgPiAwKSB7XG4gICAgICB0aGlzLnkgKz0gb3ZlcmxhcC50b3A7XG4gICAgICB0aGlzLmR5ID0gMDtcbiAgICB9XG4gICAgaWYgKG92ZXJsYXAucmlnaHQgPiAwKSB7XG4gICAgICB0aGlzLnggLT0gb3ZlcmxhcC5yaWdodDtcbiAgICAgIHRoaXMuZHggPSAwO1xuICAgIH0gZWxzZSBpZiAob3ZlcmxhcC5sZWZ0ID4gMCkge1xuICAgICAgdGhpcy54ICs9IG92ZXJsYXAubGVmdDtcbiAgICAgIHRoaXMuZHggPSAwO1xuICAgIH1cbiAgfVxuXG4gIGlzSGl0dGluZyhtYXNzOiBNYXNzKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbWFzc0xlZnQgPSBtYXNzLng7XG4gICAgY29uc3QgbWFzc1JpZ2h0ID0gbWFzcy54ICsgbWFzcy53aWR0aDtcbiAgICBjb25zdCBtYXNzVG9wID0gbWFzcy55O1xuICAgIGNvbnN0IG1hc3NCb3R0b20gPSBtYXNzLnkgKyBtYXNzLmhlaWdodDtcblxuICAgIGNvbnN0IHRoaXNMZWZ0ID0gdGhpcy54O1xuICAgIGNvbnN0IHRoaXNSaWdodCA9IHRoaXMueCArIHRoaXMud2lkdGg7XG4gICAgY29uc3QgdGhpc1RvcCA9IHRoaXMueTtcbiAgICBjb25zdCB0aGlzQm90dG9tID0gdGhpcy55ICsgdGhpcy5oZWlnaHQ7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpc1JpZ2h0ID49IG1hc3NMZWZ0XG4gICAgICAmJiB0aGlzTGVmdCA8PSBtYXNzUmlnaHRcbiAgICAgICYmIHRoaXNCb3R0b20gPj0gbWFzc1RvcFxuICAgICAgJiYgdGhpc1RvcCA8PSBtYXNzQm90dG9tXG4gICAgKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIE1vdXNlIHtcbiAgcHVibGljIHggPSAwO1xuICBwdWJsaWMgeSA9IDA7XG4gIHB1YmxpYyBwcmVzc2VkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBvcHVsYXRlRnJvbU1vdXNlRXZlbnQoZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5wb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMucG9wdWxhdGVGcm9tVG91Y2hFdmVudChldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICBwb3B1bGF0ZUZyb21Nb3VzZUV2ZW50KGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy54ID0gZXZlbnQueDtcbiAgICB0aGlzLnkgPSBldmVudC55O1xuICAgIHRoaXMucHJlc3NlZCA9IGV2ZW50LmJ1dHRvbnMgPT09IDE7XG4gIH1cblxuICBwb3B1bGF0ZUZyb21Ub3VjaEV2ZW50KGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgeyB0b3VjaGVzIH0gPSBldmVudDtcbiAgICBpZiAodG91Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b3VjaCA9IHRvdWNoZXNbMF07XG4gICAgICB0aGlzLnggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgdGhpcy55ID0gdG91Y2guY2xpZW50WTtcbiAgICAgIHRoaXMucHJlc3NlZCA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IG1vdXNlID0gbmV3IE1vdXNlKCk7XG5cbmV4cG9ydCBkZWZhdWx0IG1vdXNlO1xuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWNsYXNzZXMtcGVyLWZpbGUgKi9cblxuaW1wb3J0IHsgY3R4IH0gZnJvbSAnLi9jYW52YXMnO1xuaW1wb3J0IGdhbWVMb29wIGZyb20gJy4vZ2FtZUxvb3AnO1xuaW1wb3J0IE1hc3MgZnJvbSAnLi9NYXNzJztcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9QbGF5ZXInO1xuaW1wb3J0IHsgcmFuZ2UsIHJhbmQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5pbXBvcnQgdW5pdmVyc2UgZnJvbSAnLi91bml2ZXJzZSc7XG5cbmNvbnN0IHBsYXllciA9IG5ldyBQbGF5ZXIoKTtcblxuY29uc3QgbWFzc2VzID0gcmFuZ2UoMTApLm1hcCgoKSA9PiB7XG4gIHJldHVybiBuZXcgTWFzcyh7XG4gICAgbWFzczogcmFuZCgwLjUsIDUpLFxuICAgIHg6IHJhbmQoMCwgd2luZG93LmlubmVyV2lkdGgpLFxuICAgIHk6IHJhbmQoMCwgd2luZG93LmlubmVySGVpZ2h0KSxcbiAgICB3aWR0aDogcmFuZCg1MCwgMTUwKSxcbiAgICBoZWlnaHQ6IHJhbmQoNTAsIDE1MCksXG4gICAgc3RhdGlvbmFyeTogdHJ1ZSxcbiAgfSk7XG59KTtcblxuY29uc3Qgc3RhcnMgPSByYW5nZSgxMDApLm1hcCgoKSA9PiB7XG4gIGNvbnN0IHNpemUgPSByYW5kKDEsIDUpO1xuICByZXR1cm4gW1xuICAgIHJhbmQoMCwgd2luZG93LmlubmVyV2lkdGgpLFxuICAgIHJhbmQoMCwgd2luZG93LmlubmVySGVpZ2h0KSxcbiAgICBzaXplLFxuICAgIHNpemUsXG4gIF0gYXMgY29uc3Q7XG59KTtcblxuZ2FtZUxvb3AoY3R4LCAoKSA9PiB7XG4gIHN0YXJzLmZvckVhY2goKHJlY3RPcHRpb25zLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IG9wYWNpdHkgPSAoKGluZGV4ICUgMTApICsgMSkgLyAxMDtcbiAgICBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyNTUsIDI1NSwgJHtvcGFjaXR5fSlgO1xuICAgIGN0eC5maWxsUmVjdCguLi5yZWN0T3B0aW9ucyk7XG4gIH0pO1xuXG4gIG1hc3Nlcy5mb3JFYWNoKChtYXNzKSA9PiB7XG4gICAgaWYgKHBsYXllci5pc0hpdHRpbmcobWFzcykpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDAsIDAsIDAuMiknO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjUpJztcbiAgICB9XG5cbiAgICBjdHguZmlsbFJlY3QobWFzcy54LCBtYXNzLnksIG1hc3Mud2lkdGgsIG1hc3MuaGVpZ2h0KTtcbiAgfSk7XG5cbiAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDE1MCwgMCwgMSknO1xuICBjdHguZmlsbFJlY3QocGxheWVyLngsIHBsYXllci55LCBwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpO1xuXG4gIGNvbnN0IGZhY2VtYXNrQ29sb3IgPSAncmdiYSgyMjAsIDIyMCwgMjU1LCAxKSc7XG4gIGNvbnN0IGZhY2VtYXNrV2lkdGggPSBwbGF5ZXIud2lkdGggLyAyO1xuICBjb25zdCBmYWNlbWFza0hlaWdodCA9IHBsYXllci5oZWlnaHQgLyA1O1xuICBjb25zdCBmYWNlbWFza09mZnNldFkgPSAzO1xuICBjdHguZmlsbFN0eWxlID0gZmFjZW1hc2tDb2xvcjtcbiAgc3dpdGNoIChwbGF5ZXIuYnVybmVyWFNpZGUpIHtcbiAgICBjYXNlICdsZWZ0JzogY3R4LmZpbGxSZWN0KHBsYXllci54ICsgKHBsYXllci53aWR0aCAtIGZhY2VtYXNrV2lkdGgpLCBwbGF5ZXIueSArIGZhY2VtYXNrT2Zmc2V0WSwgZmFjZW1hc2tXaWR0aCwgZmFjZW1hc2tIZWlnaHQpOyBicmVhaztcbiAgICBjYXNlICdyaWdodCc6IGN0eC5maWxsUmVjdChwbGF5ZXIueCwgcGxheWVyLnkgKyBmYWNlbWFza09mZnNldFksIGZhY2VtYXNrV2lkdGgsIGZhY2VtYXNrSGVpZ2h0KTsgYnJlYWs7XG4gICAgZGVmYXVsdDogY3R4LmZpbGxSZWN0KHBsYXllci54ICsgKChwbGF5ZXIud2lkdGggLSBmYWNlbWFza1dpZHRoKSAvIDIpLCBwbGF5ZXIueSArIGZhY2VtYXNrT2Zmc2V0WSwgZmFjZW1hc2tXaWR0aCwgZmFjZW1hc2tIZWlnaHQpOyBicmVhaztcbiAgfVxuXG4gIGNvbnN0IGJ1cm5lckNvbG9yID0gYHJnYmEoMjU1LCAxMDAsIDAsICR7cmFuZCgwLjUsIDAuNzUpfSlgO1xuICBjb25zdCBidXJuZXJMZW5ndGhYID0gcmFuZCgwLjI1LCAwLjQpICogcGxheWVyLndpZHRoO1xuICBjb25zdCBidXJuZXJMZW5ndGhZID0gcmFuZCgwLjQsIDAuNikgKiBwbGF5ZXIuaGVpZ2h0O1xuICBjb25zdCBidXJuZXJBY3Jvc3MgPSAod2lkdGg6IG51bWJlcik6IG51bWJlciA9PiAwLjYgKiB3aWR0aDtcbiAgY29uc3QgYnVybmVyQWNyb3NzT2Zmc2V0ID0gKHdpZHRoOiBudW1iZXIpOiBudW1iZXIgPT4gKHdpZHRoIC0gYnVybmVyQWNyb3NzKHdpZHRoKSkgLyAyO1xuXG4gIGN0eC5maWxsU3R5bGUgPSBidXJuZXJDb2xvcjtcbiAgc3dpdGNoIChwbGF5ZXIuYnVybmVyWFNpZGUpIHtcbiAgICBjYXNlICdsZWZ0JzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggLSBidXJuZXJMZW5ndGhYLCAvLyBwb3NpdGlvbmVkIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIHBsYXllclxuICAgICAgcGxheWVyLnkgKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLmhlaWdodCksIC8vIGNlbnRlcmVkIG9uIHRoZSBZIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFgsIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWCBheGlzXG4gICAgICBidXJuZXJBY3Jvc3MocGxheWVyLmhlaWdodCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFkgYXhpc1xuICAgICk7IGJyZWFrO1xuICAgIGNhc2UgJ3JpZ2h0JzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggKyBwbGF5ZXIud2lkdGgsIC8vIHBvc2l0aW9uZWQgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIHBsYXllclxuICAgICAgcGxheWVyLnkgKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLmhlaWdodCksIC8vIGNlbnRlcmVkIG9uIHRoZSBZIGF4aXNcbiAgICAgIGJ1cm5lckxlbmd0aFgsIC8vIGxvbmcgdGFpbCBvcmllbnRlZCBhbG9uZyB0aGUgWCBheGlzXG4gICAgICBidXJuZXJBY3Jvc3MocGxheWVyLmhlaWdodCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFkgYXhpc1xuICAgICk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IGJyZWFrO1xuICB9XG4gIHN3aXRjaCAocGxheWVyLmJ1cm5lcllTaWRlKSB7XG4gICAgY2FzZSAnYm90dG9tJzogY3R4LmZpbGxSZWN0KFxuICAgICAgcGxheWVyLnggKyBidXJuZXJBY3Jvc3NPZmZzZXQocGxheWVyLndpZHRoKSwgLy8gY2VudGVyZWQgb24gdGhlIFggYXhpc1xuICAgICAgcGxheWVyLnkgKyBwbGF5ZXIuaGVpZ2h0LCAvLyBwb3NpdGlvbmVkIG9uIHRoZSBib3R0b20gb2YgdGhlIHBsYXllclxuICAgICAgYnVybmVyQWNyb3NzKHBsYXllci53aWR0aCksIC8vIGNyb3NzLXNlY3Rpb24gb3JpZW50ZWQgYWxvbmcgdGhlIFggYXhpc1xuICAgICAgYnVybmVyTGVuZ3RoWSwgLy8gbG9uZyB0YWlsIG9yaWVudGVkIGFsb25nIHRoZSBZIGF4aXNcbiAgICApOyBicmVhaztcbiAgICBjYXNlICd0b3AnOiBjdHguZmlsbFJlY3QoXG4gICAgICBwbGF5ZXIueCArIGJ1cm5lckFjcm9zc09mZnNldChwbGF5ZXIud2lkdGgpLCAvLyBjZW50ZXJlZCBvbiB0aGUgWCBheGlzXG4gICAgICBwbGF5ZXIueSAtIGJ1cm5lckxlbmd0aFksIC8vIHBvc2l0aW9uZWQgb24gdGhlIHRvcCBvZiB0aGUgcGxheWVyXG4gICAgICBidXJuZXJBY3Jvc3MocGxheWVyLndpZHRoKSwgLy8gY3Jvc3Mtc2VjdGlvbiBvcmllbnRlZCBhbG9uZyB0aGUgWCBheGlzXG4gICAgICBidXJuZXJMZW5ndGhZLCAvLyBsb25nIHRhaWwgb3JpZW50ZWQgYWxvbmcgdGhlIFkgYXhpc1xuICAgICk7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IGJyZWFrO1xuICB9XG5cbiAgcGxheWVyLnVwZGF0ZSgpO1xufSk7XG4iLCJpbXBvcnQgTWFzcyBmcm9tIFwiLi9NYXNzXCI7XG5pbXBvcnQgbW91c2UgZnJvbSBcIi4vbW91c2VcIjtcbmltcG9ydCB7IGJldHdlZW4gfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgTWFzcyB7XG4gIHB1YmxpYyB3aWR0aCA9IDE1O1xuICBwdWJsaWMgaGVpZ2h0ID0gMjA7XG4gIHB1YmxpYyBqZXRwYWNrRm9yY2VYID0gMC40OyAvLyAoa2cgKiBweCkgLyBmcl4yXG4gIHB1YmxpYyBqZXRwYWNrRm9yY2VZID0gMS4zOyAvLyAoa2cgKiBweCkgLyBmcl4yXG5cbiAgZ2V0IGJ1cm5pbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG1vdXNlLnByZXNzZWQ7XG4gIH1cblxuICBnZXQgYXhKZXRwYWNrKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmJ1cm5pbmcpIHJldHVybiAwO1xuXG4gICAgY29uc3QgbW91c2VEaXN0YW5jZSA9IG1vdXNlLnggLSB0aGlzLng7XG4gICAgY29uc3QgbGVmdE1hcmdpbiA9IC0xICogdGhpcy53aWR0aDtcbiAgICBjb25zdCByaWdodE1hcmdpbiA9IDIgKiB0aGlzLndpZHRoO1xuICAgIGlmIChiZXR3ZWVuKG1vdXNlRGlzdGFuY2UsIGxlZnRNYXJnaW4sIHJpZ2h0TWFyZ2luKSkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBqZXRwYWNrQWNjZWxlcmF0aW9uID0gdGhpcy5qZXRwYWNrRm9yY2VYIC8gdGhpcy5tYXNzO1xuICAgIHJldHVybiBtb3VzZURpc3RhbmNlID4gMCA/IGpldHBhY2tBY2NlbGVyYXRpb24gOiAtMSAqIGpldHBhY2tBY2NlbGVyYXRpb247XG4gIH1cblxuICBnZXQgYXlKZXRwYWNrKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLmJ1cm5pbmcpIHJldHVybiAwO1xuXG4gICAgY29uc3QgbW91c2VEaXN0YW5jZSA9IG1vdXNlLnkgLSB0aGlzLnk7XG4gICAgY29uc3QgdG9wTWFyZ2luID0gMDtcbiAgICBjb25zdCBib3R0b21NYXJnaW4gPSB0aGlzLmhlaWdodDtcbiAgICBpZiAobW91c2VEaXN0YW5jZSA+PSAwIHx8IGJldHdlZW4obW91c2VEaXN0YW5jZSwgdG9wTWFyZ2luLCBib3R0b21NYXJnaW4pKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGpldHBhY2tBY2NlbGVyYXRpb24gPSB0aGlzLmpldHBhY2tGb3JjZVkgLyB0aGlzLm1hc3M7XG4gICAgcmV0dXJuIC0xICogamV0cGFja0FjY2VsZXJhdGlvbjtcbiAgfVxuXG4gIGdldCBheCgpOiBudW1iZXIge1xuICAgIHJldHVybiBzdXBlci5heCArIHRoaXMuYXhKZXRwYWNrO1xuICB9XG5cbiAgZ2V0IGF5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHN1cGVyLmF5ICsgdGhpcy5heUpldHBhY2s7XG4gIH1cblxuICBnZXQgYnVybmVyWFNpZGUoKTogJ2xlZnQnfCdub25lJ3wncmlnaHQnIHtcbiAgICBpZiAodGhpcy5heEpldHBhY2sgPT09IDApIHJldHVybiAnbm9uZSc7XG4gICAgcmV0dXJuIHRoaXMuYXhKZXRwYWNrID4gMCA/ICdsZWZ0JyA6ICdyaWdodCc7XG4gIH1cblxuICBnZXQgYnVybmVyWVNpZGUoKTogJ2JvdHRvbSd8J25vbmUnfCd0b3AnIHtcbiAgICBpZiAodGhpcy5heUpldHBhY2sgPT09IDApIHJldHVybiAnbm9uZSc7XG4gICAgcmV0dXJuIHRoaXMuYXlKZXRwYWNrID4gMCA/ICd0b3AnIDogJ2JvdHRvbSc7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=